<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Model Criticism | Data Processing &amp; Visualization</title>
  <meta name="description" content="The focus of this document is on common data processing and exploration techniques in R, especially as a prelude to visualization. The first part of the document will cover data structures, the dplyr and tidyverse packages, which enhance and facilitate the sorts of operations that typically arise when dealing with data, including faster I/O and grouped operations. For visualization, the focus will be on using ggplot2 and other packages that allow for interactivity. In addition, basic programming concepts and techniques are introduced. Exercises may be found in the document as well. In addition, the demonstrations of most content in Python is available via Jupyter notebooks." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Model Criticism | Data Processing &amp; Visualization" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://m-clark.github.io/data-processing-and-visualization/" />
  <meta property="og:image" content="https://m-clark.github.io/data-processing-and-visualization/img/nineteeneightyR.png" />
  <meta property="og:description" content="The focus of this document is on common data processing and exploration techniques in R, especially as a prelude to visualization. The first part of the document will cover data structures, the dplyr and tidyverse packages, which enhance and facilitate the sorts of operations that typically arise when dealing with data, including faster I/O and grouped operations. For visualization, the focus will be on using ggplot2 and other packages that allow for interactivity. In addition, basic programming concepts and techniques are introduced. Exercises may be found in the document as well. In addition, the demonstrations of most content in Python is available via Jupyter notebooks." />
  <meta name="github-repo" content="m-clark/data-processing-and-visualization/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Model Criticism | Data Processing &amp; Visualization" />
  
  <meta name="twitter:description" content="The focus of this document is on common data processing and exploration techniques in R, especially as a prelude to visualization. The first part of the document will cover data structures, the dplyr and tidyverse packages, which enhance and facilitate the sorts of operations that typically arise when dealing with data, including faster I/O and grouped operations. For visualization, the focus will be on using ggplot2 and other packages that allow for interactivity. In addition, basic programming concepts and techniques are introduced. Exercises may be found in the document as well. In addition, the demonstrations of most content in Python is available via Jupyter notebooks." />
  <meta name="twitter:image" content="https://m-clark.github.io/data-processing-and-visualization/img/nineteeneightyR.png" />



<meta name="date" content="2020-02-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="img/R.ico" type="image/x-icon" />
<link rel="prev" href="models.html"/>
<link rel="next" href="ml.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/font-awesome-5.3.1/css/fontawesome-all.min.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.5/grViz.js"></script>
<link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.1/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script>
<script src="libs/plotly-binding-4.9.2/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
<script src="libs/proj4js-2.3.15/proj4.js"></script>
<link href="libs/highcharts-7.0.1/css/motion.css" rel="stylesheet" />
<link href="libs/highcharts-7.0.1/css/htmlwdgtgrid.css" rel="stylesheet" />
<script src="libs/highcharts-7.0.1/highcharts.js"></script>
<script src="libs/highcharts-7.0.1/highcharts-3d.js"></script>
<script src="libs/highcharts-7.0.1/highcharts-more.js"></script>
<script src="libs/highcharts-7.0.1/modules/stock.js"></script>
<script src="libs/highcharts-7.0.1/modules/map.js"></script>
<script src="libs/highcharts-7.0.1/modules/annotations.js"></script>
<script src="libs/highcharts-7.0.1/modules/boost.js"></script>
<script src="libs/highcharts-7.0.1/modules/data.js"></script>
<script src="libs/highcharts-7.0.1/modules/drag-panes.js"></script>
<script src="libs/highcharts-7.0.1/modules/drilldown.js"></script>
<script src="libs/highcharts-7.0.1/modules/item-series.js"></script>
<script src="libs/highcharts-7.0.1/modules/offline-exporting.js"></script>
<script src="libs/highcharts-7.0.1/modules/overlapping-datalabels.js"></script>
<script src="libs/highcharts-7.0.1/modules/exporting.js"></script>
<script src="libs/highcharts-7.0.1/modules/export-data.js"></script>
<script src="libs/highcharts-7.0.1/modules/funnel.js"></script>
<script src="libs/highcharts-7.0.1/modules/heatmap.js"></script>
<script src="libs/highcharts-7.0.1/modules/treemap.js"></script>
<script src="libs/highcharts-7.0.1/modules/sankey.js"></script>
<script src="libs/highcharts-7.0.1/modules/solid-gauge.js"></script>
<script src="libs/highcharts-7.0.1/modules/streamgraph.js"></script>
<script src="libs/highcharts-7.0.1/modules/sunburst.js"></script>
<script src="libs/highcharts-7.0.1/modules/vector.js"></script>
<script src="libs/highcharts-7.0.1/modules/wordcloud.js"></script>
<script src="libs/highcharts-7.0.1/modules/xrange.js"></script>
<script src="libs/highcharts-7.0.1/modules/tilemap.js"></script>
<script src="libs/highcharts-7.0.1/modules/venn.js"></script>
<script src="libs/highcharts-7.0.1/modules/gantt.js"></script>
<script src="libs/highcharts-7.0.1/modules/timeline.js"></script>
<script src="libs/highcharts-7.0.1/modules/parallel-coordinates.js"></script>
<script src="libs/highcharts-7.0.1/plugins/grouped-categories.js"></script>
<script src="libs/highcharts-7.0.1/plugins/motion.js"></script>
<script src="libs/highcharts-7.0.1/plugins/multicolor_series.js"></script>
<script src="libs/highcharts-7.0.1/custom/reset.js"></script>
<script src="libs/highcharts-7.0.1/custom/symbols-extra.js"></script>
<script src="libs/highcharts-7.0.1/custom/text-symbols.js"></script>
<script src="libs/highchart-binding-0.7.0/highchart.js"></script>
<script src="libs/sigma-1.2.1/sigma.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.layout.forceAtlas2.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.layout.noverlap.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.renderers.parallelEdges.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.plugins.animate.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.renderers.customShapes.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.plugins.dragNodes.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.renderers.customEdgeShapes.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.plugins.relativeSize.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.renderers.edgeLabels.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.parsers.gexf.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.exporters.svg.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.plugins.neighborhoods.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.plugins.filter.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.renderers.snapshot.min.js"></script>
<script src="libs/sigmajs-binding-0.1.3/sigmajs.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.12/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/book.css" type="text/css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class='before'><a href="./">Data Processing & Visualization</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i>Intro</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#outline"><i class="fa fa-check"></i>Outline</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#part-1-data-processing"><i class="fa fa-check"></i>Part 1: Data Processing</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#part-2-programming-basics"><i class="fa fa-check"></i>Part 2: Programming Basics</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#part-3-modeling"><i class="fa fa-check"></i>Part 3: Modeling</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#part-4-visualization"><i class="fa fa-check"></i>Part 4: Visualization</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#part-5-presentation"><i class="fa fa-check"></i>Part 5: Presentation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#preparation"><i class="fa fa-check"></i>Preparation</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#other"><i class="fa fa-check"></i>Other</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#python"><i class="fa fa-check"></i>Python</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i>R</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Part I: Information Processing</b></span></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html"><i class="fa fa-check"></i>Data Structures</a><ul>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#vectors"><i class="fa fa-check"></i>Vectors</a><ul>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#character-strings"><i class="fa fa-check"></i>Character strings</a></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#factors"><i class="fa fa-check"></i>Factors</a></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#logicals"><i class="fa fa-check"></i>Logicals</a></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#numeric-and-integer"><i class="fa fa-check"></i>Numeric and integer</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#matrices"><i class="fa fa-check"></i>Matrices</a><ul>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#creating-a-matrix"><i class="fa fa-check"></i>Creating a matrix</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#lists"><i class="fa fa-check"></i>Lists</a></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#data-frames"><i class="fa fa-check"></i>Data Frames</a><ul>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#creating-a-data-frame"><i class="fa fa-check"></i>Creating a data frame</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#data-structure-exercises"><i class="fa fa-check"></i>Data Structure Exercises</a><ul>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#excercise-1"><i class="fa fa-check"></i>Excercise #1</a></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#exercise-2"><i class="fa fa-check"></i>Exercise #2</a></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#thinking-exercises"><i class="fa fa-check"></i>Thinking Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html"><i class="fa fa-check"></i>Input/Output</a><ul>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#other-approaches"><i class="fa fa-check"></i>Other approaches</a></li>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#faster-approaches"><i class="fa fa-check"></i>Faster approaches</a></li>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#other-data"><i class="fa fa-check"></i>Other Data</a></li>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#on-the-horizon"><i class="fa fa-check"></i>On the horizon</a></li>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#big-data"><i class="fa fa-check"></i>Big Data</a></li>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#io-exercises"><i class="fa fa-check"></i>I/O Exercises</a><ul>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#exercise-1"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#thinking-exercises-1"><i class="fa fa-check"></i>Thinking Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="indexing.html"><a href="indexing.html"><i class="fa fa-check"></i>Indexing</a><ul>
<li class="chapter" data-level="" data-path="indexing.html"><a href="indexing.html#base-r-indexing-refresher"><i class="fa fa-check"></i>Base R Indexing Refresher</a></li>
<li class="chapter" data-level="" data-path="indexing.html"><a href="indexing.html#listdata.frame-extraction"><i class="fa fa-check"></i>List/Data.frame extraction</a></li>
<li class="chapter" data-level="" data-path="indexing.html"><a href="indexing.html#indexing-exercises"><i class="fa fa-check"></i>Indexing Exercises</a><ul>
<li class="chapter" data-level="" data-path="indexing.html"><a href="indexing.html#exercise-1-1"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="indexing.html"><a href="indexing.html#exercise-2-1"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="indexing.html"><a href="indexing.html#exercise-3"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="pipes.html"><a href="pipes.html"><i class="fa fa-check"></i>Pipes</a><ul>
<li class="chapter" data-level="" data-path="pipes.html"><a href="pipes.html#using-variables-as-they-are-created"><i class="fa fa-check"></i>Using variables as they are created</a></li>
<li class="chapter" data-level="" data-path="pipes.html"><a href="pipes.html#pipes-for-visualization-more-later"><i class="fa fa-check"></i>Pipes for Visualization (more later)</a></li>
<li class="chapter" data-level="" data-path="pipes.html"><a href="pipes.html#the-dot"><i class="fa fa-check"></i>The dot</a></li>
<li class="chapter" data-level="" data-path="pipes.html"><a href="pipes.html#flexibility"><i class="fa fa-check"></i>Flexibility</a></li>
<li class="chapter" data-level="" data-path="pipes.html"><a href="pipes.html#summary"><i class="fa fa-check"></i>Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i>Tidyverse</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#what-is-the-tidyverse"><i class="fa fa-check"></i>What is the tidyverse?</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#what-is-tidy"><i class="fa fa-check"></i>What is tidy?</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#dplyr"><i class="fa fa-check"></i>dplyr</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#an-example"><i class="fa fa-check"></i>An example</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#running-example"><i class="fa fa-check"></i>Running example</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#selecting-columns"><i class="fa fa-check"></i>Selecting Columns</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#helper-functions"><i class="fa fa-check"></i>Helper functions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#filtering-rows"><i class="fa fa-check"></i>Filtering Rows</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#generating-new-data"><i class="fa fa-check"></i>Generating New Data</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#grouping-and-summarizing-data"><i class="fa fa-check"></i>Grouping and Summarizing Data</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#renaming-columns"><i class="fa fa-check"></i>Renaming columns</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#merging-data"><i class="fa fa-check"></i>Merging Data</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#tidyr"><i class="fa fa-check"></i>tidyr</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#more-tidyverse"><i class="fa fa-check"></i>More Tidyverse</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#personal-opinion"><i class="fa fa-check"></i>Personal Opinion</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse-exercises"><i class="fa fa-check"></i>tidyverse Exercises</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#exercise-0"><i class="fa fa-check"></i>Exercise 0</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#exercise-1-2"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#exercise-2-2"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#exercise-3-1"><i class="fa fa-check"></i>Exercise 3</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#exercise-4"><i class="fa fa-check"></i>Exercise 4</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html"><i class="fa fa-check"></i>data.table</a><ul>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#basics"><i class="fa fa-check"></i>Basics</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#grouped-operations"><i class="fa fa-check"></i>Grouped operations</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#faster"><i class="fa fa-check"></i>Faster!</a><ul>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#joins"><i class="fa fa-check"></i>Joins</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#group-by"><i class="fa fa-check"></i>Group by</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#string-matching"><i class="fa fa-check"></i>String matching</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#reading-files"><i class="fa fa-check"></i>Reading files</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#more-speed"><i class="fa fa-check"></i>More speed</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#pipe-with-data.table"><i class="fa fa-check"></i>Pipe with data.table</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#summary-1"><i class="fa fa-check"></i>Summary</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#faster-dplyr-alternatives"><i class="fa fa-check"></i>Faster dplyr alternatives</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#data.table-exercises"><i class="fa fa-check"></i>data.table Exercises</a><ul>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#exercise-0-1"><i class="fa fa-check"></i>Exercise 0</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#exercise-1-3"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#exercise-2-3"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Part II: Programming</b></span></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i>Basics</a><ul>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#r-objects"><i class="fa fa-check"></i>R Objects</a><ul>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#object-inspection-exploration"><i class="fa fa-check"></i>Object Inspection &amp; Exploration</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#methods"><i class="fa fa-check"></i>Methods</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#s4-classes"><i class="fa fa-check"></i>S4 classes</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#others"><i class="fa fa-check"></i>Others</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#inspecting-functions"><i class="fa fa-check"></i>Inspecting Functions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#help-files"><i class="fa fa-check"></i>Help Files</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#objects-exercises"><i class="fa fa-check"></i>Objects Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html"><i class="fa fa-check"></i>Iterative Programming</a><ul>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#for-loops"><i class="fa fa-check"></i>For loops</a><ul>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#a-slight-speed-gain"><i class="fa fa-check"></i>A slight speed gain</a></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#while-alternative"><i class="fa fa-check"></i>While alternative</a></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#loops-summary"><i class="fa fa-check"></i>Loops summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#implicit-loops"><i class="fa fa-check"></i>Implicit Loops</a><ul>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#apply-family"><i class="fa fa-check"></i>apply family</a></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#apply-functions"><i class="fa fa-check"></i>Apply functions</a></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#purrr"><i class="fa fa-check"></i>purrr</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#looping-with-lists"><i class="fa fa-check"></i>Looping with lists</a></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#iterative-programming-exercises"><i class="fa fa-check"></i>Iterative Programming Exercises</a><ul>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#exercise-1-4"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#exercise-2-4"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#exercise-3-2"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i>Writing Functions</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#a-starting-point"><i class="fa fa-check"></i>A starting point</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#dry"><i class="fa fa-check"></i>DRY</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#conditionals"><i class="fa fa-check"></i>Conditionals</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#anonymous-functions"><i class="fa fa-check"></i>Anonymous functions</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#writing-functions-exercises"><i class="fa fa-check"></i>Writing Functions Exercises</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#excercise-1-1"><i class="fa fa-check"></i>Excercise 1</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#excercise-1b"><i class="fa fa-check"></i>Excercise 1b</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-2-5"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html"><i class="fa fa-check"></i>More</a><ul>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#code-style"><i class="fa fa-check"></i>Code Style</a><ul>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#why-does-your-code-exist"><i class="fa fa-check"></i>Why does your code exist?</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#assignment"><i class="fa fa-check"></i>Assignment</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#code-length"><i class="fa fa-check"></i>Code length</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#spacing"><i class="fa fa-check"></i>Spacing</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#naming-things"><i class="fa fa-check"></i>Naming things</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#other-1"><i class="fa fa-check"></i>Other</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#vectorization"><i class="fa fa-check"></i>Vectorization</a><ul>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#boolean-indexing"><i class="fa fa-check"></i>Boolean Indexing</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#vectorized-operations"><i class="fa fa-check"></i>Vectorized operations</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#regular-expressions"><i class="fa fa-check"></i>Regular Expressions</a><ul>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#typical-uses"><i class="fa fa-check"></i>Typical Uses</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#code-style-exercises"><i class="fa fa-check"></i>Code Style Exercises</a><ul>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#exercise-1-5"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#exercise-2-6"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#vectorization-exercises"><i class="fa fa-check"></i>Vectorization Exercises</a><ul>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#exercise-1-6"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#exercise-2-7"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#regex-exercises"><i class="fa fa-check"></i>Regex Exercises</a><ul>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#exercise-1-7"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Part III: Modeling</b></span></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html"><i class="fa fa-check"></i>Model Exploration</a><ul>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#model-taxonomy"><i class="fa fa-check"></i>Model Taxonomy</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#linear-models"><i class="fa fa-check"></i>Linear models</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#estimation"><i class="fa fa-check"></i>Estimation</a><ul>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#loss"><i class="fa fa-check"></i>Loss</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#optimization"><i class="fa fa-check"></i>Optimization</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#fitting-models"><i class="fa fa-check"></i>Fitting Models</a><ul>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#using-matrices"><i class="fa fa-check"></i>Using matrices</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#summarizing-models"><i class="fa fa-check"></i>Summarizing Models</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#variable-transformations"><i class="fa fa-check"></i>Variable Transformations</a><ul>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#numeric-variables"><i class="fa fa-check"></i>Numeric variables</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#categorical-variables"><i class="fa fa-check"></i>Categorical variables</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#scales-indices-and-dimension-reduction"><i class="fa fa-check"></i>Scales, indices, and dimension reduction</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#dont-discretize"><i class="fa fa-check"></i>Don’t discretize</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#variable-importance"><i class="fa fa-check"></i>Variable Importance</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#extracting-output"><i class="fa fa-check"></i>Extracting Output</a><ul>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#package-support"><i class="fa fa-check"></i>Package support</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#visualization"><i class="fa fa-check"></i>Visualization</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#extensions-to-the-standard-linear-model"><i class="fa fa-check"></i>Extensions to the Standard Linear Model</a><ul>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#different-types-of-targets"><i class="fa fa-check"></i>Different types of targets</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#correlated-data"><i class="fa fa-check"></i>Correlated data</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#other-extensions"><i class="fa fa-check"></i>Other extensions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#model-exploration-summary"><i class="fa fa-check"></i>Model Exploration Summary</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html"><i class="fa fa-check"></i>Model Criticism</a><ul>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#model-fit"><i class="fa fa-check"></i>Model Fit</a><ul>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#standard-linear-model"><i class="fa fa-check"></i>Standard linear model</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#beyond-ols"><i class="fa fa-check"></i>Beyond OLS</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#classification"><i class="fa fa-check"></i>Classification</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#model-assumptions"><i class="fa fa-check"></i>Model Assumptions</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#predictive-performance"><i class="fa fa-check"></i>Predictive Performance</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#model-comparison"><i class="fa fa-check"></i>Model Comparison</a><ul>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#example-additional-covariates"><i class="fa fa-check"></i>Example: Additional covariates</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#example-interactions"><i class="fa fa-check"></i>Example: Interactions</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#example-additive-models"><i class="fa fa-check"></i>Example: Additive Models</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#model-averaging"><i class="fa fa-check"></i>Model Averaging</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#model-criticism-summary"><i class="fa fa-check"></i>Model Criticism Summary</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#exercises-1"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html"><i class="fa fa-check"></i>Machine Learning</a><ul>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#concepts"><i class="fa fa-check"></i>Concepts</a><ul>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#loss-1"><i class="fa fa-check"></i>Loss</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#bias-variance-tradeoff"><i class="fa fa-check"></i>Bias-variance Tradeoff</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#regularization"><i class="fa fa-check"></i>Regularization</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#cross-validation"><i class="fa fa-check"></i>Cross-validation</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#optimization-1"><i class="fa fa-check"></i>Optimization</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#tuning-parameters"><i class="fa fa-check"></i>Tuning parameters</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#techniques"><i class="fa fa-check"></i>Techniques</a><ul>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#regularized-regression"><i class="fa fa-check"></i>Regularized regression</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#random-forests"><i class="fa fa-check"></i>Random Forests</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#neural-networks"><i class="fa fa-check"></i>Neural Networks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#interpreting-the-black-box"><i class="fa fa-check"></i>Interpreting the black box</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#machine-learning-summary"><i class="fa fa-check"></i>Machine Learning Summary</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#exercises-2"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="part"><span><b>Part IV: Visualization</b></span></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i>ggplot2</a><ul>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#layers"><i class="fa fa-check"></i>Layers</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#piping"><i class="fa fa-check"></i>Piping</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#aesthetics"><i class="fa fa-check"></i>Aesthetics</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#geoms"><i class="fa fa-check"></i>Geoms</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#examples"><i class="fa fa-check"></i>Examples</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#stats"><i class="fa fa-check"></i>Stats</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#scales"><i class="fa fa-check"></i>Scales</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#facets"><i class="fa fa-check"></i>Facets</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#multiple-plots"><i class="fa fa-check"></i>Multiple plots</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#fine-control"><i class="fa fa-check"></i>Fine control</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#themes"><i class="fa fa-check"></i>Themes</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#extensions"><i class="fa fa-check"></i>Extensions</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#python-1"><i class="fa fa-check"></i>Python</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#summary-ggplot2"><i class="fa fa-check"></i>Summary ggplot2</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-exercises"><i class="fa fa-check"></i>ggplot2 Exercises</a><ul>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#exercise-0-2"><i class="fa fa-check"></i>Exercise 0</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#exercise-1-8"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#exercise-2-8"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html"><i class="fa fa-check"></i>Interactive Visualization</a><ul>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#packages"><i class="fa fa-check"></i>Packages</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#piping-for-visualization"><i class="fa fa-check"></i>Piping for Visualization</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#htmlwidgets"><i class="fa fa-check"></i>htmlwidgets</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#plotly"><i class="fa fa-check"></i>Plotly</a><ul>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#modes"><i class="fa fa-check"></i>Modes</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#ggplotly"><i class="fa fa-check"></i>ggplotly</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#highcharter"><i class="fa fa-check"></i>Highcharter</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#graph-networks"><i class="fa fa-check"></i>Graph networks</a><ul>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#visnetwork"><i class="fa fa-check"></i>visNetwork</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#sigmajs"><i class="fa fa-check"></i>sigmajs</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#plotly-1"><i class="fa fa-check"></i>Plotly</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#leaflet"><i class="fa fa-check"></i>leaflet</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#dt"><i class="fa fa-check"></i>DT</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#shiny"><i class="fa fa-check"></i>Shiny</a><ul>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#dash"><i class="fa fa-check"></i>Dash</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#interactive-and-visual-data-exploration"><i class="fa fa-check"></i>Interactive and Visual Data Exploration</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#interactive-visualization-exercises"><i class="fa fa-check"></i>Interactive Visualization Exercises</a><ul>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#exercise-0-3"><i class="fa fa-check"></i>Exercise 0</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#exercise-1-9"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#exercise-2-9"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#exercise-3-3"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html"><i class="fa fa-check"></i>Thinking Visually</a><ul>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#information"><i class="fa fa-check"></i>Information</a><ul>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#your-audience-isnt-dumb"><i class="fa fa-check"></i>Your audience isn’t dumb</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#clarity-is-key"><i class="fa fa-check"></i>Clarity is key</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#avoid-clutter"><i class="fa fa-check"></i>Avoid clutter</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#color-isnt-optional"><i class="fa fa-check"></i>Color isn’t optional</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#think-interactively"><i class="fa fa-check"></i>Think interactively</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#color"><i class="fa fa-check"></i>Color</a><ul>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#viridis"><i class="fa fa-check"></i>Viridis</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#scientific-colors"><i class="fa fa-check"></i>Scientific colors</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#rcolorbrewer"><i class="fa fa-check"></i>RColorBrewer</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#contrast"><i class="fa fa-check"></i>Contrast</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#scaling-size"><i class="fa fa-check"></i>Scaling Size</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#transparency"><i class="fa fa-check"></i>Transparency</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#accessibility"><i class="fa fa-check"></i>Accessibility</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#file-types"><i class="fa fa-check"></i>File Types</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#summary-2"><i class="fa fa-check"></i>Summary</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#a-casual-list-of-things-to-avoid"><i class="fa fa-check"></i>A casual list of things to avoid</a><ul>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#pie"><i class="fa fa-check"></i>Pie</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#histograms"><i class="fa fa-check"></i>Histograms</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#using-3d-without-adding-any-communicative-value"><i class="fa fa-check"></i>Using 3D without adding any communicative value</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#using-too-many-colors"><i class="fa fa-check"></i>Using too many colors</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#using-valenced-colors-when-data-isnt-applicable"><i class="fa fa-check"></i>Using valenced colors when data isn’t applicable</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#showing-maps-that-just-display-population"><i class="fa fa-check"></i>Showing maps that just display population</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#biplots"><i class="fa fa-check"></i>Biplots</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#thinking-visually-exercises"><i class="fa fa-check"></i>Thinking Visually Exercises</a><ul>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#exercise-1-10"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#exercise-2-10"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#thinking-exercises-2"><i class="fa fa-check"></i>Thinking exercises</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Wrap-up</b></span></li>
<li class="chapter" data-level="" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i>Summary</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li class='after'">
   <a href="https://m-clark.github.io/" aria-label='Author Website Link'>
      <img src="img/mc_logo.png" style="width:25%; padding:0px 0; display:block; margin: 0 auto;" alt="MC logo">
   </a>
</li>
<li class='after'">
   <div style='text-align:center'>
      <a href="https://github.com/m-clark/" aria-label='GitHub Link'>
         <i class="fab fa-github fa-2x" aria-hidden="true"></i>
      </a>
   </div>
</li>
<li class='after'">
   <div style='text-align:center'>
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" aria-label="Creative commons CCBYSA link">
         <i class="fab fa-creative-commons fa-lg"></i> 
         <i class="fab fa-creative-commons-by fa-lg"></i> 
         <i class="fab fa-creative-commons-sa fa-lg"></i>
      </a>
   </div>
</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Processing &amp; Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="model-criticism-1" class="section level1">
<h1>Model Criticism</h1>
<div style="text-align: center;">
<p><i class="fas fa-tools fa-5x" ></i></p>
</div>
<p>It isn’t enough to simply fit a particular model, we must also ask how well it matches the data under study, if it can predict well on new data, where it fails, and more. In the following we will discuss how we can better understand our model and its limitations.</p>
<div id="model-fit" class="section level2">
<h2>Model Fit</h2>
<div id="standard-linear-model" class="section level3">
<h3>Standard linear model</h3>
<p>In the basic regression setting we can think of model fit in terms of a statistical result, or in terms of the match between our model predictions and the observed target values. The former provides an inferential result, but as we will see, is limited. The latter regards a more practical result, and may provide a more nuanced or different conclusion.</p>
<div id="statistical" class="section level4">
<h4>Statistical</h4>
<p>In a standard linear model we can compare a model where there are no covariates to the model we care about, which may have many. This is an almost useless test, but the results are typically reported. Let’s think about it conceptually.</p>
<p><br>
<span class="math display">\[\textrm{Total Variance} = \textrm{Model Explained Variance} + \textrm{Residual Variance}\]</span>
<br></p>
<p>So the variability in our target (TV) can be decomposed into that which we can explain with the predictor variables (MEV), and everything else that is not in our model (RV). If we have nothing in the model, then TV = RV.</p>
<p>Let’s revisit the summary of our model. Note the <em>F-statistic</em>.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="model_criticism.html#cb398-1"></a>happy_model_base_sum</span></code></pre></div>
<pre><code>
Call:
lm(formula = happiness_score ~ democratic_quality + generosity + 
    log_gdp_per_capita, data = happy)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.75376 -0.45585 -0.00307  0.46013  1.69925 

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)        -1.01048    0.31436  -3.214 0.001412 ** 
democratic_quality  0.17037    0.04588   3.714 0.000233 ***
generosity          1.16085    0.19548   5.938 6.18e-09 ***
log_gdp_per_capita  0.69342    0.03335  20.792  &lt; 2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.6283 on 407 degrees of freedom
  (1293 observations deleted due to missingness)
Multiple R-squared:  0.6953,    Adjusted R-squared:  0.6931 
F-statistic: 309.6 on 3 and 407 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>The standard F statistic can be calculated as follows, where <span class="math inline">\(p\)</span> is the number of predictors<a href="#fn29" class="footnote-ref" id="fnref29"><sup>29</sup></a>:</p>
<p><span class="math display">\[F = \frac{MV/p}{RV/(N-p-1)}\]</span>
Conceptually it is a ratio of average squared variance to average unexplained variance. We can see this more explicitly as follows, where each predictor’s contribution to the total variance is provided in the <code>Sum Sq</code> column.</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="model_criticism.html#cb400-1"></a><span class="kw">anova</span>(happy_model_base)</span></code></pre></div>
<pre><code>Analysis of Variance Table

Response: happiness_score
                    Df  Sum Sq Mean Sq F value    Pr(&gt;F)    
democratic_quality   1 189.192 189.192 479.300 &lt; 2.2e-16 ***
generosity           1   6.774   6.774  17.162 4.177e-05 ***
log_gdp_per_capita   1 170.649 170.649 432.324 &lt; 2.2e-16 ***
Residuals          407 160.653   0.395                      
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>If we add those together and use our formula above we get:</p>
<p><span class="math display">\[F = \frac{366.62/3}{160.653/407} = 309.6\]</span>
Which is what is reported in the summary of the model. And the p-value is just <code>pf(309.6, 3, 407, lower = FALSE)</code>, whose values can be extracted from the summary object.</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="model_criticism.html#cb402-1"></a>happy_model_base_sum<span class="op">$</span>fstatistic</span></code></pre></div>
<pre><code>   value    numdf    dendf 
309.5954   3.0000 407.0000 </code></pre>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="model_criticism.html#cb404-1"></a><span class="kw">pf</span>(<span class="fl">309.6</span>, <span class="dv">3</span>, <span class="dv">407</span>, <span class="dt">lower.tail =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>[1] 1.239283e-104</code></pre>
<p>Because the F-value is so large and p-value so small, the printed result doesn’t give us the actual p-value. So let’s demonstrate again with a worse model.</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="model_criticism.html#cb406-1"></a>f_test =<span class="st"> </span><span class="kw">lm</span>(happiness_score <span class="op">~</span><span class="st"> </span>generosity, happy)</span>
<span id="cb406-2"><a href="model_criticism.html#cb406-2"></a></span>
<span id="cb406-3"><a href="model_criticism.html#cb406-3"></a><span class="kw">summary</span>(f_test)</span></code></pre></div>
<pre><code>
Call:
lm(formula = happiness_score ~ generosity, data = happy)

Residuals:
     Min       1Q   Median       3Q      Max 
-2.81037 -0.89930  0.00716  0.84924  2.33153 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  5.41905    0.04852 111.692  &lt; 2e-16 ***
generosity   0.89936    0.30351   2.963  0.00318 ** 
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.122 on 533 degrees of freedom
  (1169 observations deleted due to missingness)
Multiple R-squared:  0.01621,   Adjusted R-squared:  0.01436 
F-statistic:  8.78 on 1 and 533 DF,  p-value: 0.003181</code></pre>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="model_criticism.html#cb408-1"></a><span class="kw">pf</span>(<span class="fl">8.78</span>, <span class="dv">1</span>, <span class="dv">533</span>, <span class="dt">lower.tail =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>[1] 0.003181551</code></pre>
<p>We can make this F-test more explicit by actually fitting a null model and making the comparison. The following will provide the same result as before. We make sure to use the same data as in the original model, since there are missing values for some covariates.</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="model_criticism.html#cb410-1"></a>happy_model_null =<span class="st"> </span><span class="kw">lm</span>(happiness_score <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">data =</span> <span class="kw">model.frame</span>(happy_model_base)) </span>
<span id="cb410-2"><a href="model_criticism.html#cb410-2"></a><span class="kw">anova</span>(happy_model_null, happy_model_base)</span></code></pre></div>
<pre><code>Analysis of Variance Table

Model 1: happiness_score ~ 1
Model 2: happiness_score ~ democratic_quality + generosity + log_gdp_per_capita
  Res.Df    RSS Df Sum of Sq     F    Pr(&gt;F)    
1    410 527.27                                 
2    407 160.65  3    366.62 309.6 &lt; 2.2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>In this case our F statistic generalizes to the following, where <span class="math inline">\(\textrm{Model}_1\)</span> is the simpler model and <span class="math inline">\(p\)</span> now refers to the total number of parameters estimated (i.e. same as before + 1 for the intercept)</p>
<p><span class="math display">\[F = \frac{(\textrm{Model}_2\ RV - \textrm{Model}_1\ RV)/(p_2 - p_1)}{\textrm{Model}_2\ RV/(N-p_2-1)}\]</span></p>
<p>From the previous results, we can perform the necessary arithmetic based on this formula to get the F statistic.</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="model_criticism.html#cb412-1"></a>((<span class="fl">527.27</span> <span class="op">-</span><span class="st"> </span><span class="fl">160.65</span>)<span class="op">/</span><span class="dv">3</span>) <span class="op">/</span><span class="st"> </span>(<span class="fl">160.65</span><span class="op">/</span><span class="dv">407</span>)</span></code></pre></div>
<pre><code>[1] 309.6054</code></pre>
</div>
<div id="r2" class="section level4">
<h4><span class="math inline">\(R^2\)</span></h4>
<p>This statistical result is mostly a straw man type of test- who actually cares if our model does statistically better than a model with nothing in it? Let’s turn instead to a different concept- the amount of variance of the target variable that is explained by our predictors. For the standard linear model setting, this statistic is called <em>R-squared</em> (<span class="math inline">\(R^2\)</span>).</p>
<p>Going back to our previous notions, <span class="math inline">\(R^2\)</span> is just:</p>
<p><span class="math display">\[R^2 =\textrm{Model Explained Variance}/\textrm{Total Variance}\]</span></p>
<p>This too is reported by default in our summary printout.</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="model_criticism.html#cb414-1"></a>happy_model_base_sum</span></code></pre></div>
<pre><code>
Call:
lm(formula = happiness_score ~ democratic_quality + generosity + 
    log_gdp_per_capita, data = happy)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.75376 -0.45585 -0.00307  0.46013  1.69925 

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)        -1.01048    0.31436  -3.214 0.001412 ** 
democratic_quality  0.17037    0.04588   3.714 0.000233 ***
generosity          1.16085    0.19548   5.938 6.18e-09 ***
log_gdp_per_capita  0.69342    0.03335  20.792  &lt; 2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.6283 on 407 degrees of freedom
  (1293 observations deleted due to missingness)
Multiple R-squared:  0.6953,    Adjusted R-squared:  0.6931 
F-statistic: 309.6 on 3 and 407 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>With our values from before for model and total variance, we can calculate it ourselves.</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="model_criticism.html#cb416-1"></a><span class="fl">366.62</span> <span class="op">/</span><span class="st"> </span><span class="fl">527.27</span></span></code></pre></div>
<pre><code>[1] 0.6953174</code></pre>
<p>Here is another way. Let’s get the model predictions, and see how well they correlate with the target.</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="model_criticism.html#cb418-1"></a>predictions =<span class="st"> </span><span class="kw">predict</span>(happy_model_base)</span>
<span id="cb418-2"><a href="model_criticism.html#cb418-2"></a>target =<span class="st"> </span>happy_model_base<span class="op">$</span>model<span class="op">$</span>happiness_score</span>
<span id="cb418-3"><a href="model_criticism.html#cb418-3"></a>rho =<span class="st"> </span><span class="kw">cor</span>(predictions, target)</span>
<span id="cb418-4"><a href="model_criticism.html#cb418-4"></a>rho</span></code></pre></div>
<pre><code>[1] 0.8338528</code></pre>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="model_criticism.html#cb420-1"></a>rho<span class="op">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>[1] 0.6953106</code></pre>
<p>Now you can see why it’s called <span class="math inline">\(R^2\)</span>. It is the squared Pearson <span class="math inline">\(r\)</span> of the model expected value and the observed target variable.</p>
<div id="adjustment" class="section level5">
<h5>Adjustment</h5>
<p>One problem with <span class="math inline">\(R^2\)</span> is that it always goes up, no matter what nonsense you add to a model. This is why we have an <em>adjusted <span class="math inline">\(R^2\)</span></em> that attempts to balance the sample size and model complexity. For very large data and/or simpler models, the difference is negligible. But you should always report the adjusted <span class="math inline">\(R^2\)</span>, as the default <span class="math inline">\(R^2\)</span> is actually upwardly biased and doesn’t account for additional model complexity<a href="#fn30" class="footnote-ref" id="fnref30"><sup>30</sup></a>.</p>
</div>
</div>
</div>
<div id="beyond-ols" class="section level3">
<h3>Beyond OLS</h3>
<p>People love <span class="math inline">\(R^2\)</span>, so much that they will report it wherever they can, even coming up with things like ‘Pseudo-<span class="math inline">\(R^2\)</span>’ when it proves difficult. However, outside of the OLS setting where we assume a normal distribution as the underlying data-generating mechanism, <span class="math inline">\(R^2\)</span> has little application, and so is not very useful. In some sense, for any numeric target variable we can ask how well our predictions correlate with the observed target values, but the notion of ‘variance explained’ doesn’t easily follow us. For example, for other distributions the estimated variance is a function of the mean (e.g. our Poisson example), and so isn’t constant. In other settings we have multiple sources of residual variance, and some sources where it’s not clear whether the variance should be considered as part of the model explained variance or residual variance. For categorical targets it becomes even doesn’t apply</p>
<p>At least for GLM for non-normal distributions, we can work with <em>deviance</em>, which is similar to the residual sum of squares in the OLS setting. We can get a ‘deviance explained’ using the following approach:</p>
<ol style="list-style-type: decimal">
<li>Fit a null model, i.e. intercept only. This gives the total deviance (<code>tot_dev</code>).</li>
<li>Fit the desired model. This provides the model deviance, which will be reduced (<code>model_dev</code>)</li>
<li>Calculate <span class="math inline">\(\frac{\textrm{tot_dev} -\textrm{model_dev}}{\textrm{tot_dev}}\)</span></li>
</ol>
<p>But this value doesn’t really behave in the same manner as <span class="math inline">\(R^2\)</span>. For one, it can actually go down for a more complex model, and there is no standard adjustment, neither of which is the case with <span class="math inline">\(R^2\)</span> for the standard linear model. At most this can serve as an approximation. For more complicated settings you will have to rely on other means to determine model fit.</p>
</div>
<div id="classification" class="section level3">
<h3>Classification</h3>
<div id="accuracy-and-other-metrics" class="section level4">
<h4>Accuracy and other metrics</h4>
</div>
</div>
</div>
<div id="model-assumptions" class="section level2">
<h2>Model Assumptions</h2>
<p>There are quite a few assumptions for the standard linear model that we could talk about, but I’ll focus on just a handful, ordered roughly in terms of the severity of violation.</p>
<ul>
<li>Correct model</li>
<li>Heteroscedasticity</li>
<li>Independence of observations</li>
<li>Normality</li>
</ul>
<p>These concern bias (the first), accurate inference (most of the rest), or other statistical concepts (efficiency, consistency). The issue with most of the assumptions you learn about is that they mostly just apply to the OLS setting. Moreover, you can meet all the assumptions you want and still have a crappy model. Practically speaking, the effects on inference usually aren’t large enough to matter, as most shouldn’t be making any important decision based on a p-value, or slight differences in the boundaries of an interval. Even then, at least for OLS settings, the solutions are often easy, for example, to obtain standard errors, or are mostly overcome by having a large amount of data.</p>
<p>Still, the diagnostic tools can provide clues to model failure. As before, visualization will aid us here.</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="model_criticism.html#cb422-1"></a><span class="kw">library</span>(ggfortify)</span>
<span id="cb422-2"><a href="model_criticism.html#cb422-2"></a></span>
<span id="cb422-3"><a href="model_criticism.html#cb422-3"></a><span class="kw">autoplot</span>(happy_model_base)</span></code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/diag-plot-show-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>The first plot shows the spread of the residuals vs. the model estimated values. By default, the three most extreme observations are noted. In this plot we are looking for a lack of any conspicuous pattern, e.g. a fanning out to one side or butterfly shape. If the variance was dependent on some of the model estimated values, we have a couple options:
- Use a model that does not assume constant variance
- Add complexity to the model to better capture more extreme observations
- Change the assumed distribution</p>
<p>In this case we have it about as good as it gets. The second plot regards the normality of the residuals. If they are normally distributed, they would fall along the dotted line. Again, in practical application this is about as good as you’re going to get.</p>
<p>Another plot we can use is to note the predictions vs. the observed values, and this sort of plot would be appropriate for any model. Here I show this both as a scatterplot and a density plot. With the first, the closer the result is to a line the better, with the latter, we can more adequately see what the model is predicting in relation to the observed values. In this case, while we’re doing well, one limitation of the model is that it does not have as much spread as target, and so is not capturing the more extreme values.</p>
<p><img src="data-processing-and-visualization_files/figure-html/pp_check_base-1.svg" width="1200px" height="400px" style="display: block; margin: auto;" /></p>
<p>Beyond OLS, assumptions may change, are more difficult to check, and guarantees are harder to come by. The primary one- that you have an adequate and sufficiently complex model- still remains the most vital. It is important to note that these assumptions regard inference, not predictive capabilities. In addition, in many modeling scenarios we will actually induce bias to have more predictive capacity. In such settings statistical tests are of less importance, and there often may not even be an obvious test to use. Typically we will still have some means to get the interval estimates for weights or predictions though.</p>
</div>
<div id="predictive-performance" class="section level2">
<h2>Predictive Performance</h2>
<p>While we can gauge predictive performance to some extent with a metric like <span class="math inline">\(R^2\)</span> in the standard linear model case, even then it almost certainly an optimistic viewpoint, and adjusted <span class="math inline">\(R^2\)</span> doesn’t really deal with the underlying issue. What is the problem? The concern is that we are judging model performance on the very data it was fit to. Any potential deviation to the underlying data would certainly result in a different result for <span class="math inline">\(R^2\)</span>, accuracy, or any metric we choose to look at.</p>
<p>So the better estimate of how the model is doing is to observe performance on data it hasn’t seen. This data goes by different names- <em>test set</em>, <em>validation set</em>, <em>holdout sample</em>, etc., but the basic idea is that we use some data that wasn’t used in model fitting to assess performance. We can do this in any data situation by randomly splitting into a data set for training the model, and one used for testing the model’s performance.</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="model_criticism.html#cb423-1"></a><span class="kw">library</span>(tidymodels)</span>
<span id="cb423-2"><a href="model_criticism.html#cb423-2"></a></span>
<span id="cb423-3"><a href="model_criticism.html#cb423-3"></a><span class="kw">set.seed</span>(<span class="dv">1212</span>)</span>
<span id="cb423-4"><a href="model_criticism.html#cb423-4"></a></span>
<span id="cb423-5"><a href="model_criticism.html#cb423-5"></a>happy_split =<span class="st"> </span><span class="kw">initial_split</span>(happy, <span class="dt">prop =</span> <span class="fl">0.75</span>)</span>
<span id="cb423-6"><a href="model_criticism.html#cb423-6"></a></span>
<span id="cb423-7"><a href="model_criticism.html#cb423-7"></a>happy_train =<span class="st"> </span><span class="kw">training</span>(happy_split)</span>
<span id="cb423-8"><a href="model_criticism.html#cb423-8"></a>happy_test  =<span class="st"> </span><span class="kw">testing</span>(happy_split) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">drop_na</span>()</span>
<span id="cb423-9"><a href="model_criticism.html#cb423-9"></a></span>
<span id="cb423-10"><a href="model_criticism.html#cb423-10"></a>happy_model_train =<span class="st"> </span><span class="kw">lm</span>(</span>
<span id="cb423-11"><a href="model_criticism.html#cb423-11"></a>  happiness_score <span class="op">~</span><span class="st"> </span>democratic_quality <span class="op">+</span><span class="st"> </span>generosity <span class="op">+</span><span class="st"> </span>log_gdp_per_capita,</span>
<span id="cb423-12"><a href="model_criticism.html#cb423-12"></a>  <span class="dt">data =</span> happy_train</span>
<span id="cb423-13"><a href="model_criticism.html#cb423-13"></a>)</span>
<span id="cb423-14"><a href="model_criticism.html#cb423-14"></a></span>
<span id="cb423-15"><a href="model_criticism.html#cb423-15"></a>predictions =<span class="st"> </span><span class="kw">predict</span>(happy_model_train, <span class="dt">newdata =</span> happy_test)</span></code></pre></div>
<p>Comparing our loss on training and test (i.e. RMSE), we can see the loss is greater on the test set.</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
RMSE_train
</th>
<th style="text-align:right;">
RMSE_test
</th>
<th style="text-align:left;">
% increase
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0.3140813
</td>
<td style="text-align:right;">
0.566
</td>
<td style="text-align:left;">
80.2
</td>
</tr>
</tbody>
</table>
<p>For a more accurate assessment of test error, we’d need to take an average over several test sets, an approach known as <em>cross-validation</em>, something we’ll talk more about later.</p>
<p>In general, we may do okay in scenarios where the model is simple and uses a lot of data, but even then we may find a notable increase in test error relative to training error. For more complex models and/or with less data, the difference in training vs. test could be quite significant.</p>
</div>
<div id="model-comparison" class="section level2">
<h2>Model Comparison</h2>
<p>Up until now the focus has been entirely on one model. However, if you’re trying to learn something new, you’ll almost always want to have multiple plausible models to explore, rather than just confirming what you think you already know. This can be as simple as starting with a base model and adding complexity to it, but it could also be pitting fundamentally different models against one another.</p>
<p>A notable problem is that complex models should always do better than simple ones. The question then becomes if they are doing notably better given the additional complexity.</p>
<div id="example-additional-covariates" class="section level3">
<h3>Example: Additional covariates</h3>
<p>A starting point for adding model complexity is simply adding more covariates. Let’s add life expectancy and a yearly trend. To make this model comparable to our baseline model, they need to be fit to the same data, and life expectancy has a couple missing values the others do not. So we’ll start with some data processing. I will start by standardizing some of the variables, and making year start at zero, which will represent 2008, and finally dropping missing values. Refer to our previous section on <a href="models.html#numeric-variables">transforming variables</a> if you want to.</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="model_criticism.html#cb424-1"></a>happy_processed =<span class="st"> </span>happy <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb424-2"><a href="model_criticism.html#cb424-2"></a><span class="st">  </span><span class="kw">select</span>(</span>
<span id="cb424-3"><a href="model_criticism.html#cb424-3"></a>    country,</span>
<span id="cb424-4"><a href="model_criticism.html#cb424-4"></a>    year,</span>
<span id="cb424-5"><a href="model_criticism.html#cb424-5"></a>    happiness_score,</span>
<span id="cb424-6"><a href="model_criticism.html#cb424-6"></a>    democratic_quality,</span>
<span id="cb424-7"><a href="model_criticism.html#cb424-7"></a>    generosity,</span>
<span id="cb424-8"><a href="model_criticism.html#cb424-8"></a>    healthy_life_expectancy_at_birth,</span>
<span id="cb424-9"><a href="model_criticism.html#cb424-9"></a>    log_gdp_per_capita</span>
<span id="cb424-10"><a href="model_criticism.html#cb424-10"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb424-11"><a href="model_criticism.html#cb424-11"></a><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(happiness_score<span class="op">:</span>healthy_life_expectancy_at_birth),</span>
<span id="cb424-12"><a href="model_criticism.html#cb424-12"></a>            <span class="cf">function</span>(x) <span class="kw">scale</span>(x)[, <span class="dv">1</span>]) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb424-13"><a href="model_criticism.html#cb424-13"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year =</span> year <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(year)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb424-14"><a href="model_criticism.html#cb424-14"></a><span class="st">  </span><span class="kw">drop_na</span>()</span></code></pre></div>
<p>Now let’s start with our baseline model again.</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="model_criticism.html#cb425-1"></a>happy_model_base =<span class="st"> </span><span class="kw">lm</span>(</span>
<span id="cb425-2"><a href="model_criticism.html#cb425-2"></a>  happiness_score <span class="op">~</span><span class="st"> </span>democratic_quality <span class="op">+</span><span class="st"> </span>generosity <span class="op">+</span><span class="st"> </span>log_gdp_per_capita, </span>
<span id="cb425-3"><a href="model_criticism.html#cb425-3"></a>  <span class="dt">data =</span> happy_processed</span>
<span id="cb425-4"><a href="model_criticism.html#cb425-4"></a>)</span>
<span id="cb425-5"><a href="model_criticism.html#cb425-5"></a></span>
<span id="cb425-6"><a href="model_criticism.html#cb425-6"></a><span class="kw">summary</span>(happy_model_base)</span></code></pre></div>
<pre><code>
Call:
lm(formula = happiness_score ~ democratic_quality + generosity + 
    log_gdp_per_capita, data = happy_processed)

Residuals:
    Min      1Q  Median      3Q     Max 
-1.5511 -0.4048 -0.0050  0.4081  1.5072 

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)        -5.69853    0.27528 -20.701  &lt; 2e-16 ***
democratic_quality  0.13468    0.03582   3.760 0.000195 ***
generosity          0.16880    0.02834   5.955 5.64e-09 ***
log_gdp_per_capita  0.61305    0.02957  20.729  &lt; 2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.557 on 405 degrees of freedom
Multiple R-squared:  0.6952,    Adjusted R-squared:  0.6929 
F-statistic: 307.8 on 3 and 405 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>We can see that moving one standard deviation on democratic quality and generosity leads to similar standard deviation increases in happiness. Moving 10 percentage points in GDP would lead to less than .1 standard deviation increase in happiness.</p>
<p>Now we add our life expectancy and yearly trend.</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="model_criticism.html#cb427-1"></a>happy_model_more =<span class="st"> </span><span class="kw">lm</span>(</span>
<span id="cb427-2"><a href="model_criticism.html#cb427-2"></a>  happiness_score <span class="op">~</span><span class="st"> </span>democratic_quality <span class="op">+</span><span class="st"> </span>generosity <span class="op">+</span><span class="st"> </span>log_gdp_per_capita <span class="op">+</span><span class="st"> </span>healthy_life_expectancy_at_birth <span class="op">+</span><span class="st"> </span>year,</span>
<span id="cb427-3"><a href="model_criticism.html#cb427-3"></a>  <span class="dt">data =</span> happy_processed</span>
<span id="cb427-4"><a href="model_criticism.html#cb427-4"></a>)</span>
<span id="cb427-5"><a href="model_criticism.html#cb427-5"></a></span>
<span id="cb427-6"><a href="model_criticism.html#cb427-6"></a><span class="kw">summary</span>(happy_model_more)</span></code></pre></div>
<pre><code>
Call:
lm(formula = happiness_score ~ democratic_quality + generosity + 
    log_gdp_per_capita + healthy_life_expectancy_at_birth + year, 
    data = happy_processed)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.47155 -0.40812 -0.00935  0.39698  1.39786 

Coefficients:
                                 Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                      -3.59113    0.53106  -6.762 4.79e-11 ***
democratic_quality                0.06677    0.03539   1.887   0.0599 .  
generosity                        0.16470    0.02696   6.109 2.36e-09 ***
log_gdp_per_capita                0.39414    0.04249   9.277  &lt; 2e-16 ***
healthy_life_expectancy_at_birth  0.38691    0.05640   6.860 2.60e-11 ***
year                             -0.01126    0.03196  -0.352   0.7249    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.5283 on 403 degrees of freedom
Multiple R-squared:  0.727, Adjusted R-squared:  0.7237 
F-statistic: 214.7 on 5 and 403 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Here it would seem that life expectancy has a notable effect on happiness (shocker), but the yearly trend, while negative, is not statistically notable. In addition, the democratic effect is no longer significant, as it would seem that it’s contribution was more due to it’s correlation with life expectancy. But the key question is- is this model better?</p>
<p>The adjusted <span class="math inline">\(R^2\)</span> seems to indicate that we are doing slightly better with this model, but not much. We can test if the increase is a statistically notable one. <a href="model_criticism.html#statistical">Recall previously</a> when we compared our model versus a null model to obtain a statistical test of model fit. Since these models are <em>nested</em>, i.e. one is a simpler form of the other, we can use the more general approach we depicted to compare these models. This ANOVA, or analysis of variance test, is essentially comparing whether the residual sum of squares (i.e. the loss) is less for one model vs. the other. In many settings it is often called a <em>likelihood ratio test</em>.</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="model_criticism.html#cb429-1"></a><span class="kw">anova</span>(happy_model_base, happy_model_more)</span></code></pre></div>
<pre><code>Analysis of Variance Table

Model 1: happiness_score ~ democratic_quality + generosity + log_gdp_per_capita
Model 2: happiness_score ~ democratic_quality + generosity + log_gdp_per_capita + 
    healthy_life_expectancy_at_birth + year
  Res.Df    RSS Df Sum of Sq     F    Pr(&gt;F)    
1    405 125.63                                 
2    403 112.49  2    13.141 23.54 2.144e-10 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>The <code>Df</code> from the test denotes that we have two additional parameters, i.e. coefficients, in the more complex model. But the main thing to note is whether the model statistically reduces the RSS. So we see that this is a statistically notable improvement as well.</p>
<p>I actually do not like this test though. It requires nested models, which is either not the case or can be hard to determine, and ignores various aspects of uncertainty in parameter estimates. An approach that works in many settings is to compare AIC. AIC is a value based on the likelihood for a given model, but which adds a penalty for complexity, since otherwise any more complex model would result in a larger likelihood (or in this case, smaller negative likelihood). In the following, <span class="math inline">\(\mathcal{L}\)</span> is the likelihood, and <span class="math inline">\(\mathcal{P}\)</span> is the number of parameters estimated for the model.</p>
<p><span class="math display">\[AIC = -2 ( \ln (\mathcal{L})) + 2 \mathcal{P}\]</span></p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="model_criticism.html#cb431-1"></a><span class="kw">AIC</span>(happy_model_base)</span></code></pre></div>
<pre><code>[1] 687.92</code></pre>
<p>The value itself is meaningless until we compare models, in which case the lower value is the better model. With AIC, we don’t have to have nested models, so that’s a plus over the statistical test.</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="model_criticism.html#cb433-1"></a><span class="kw">AIC</span>(happy_model_base, happy_model_more)</span></code></pre></div>
<pre><code>                 df      AIC
happy_model_base  5 687.9200
happy_model_more  7 646.7308</code></pre>
<p>Again, our new model works better. However, this still may miss out on some uncertainty in the models. To try and capture this, I will calculate interval estimates for the adjusted <span class="math inline">\(R^2\)</span> via <em>bootstrapping</em>, and then calculate an interval for their difference. The details are beyond what I want to delve into here, but the gist is we just want a confidence interval for the difference in adjusted <span class="math inline">\(R^2\)</span>.</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
model
</th>
<th style="text-align:right;">
r2
</th>
<th style="text-align:right;">
2.5%
</th>
<th style="text-align:right;">
97.5%
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
base
</td>
<td style="text-align:right;">
0.693
</td>
<td style="text-align:right;">
0.646
</td>
<td style="text-align:right;">
0.739
</td>
</tr>
<tr>
<td style="text-align:left;">
more
</td>
<td style="text-align:right;">
0.724
</td>
<td style="text-align:right;">
0.686
</td>
<td style="text-align:right;">
0.767
</td>
</tr>
</tbody>
</table>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
2.5%
</th>
<th style="text-align:right;">
97.5%
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Difference in <span class="math inline">\(R^2\)</span>
</td>
<td style="text-align:right;">
-0.015
</td>
<td style="text-align:right;">
0.078
</td>
</tr>
</tbody>
</table>
</div>
<div id="example-interactions" class="section level3">
<h3>Example: Interactions</h3>
<p>Let’s start by adding interactions to our model. Interactions allow the relationship of a predictor variable and target to vary depending on the values of another covariate. To keep things simple, we’ll add a single interaction to start- I will interact democratic quality with life expectancy.</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="model_criticism.html#cb435-1"></a>happy_model_interact =<span class="st"> </span><span class="kw">lm</span>(</span>
<span id="cb435-2"><a href="model_criticism.html#cb435-2"></a>  happiness_score <span class="op">~</span><span class="st"> </span>democratic_quality <span class="op">+</span><span class="st"> </span>generosity <span class="op">+</span><span class="st"> </span>log_gdp_per_capita <span class="op">+</span><span class="st"> </span></span>
<span id="cb435-3"><a href="model_criticism.html#cb435-3"></a><span class="st">    </span>healthy_life_expectancy_at_birth <span class="op">+</span></span>
<span id="cb435-4"><a href="model_criticism.html#cb435-4"></a><span class="st">    </span>democratic_quality<span class="op">:</span>healthy_life_expectancy_at_birth,</span>
<span id="cb435-5"><a href="model_criticism.html#cb435-5"></a>  <span class="dt">data =</span> happy_processed</span>
<span id="cb435-6"><a href="model_criticism.html#cb435-6"></a>  )</span>
<span id="cb435-7"><a href="model_criticism.html#cb435-7"></a></span>
<span id="cb435-8"><a href="model_criticism.html#cb435-8"></a><span class="kw">summary</span>(happy_model_interact)</span></code></pre></div>
<pre><code>
Call:
lm(formula = happiness_score ~ democratic_quality + generosity + 
    log_gdp_per_capita + healthy_life_expectancy_at_birth + democratic_quality:healthy_life_expectancy_at_birth, 
    data = happy_processed)

Residuals:
    Min      1Q  Median      3Q     Max 
-1.3582 -0.3798  0.0026  0.3399  1.4576 

Coefficients:
                                                    Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                                         -3.66368    0.38343  -9.555  &lt; 2e-16 ***
democratic_quality                                   0.02769    0.03639   0.761 0.447257    
generosity                                           0.14157    0.02723   5.199 3.20e-07 ***
log_gdp_per_capita                                   0.38090    0.04195   9.081  &lt; 2e-16 ***
healthy_life_expectancy_at_birth                     0.41679    0.05606   7.435 6.35e-13 ***
democratic_quality:healthy_life_expectancy_at_birth  0.11840    0.03212   3.687 0.000258 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.5197 on 403 degrees of freedom
Multiple R-squared:  0.7359,    Adjusted R-squared:  0.7326 
F-statistic: 224.5 on 5 and 403 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>The coefficient interpretation for variables in the interaction change. They now only describe the effect when the variable they interact with is zero (or the reference group if it’s categorical). So democratic quality has a slight positive but not statistically notable effect at the mean of life expectancy. However, this effect increases by 0.12 when life expectancy increases by 1 (i.e. 1 standard deviation). The same interpretation goes for life expectancy. It’s coefficient is when democratic quality is at it’s mean, and the interaction term is interpreted identically.</p>
<p>It seems most people (including journal reviewers) seem to have trouble understanding interactions if you just report them in a table. Furthermore, beyond the standard linear model with non-normal distributions, the coefficient for the interaction term doesn’t even have the same meaning. But you know what works in every setting? Visualization!</p>
<p>Let’s use ggeffects again. We’ll plot the effect of democratic quality at the mean of life expectancy, and at one standard deviation below and above. Since we already standardized it, this is even easier.</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="model_criticism.html#cb437-1"></a><span class="kw">library</span>(ggeffects)</span>
<span id="cb437-2"><a href="model_criticism.html#cb437-2"></a></span>
<span id="cb437-3"><a href="model_criticism.html#cb437-3"></a><span class="kw">plot</span>(</span>
<span id="cb437-4"><a href="model_criticism.html#cb437-4"></a>  <span class="kw">ggpredict</span>(</span>
<span id="cb437-5"><a href="model_criticism.html#cb437-5"></a>    happy_model_interact,</span>
<span id="cb437-6"><a href="model_criticism.html#cb437-6"></a>    <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">&#39;democratic_quality&#39;</span>, <span class="st">&#39;healthy_life_expectancy_at_birth[-1, 0, 1]&#39;</span>)</span>
<span id="cb437-7"><a href="model_criticism.html#cb437-7"></a>  )</span>
<span id="cb437-8"><a href="model_criticism.html#cb437-8"></a>)</span></code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/vis-interact-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>We seem to have discovered something interesting here! Democratic quality only has a positive effect for those countries with a high life expectancy, i.e. that are already in a good place in general. It may even be negative in countries in the contrary case. While this has to be taken with a lot of caution, it shows how exploring interactions can be fun and surprising!</p>
<p>Another way to plot interactions in which the variables are continuous is with a contour plot similar to this. Here we don’t have to pick arbitrary values to plot against, just note the predictions at all values of the covariates in question.</p>
<p><img src="img/interaction_2d.png" width="75%" style="display: block; margin: auto;" /></p>
<p>We see the the lowest expected happiness based on the model is with high democratic quality and low life expectancy. The best case scenario is to be high on both.</p>
<p>Here is our model comparison for all three models with AIC.</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="model_criticism.html#cb438-1"></a><span class="kw">AIC</span>(happy_model_base, happy_model_more, happy_model_interact)</span></code></pre></div>
<pre><code>                     df      AIC
happy_model_base      5 687.9200
happy_model_more      7 646.7308
happy_model_interact  7 633.2910</code></pre>
<p>Looks like our interaction model is winning.</p>
</div>
<div id="example-additive-models" class="section level3">
<h3>Example: Additive Models</h3>
<p><em>Generalized additive models</em> allow our predictors to have a <em>wiggly</em> relationship with the target variable. For more information, see <a href="https://m-clark.github.io/generalized-additive-models/">this document</a>, but for our purposes, that’s all you really need to know. We will use the base R mgcv package because it is awesome and you don’t need to install anything. In this case, we’ll allow all the covariates to have a nonlinear relationship, and we denote this with the <code>s()</code> syntax.</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="model_criticism.html#cb440-1"></a><span class="kw">library</span>(mgcv)</span>
<span id="cb440-2"><a href="model_criticism.html#cb440-2"></a></span>
<span id="cb440-3"><a href="model_criticism.html#cb440-3"></a>happy_model_gam =<span class="st"> </span><span class="kw">gam</span>(</span>
<span id="cb440-4"><a href="model_criticism.html#cb440-4"></a>  happiness_score <span class="op">~</span><span class="st"> </span><span class="kw">s</span>(democratic_quality) <span class="op">+</span><span class="st"> </span><span class="kw">s</span>(generosity) <span class="op">+</span><span class="st"> </span><span class="kw">s</span>(log_gdp_per_capita) <span class="op">+</span><span class="st"> </span></span>
<span id="cb440-5"><a href="model_criticism.html#cb440-5"></a><span class="st">    </span><span class="kw">s</span>(healthy_life_expectancy_at_birth),</span>
<span id="cb440-6"><a href="model_criticism.html#cb440-6"></a>  <span class="dt">data =</span> happy_processed</span>
<span id="cb440-7"><a href="model_criticism.html#cb440-7"></a>)</span>
<span id="cb440-8"><a href="model_criticism.html#cb440-8"></a></span>
<span id="cb440-9"><a href="model_criticism.html#cb440-9"></a><span class="kw">summary</span>(happy_model_gam)</span></code></pre></div>
<pre><code>
Family: gaussian 
Link function: identity 

Formula:
happiness_score ~ s(democratic_quality) + s(generosity) + s(log_gdp_per_capita) + 
    s(healthy_life_expectancy_at_birth)

Parametric coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)
(Intercept) 0.006855   0.021026   0.326    0.745

Approximate significance of smooth terms:
                                      edf Ref.df      F  p-value    
s(democratic_quality)               8.291  8.866  4.259 6.67e-05 ***
s(generosity)                       5.797  6.974  3.841 0.000446 ***
s(log_gdp_per_capita)               8.851  8.991 16.703  &lt; 2e-16 ***
s(healthy_life_expectancy_at_birth) 8.850  8.991 16.375  &lt; 2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

R-sq.(adj) =  0.821   Deviance explained = 83.5%
GCV = 0.19657  Scale est. = 0.18081   n = 409</code></pre>
<p>The first thing you may notice is that there are no regression coefficients. This is because the effect of any of these predictors depends on their value, so trying to assess it by a single value would be problematic at best. You can guess what will help us interpret this…</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="model_criticism.html#cb442-1"></a><span class="kw">library</span>(mgcViz)</span>
<span id="cb442-2"><a href="model_criticism.html#cb442-2"></a></span>
<span id="cb442-3"><a href="model_criticism.html#cb442-3"></a><span class="kw">plot.gamViz</span>(happy_model_gam, <span class="dt">allTerms =</span> T)</span></code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/happy-gam-vis-show-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>Here is a brief summary of interpretation. We generally don’t have to worry about small wiggles.</p>
<ul>
<li><code>democratic_quality</code>: Effect is most notable (positive and strong) for higher values. Negligible otherwise.</li>
<li><code>generosity</code>: Effect seems seems strongly positive, but only for lower values of generosity.</li>
<li><code>life_expectancy</code>: Effect is positive, but only if the country is around the mean or higher.</li>
<li><code>log GDP per capita</code>: Effect is mostly positive, but may depend on other factors not included in the model.</li>
</ul>
<p>In terms of general model fit, the <code>Scale est.</code> is the same as the residual standard error (squared) in the other models, and is a notably lower than even the model with the interaction (0.1808108 vs. 0.2701063). We can also see that the adjusted <span class="math inline">\(R^2\)</span> is higher as well (0.8209931 vs. 0.7325884.</p>
<p>Let’s check our AIC now to see which model wins. It’s pretty clear our wiggly model is the winner, even with the added complexity. Note that even though we used a different function for the GAM model, the AIC is still comparable.</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="model_criticism.html#cb443-1"></a><span class="kw">AIC</span>(</span>
<span id="cb443-2"><a href="model_criticism.html#cb443-2"></a>  happy_model_base,</span>
<span id="cb443-3"><a href="model_criticism.html#cb443-3"></a>  happy_model_more,</span>
<span id="cb443-4"><a href="model_criticism.html#cb443-4"></a>  happy_model_interact,</span>
<span id="cb443-5"><a href="model_criticism.html#cb443-5"></a>  happy_model_gam</span>
<span id="cb443-6"><a href="model_criticism.html#cb443-6"></a>)</span></code></pre></div>
<pre><code>                           df      AIC
happy_model_base      5.00000 687.9200
happy_model_more      7.00000 646.7308
happy_model_interact  7.00000 633.2910
happy_model_gam      33.78817 494.5764</code></pre>
<p>Performance vs. complexity</p>
</div>
</div>
<div id="model-averaging" class="section level2">
<h2>Model Averaging</h2>
<p>Have you ever suffered from choice overload? Many folks who seek to understand some phenomenon via modeling do so. There are plenty of choices due to data processing, but then there may be many models to consider as well, and should be if you’re doing things correctly. But you know what? You don’t have to pick a best.</p>
<p>Model averaging is a common technique in the Bayesian world and also with some applications of machine learning, but not as widely applied elsewhere, even though it could be. As an example if we (inversely) weight models by the AIC, we can get an average parameter that favors the better models, while not ignoring the lesser models if they aren’t notably poorer. People will use such an approach to get model averaged effects (i.e. coefficients) or predictions. In our setting, the GAM is doing so much better, that it’s weight would basically be 1.0 and zero for the others. So the model averaged predictions would be almost identical to the GAM predictions.</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
model
</th>
<th style="text-align:right;">
df
</th>
<th style="text-align:right;">
AIC
</th>
<th style="text-align:right;">
AICc
</th>
<th style="text-align:right;">
deltaAICc
</th>
<th style="text-align:right;">
Rel. Like.
</th>
<th style="text-align:right;">
weight
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
happy_model_base
</td>
<td style="text-align:right;">
5.000
</td>
<td style="text-align:right;">
687.920
</td>
<td style="text-align:right;">
688.069
</td>
<td style="text-align:right;">
187.210
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
happy_model_more
</td>
<td style="text-align:right;">
7.000
</td>
<td style="text-align:right;">
646.731
</td>
<td style="text-align:right;">
647.010
</td>
<td style="text-align:right;">
146.151
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
happy_model_interact
</td>
<td style="text-align:right;">
7.000
</td>
<td style="text-align:right;">
633.291
</td>
<td style="text-align:right;">
633.570
</td>
<td style="text-align:right;">
132.712
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
happy_model_gam
</td>
<td style="text-align:right;">
33.788
</td>
<td style="text-align:right;">
494.576
</td>
<td style="text-align:right;">
500.859
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
</div>
<div id="model-criticism-summary" class="section level2">
<h2>Model Criticism Summary</h2>
</div>
<div id="exercises-1" class="section level2">
<h2>Exercises</h2>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="29">
<li id="fn29"><p>This is often depicted in different ways depending on the text and context. In our depiction, the focus is on the F statistic as a ratio of explained variance to unexplained variance, which naturally relates to the <span class="math inline">\(R^2\)</span> statistic.<a href="model_criticism.html#fnref29" class="footnote-back">↩︎</a></p></li>
<li id="fn30"><p>The adjusted <span class="math inline">\(R^2\)</span> does not correct the bias. It only accounts for complexity.<a href="model_criticism.html#fnref30" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="models.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ml.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["twitter", "facebook", "weibo", "instapaper"],
"google": false,
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"depth": 2,
"scroll_highlight": true
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
