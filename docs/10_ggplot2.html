<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Data Processing &amp; Visualization</title>
  <meta name="description" content="Data Processing &amp; Visualization in R">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Data Processing &amp; Visualization" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://m-clark.github.io/" />
  <meta property="og:image" content="https://m-clark.github.io/img/nineteeneightyR.png" />
  <meta property="og:description" content="Data Processing &amp; Visualization in R" />
  <meta name="github-repo" content="m-clark/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Data Processing &amp; Visualization" />
  
  <meta name="twitter:description" content="Data Processing &amp; Visualization in R" />
  <meta name="twitter:image" content="https://m-clark.github.io/img/nineteeneightyR.png" />



<meta name="date" content="2017-12-02">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  <link rel="shortcut icon" href="img/R.ico" type="image/x-icon">
<link rel="prev" href="09_thinkingvis.html">
<link rel="next" href="11_interactive.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-0.9/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.7.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotlyjs-1.29.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotlyjs-1.29.2/plotly-latest.min.js"></script>
<link href="libs/vis-4.20.0/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.0/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.1/visNetwork.js"></script>
<script src="libs/proj4js-2.3.15/proj4.js"></script>
<link href="libs/highcharts-5.0.6/css/motion.css" rel="stylesheet" />
<script src="libs/highcharts-5.0.6/highstock.js"></script>
<script src="libs/highcharts-5.0.6/highcharts-3d.js"></script>
<script src="libs/highcharts-5.0.6/highcharts-more.js"></script>
<script src="libs/highcharts-5.0.6/modules/annotations.js"></script>
<script src="libs/highcharts-5.0.6/modules/broken-axis.js"></script>
<script src="libs/highcharts-5.0.6/modules/data.js"></script>
<script src="libs/highcharts-5.0.6/modules/drilldown.js"></script>
<script src="libs/highcharts-5.0.6/modules/exporting.js"></script>
<script src="libs/highcharts-5.0.6/modules/funnel.js"></script>
<script src="libs/highcharts-5.0.6/modules/heatmap.js"></script>
<script src="libs/highcharts-5.0.6/modules/map.js"></script>
<script src="libs/highcharts-5.0.6/modules/no-data-to-display.js"></script>
<script src="libs/highcharts-5.0.6/modules/offline-exporting.js"></script>
<script src="libs/highcharts-5.0.6/modules/solid-gauge.js"></script>
<script src="libs/highcharts-5.0.6/modules/treemap.js"></script>
<script src="libs/highcharts-5.0.6/plugins/annotations.js"></script>
<script src="libs/highcharts-5.0.6/plugins/draggable-legend.js"></script>
<script src="libs/highcharts-5.0.6/plugins/draggable-points.js"></script>
<script src="libs/highcharts-5.0.6/plugins/export-csv.js"></script>
<script src="libs/highcharts-5.0.6/plugins/grouped-categories.js"></script>
<script src="libs/highcharts-5.0.6/plugins/motion.js"></script>
<script src="libs/highcharts-5.0.6/plugins/pattern-fill-v2.js"></script>
<script src="libs/highcharts-5.0.6/plugins/tooltip-delay.js"></script>
<script src="libs/highcharts-5.0.6/custom/reset.js"></script>
<script src="libs/highcharts-5.0.6/custom/symbols-extra.js"></script>
<script src="libs/highcharts-5.0.6/custom/text-symbols.js"></script>
<link href="libs/fontawesome-4.5.0/font-awesome.min.css" rel="stylesheet" />
<link href="libs/htmlwdgtgrid-1/htmlwdgtgrid.css" rel="stylesheet" />
<script src="libs/highchart-binding-0.5.0/highchart.js"></script>
<link href="libs/leaflet-0.7.7/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-0.7.7/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<link href="libs/leaflet-label-0.2.2/leaflet.label.css" rel="stylesheet" />
<script src="libs/leaflet-label-0.2.2/leaflet.label.js"></script>
<script src="libs/Proj4Leaflet-0.7.2/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-0.7.2/proj4leaflet.js"></script>
<script src="libs/leaflet-binding-1.1.0/leaflet.js"></script>
<script src="libs/datatables-binding-0.2/datatables.js"></script>
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.12/js/jquery.dataTables.min.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/book.css" type="text/css" />
<link rel="stylesheet" href="css/standard_html.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://m-clark.github.io/"><span style="font-size:125%; font-variant:small-caps; font-style:italic; color:#990024; font-family:Roboto">Data Processing & Visualization</span></a></li>

<li class="divider"></li>
<li><a href="index.html#section"></a></li>
<li class="chapter" data-level="" data-path="01_intro.html"><a href="01_intro.html"><i class="fa fa-check"></i>Intro</a><ul>
<li class="chapter" data-level="" data-path="01_intro.html"><a href="01_intro.html#outline"><i class="fa fa-check"></i>Outline</a><ul>
<li class="chapter" data-level="" data-path="01_intro.html"><a href="01_intro.html#part-1-data-processing"><i class="fa fa-check"></i>Part 1: Data Processing</a></li>
<li class="chapter" data-level="" data-path="01_intro.html"><a href="01_intro.html#part-2-visualization"><i class="fa fa-check"></i>Part 2: Visualization</a></li>
<li class="chapter" data-level="" data-path="01_intro.html"><a href="01_intro.html#part-3-programming-basics"><i class="fa fa-check"></i>Part 3: Programming Basics</a></li>
<li class="chapter" data-level="" data-path="01_intro.html"><a href="01_intro.html#part-4-presentation"><i class="fa fa-check"></i>Part 4: Presentation</a></li>
<li class="chapter" data-level="" data-path="01_intro.html"><a href="01_intro.html#part-5-modeling"><i class="fa fa-check"></i>Part 5: Modeling</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="01_intro.html"><a href="01_intro.html#preparation"><i class="fa fa-check"></i>Preparation</a></li>
<li class="chapter" data-level="" data-path="01_intro.html"><a href="01_intro.html#other"><i class="fa fa-check"></i>Other</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="02_dataStructures.html"><a href="02_dataStructures.html"><i class="fa fa-check"></i>Part I: Data Processing</a><ul>
<li class="chapter" data-level="" data-path="02_dataStructures.html"><a href="02_dataStructures.html#data-structures"><i class="fa fa-check"></i>Data Structures</a><ul>
<li class="chapter" data-level="" data-path="02_dataStructures.html"><a href="02_dataStructures.html#vectors"><i class="fa fa-check"></i>Vectors</a></li>
<li class="chapter" data-level="" data-path="02_dataStructures.html"><a href="02_dataStructures.html#matrices"><i class="fa fa-check"></i>Matrices</a></li>
<li class="chapter" data-level="" data-path="02_dataStructures.html"><a href="02_dataStructures.html#lists"><i class="fa fa-check"></i>Lists</a></li>
<li class="chapter" data-level="" data-path="02_dataStructures.html"><a href="02_dataStructures.html#data-frames"><i class="fa fa-check"></i>Data Frames</a></li>
<li><a href="02_dataStructures.html#data-structure-exercises"><strong>Data Structure Exercises</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="03_io.html"><a href="03_io.html"><i class="fa fa-check"></i>Input/Output</a><ul>
<li class="chapter" data-level="" data-path="03_io.html"><a href="03_io.html#other-approaches"><i class="fa fa-check"></i>Other approaches</a></li>
<li class="chapter" data-level="" data-path="03_io.html"><a href="03_io.html#faster-approaches"><i class="fa fa-check"></i>Faster approaches</a></li>
<li class="chapter" data-level="" data-path="03_io.html"><a href="03_io.html#other-data"><i class="fa fa-check"></i>Other Data</a></li>
<li class="chapter" data-level="" data-path="03_io.html"><a href="03_io.html#on-the-horizon"><i class="fa fa-check"></i>On the horizon</a></li>
<li class="chapter" data-level="" data-path="03_io.html"><a href="03_io.html#big-data"><i class="fa fa-check"></i>Big Data</a></li>
<li><a href="03_io.html#io-exercises"><strong>I/O Exercises</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="04_indexing.html"><a href="04_indexing.html"><i class="fa fa-check"></i>Indexing</a><ul>
<li class="chapter" data-level="" data-path="04_indexing.html"><a href="04_indexing.html#base-r-indexing-refresher"><i class="fa fa-check"></i>Base R Indexing Refresher</a></li>
<li class="chapter" data-level="" data-path="04_indexing.html"><a href="04_indexing.html#listdata.frame-extraction"><i class="fa fa-check"></i>List/Data.frame extraction</a></li>
<li><a href="04_indexing.html#indexing-exercises"><strong>Indexing Exercises</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="05_vectorapp.html"><a href="05_vectorapp.html"><i class="fa fa-check"></i>Vectorization &amp; Apply</a><ul>
<li class="chapter" data-level="" data-path="05_vectorapp.html"><a href="05_vectorapp.html#boolean-indexing"><i class="fa fa-check"></i>Boolean Indexing</a></li>
<li class="chapter" data-level="" data-path="05_vectorapp.html"><a href="05_vectorapp.html#vectorized-operations"><i class="fa fa-check"></i>Vectorized operations</a></li>
<li class="chapter" data-level="" data-path="05_vectorapp.html"><a href="05_vectorapp.html#apply-functions"><i class="fa fa-check"></i>Apply functions</a></li>
<li><a href="05_vectorapp.html#vectorapply-exercises"><strong>Vector/Apply Exercises</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="06_pipes.html"><a href="06_pipes.html"><i class="fa fa-check"></i>Pipes</a><ul>
<li class="chapter" data-level="" data-path="06_pipes.html"><a href="06_pipes.html#pipes-for-visualization-more-later"><i class="fa fa-check"></i>Pipes for Visualization (more later)</a></li>
<li class="chapter" data-level="" data-path="06_pipes.html"><a href="06_pipes.html#the-dot"><i class="fa fa-check"></i>The dot</a></li>
<li class="chapter" data-level="" data-path="06_pipes.html"><a href="06_pipes.html#flexibility"><i class="fa fa-check"></i>Flexibility</a></li>
<li class="chapter" data-level="" data-path="06_pipes.html"><a href="06_pipes.html#summary"><i class="fa fa-check"></i>Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="07_tidyverse.html"><a href="07_tidyverse.html"><i class="fa fa-check"></i>Tidyverse</a><ul>
<li class="chapter" data-level="" data-path="07_tidyverse.html"><a href="07_tidyverse.html#what-is-the-tidyverse"><i class="fa fa-check"></i>What is the tidyverse?</a></li>
<li class="chapter" data-level="" data-path="07_tidyverse.html"><a href="07_tidyverse.html#what-is-tidy"><i class="fa fa-check"></i>What is tidy?</a></li>
<li class="chapter" data-level="" data-path="07_tidyverse.html"><a href="07_tidyverse.html#dplyr"><i class="fa fa-check"></i>dplyr</a></li>
<li class="chapter" data-level="" data-path="07_tidyverse.html"><a href="07_tidyverse.html#running-example"><i class="fa fa-check"></i>Running example</a></li>
<li class="chapter" data-level="" data-path="07_tidyverse.html"><a href="07_tidyverse.html#selecting-columns"><i class="fa fa-check"></i>Selecting Columns</a></li>
<li class="chapter" data-level="" data-path="07_tidyverse.html"><a href="07_tidyverse.html#filtering-rows"><i class="fa fa-check"></i>Filtering Rows</a></li>
<li class="chapter" data-level="" data-path="07_tidyverse.html"><a href="07_tidyverse.html#generating-new-data"><i class="fa fa-check"></i>Generating New Data</a></li>
<li class="chapter" data-level="" data-path="07_tidyverse.html"><a href="07_tidyverse.html#grouping-and-summarizing-data"><i class="fa fa-check"></i>Grouping and Summarizing Data</a></li>
<li class="chapter" data-level="" data-path="07_tidyverse.html"><a href="07_tidyverse.html#merging-data"><i class="fa fa-check"></i>Merging Data</a></li>
<li class="chapter" data-level="" data-path="07_tidyverse.html"><a href="07_tidyverse.html#tidyr"><i class="fa fa-check"></i>tidyr</a></li>
<li class="chapter" data-level="" data-path="07_tidyverse.html"><a href="07_tidyverse.html#purrr"><i class="fa fa-check"></i>purrr</a></li>
<li class="chapter" data-level="" data-path="07_tidyverse.html"><a href="07_tidyverse.html#personal-opinion"><i class="fa fa-check"></i>Personal Opinion</a></li>
<li><a href="07_tidyverse.html#dplyr-exercises"><strong>dplyr Exercises</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="08_datatable.html"><a href="08_datatable.html"><i class="fa fa-check"></i>data.table</a><ul>
<li class="chapter" data-level="" data-path="08_datatable.html"><a href="08_datatable.html#basics"><i class="fa fa-check"></i>Basics</a></li>
<li class="chapter" data-level="" data-path="08_datatable.html"><a href="08_datatable.html#grouped-operations"><i class="fa fa-check"></i>Grouped operations</a></li>
<li class="chapter" data-level="" data-path="08_datatable.html"><a href="08_datatable.html#faster"><i class="fa fa-check"></i>Faster!</a></li>
<li class="chapter" data-level="" data-path="08_datatable.html"><a href="08_datatable.html#pipe-with-data.table"><i class="fa fa-check"></i>Pipe with data.table</a></li>
<li class="chapter" data-level="" data-path="08_datatable.html"><a href="08_datatable.html#summary-1"><i class="fa fa-check"></i>Summary</a></li>
<li class="chapter" data-level="" data-path="08_datatable.html"><a href="08_datatable.html#dtplyr"><i class="fa fa-check"></i>dtplyr</a></li>
<li><a href="08_datatable.html#data.table-exercises"><strong>data.table Exercises</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="08b_Misc.html"><a href="08b_Misc.html"><i class="fa fa-check"></i>Miscellaneous</a><ul>
<li class="chapter" data-level="" data-path="08b_Misc.html"><a href="08b_Misc.html#moar-tidy"><i class="fa fa-check"></i>MOAR TIDY</a></li>
<li class="chapter" data-level="" data-path="08b_Misc.html"><a href="08b_Misc.html#documents"><i class="fa fa-check"></i>Documents</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="09_thinkingvis.html"><a href="09_thinkingvis.html"><i class="fa fa-check"></i>Part II: Visualization</a><ul>
<li class="chapter" data-level="" data-path="09_thinkingvis.html"><a href="09_thinkingvis.html#thinking-visually-1"><i class="fa fa-check"></i>Thinking Visually</a><ul>
<li class="chapter" data-level="" data-path="09_thinkingvis.html"><a href="09_thinkingvis.html#information"><i class="fa fa-check"></i>Information</a></li>
<li class="chapter" data-level="" data-path="09_thinkingvis.html"><a href="09_thinkingvis.html#color"><i class="fa fa-check"></i>Color</a></li>
<li class="chapter" data-level="" data-path="09_thinkingvis.html"><a href="09_thinkingvis.html#contrast"><i class="fa fa-check"></i>Contrast</a></li>
<li class="chapter" data-level="" data-path="09_thinkingvis.html"><a href="09_thinkingvis.html#scaling-size"><i class="fa fa-check"></i>Scaling Size</a></li>
<li class="chapter" data-level="" data-path="09_thinkingvis.html"><a href="09_thinkingvis.html#transparency"><i class="fa fa-check"></i>Transparency</a></li>
<li class="chapter" data-level="" data-path="09_thinkingvis.html"><a href="09_thinkingvis.html#accessibility"><i class="fa fa-check"></i>Accessibility</a></li>
<li class="chapter" data-level="" data-path="09_thinkingvis.html"><a href="09_thinkingvis.html#summary-2"><i class="fa fa-check"></i>Summary</a></li>
<li class="chapter" data-level="" data-path="09_thinkingvis.html"><a href="09_thinkingvis.html#a-casual-list-of-things-to-avoid"><i class="fa fa-check"></i>A casual list of things to avoid</a></li>
<li class="chapter" data-level="" data-path="09_thinkingvis.html"><a href="09_thinkingvis.html#thinking-visually-exercises"><i class="fa fa-check"></i>Thinking Visually Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="10_ggplot2.html"><a href="10_ggplot2.html"><i class="fa fa-check"></i>ggplot2</a><ul>
<li class="chapter" data-level="" data-path="10_ggplot2.html"><a href="10_ggplot2.html#layers"><i class="fa fa-check"></i>Layers</a></li>
<li class="chapter" data-level="" data-path="10_ggplot2.html"><a href="10_ggplot2.html#piping"><i class="fa fa-check"></i>Piping</a></li>
<li class="chapter" data-level="" data-path="10_ggplot2.html"><a href="10_ggplot2.html#aesthetics"><i class="fa fa-check"></i>Aesthetics</a></li>
<li class="chapter" data-level="" data-path="10_ggplot2.html"><a href="10_ggplot2.html#examples"><i class="fa fa-check"></i>Examples</a></li>
<li class="chapter" data-level="" data-path="10_ggplot2.html"><a href="10_ggplot2.html#stats"><i class="fa fa-check"></i>Stats</a></li>
<li class="chapter" data-level="" data-path="10_ggplot2.html"><a href="10_ggplot2.html#scales"><i class="fa fa-check"></i>Scales</a></li>
<li class="chapter" data-level="" data-path="10_ggplot2.html"><a href="10_ggplot2.html#facets"><i class="fa fa-check"></i>Facets</a></li>
<li class="chapter" data-level="" data-path="10_ggplot2.html"><a href="10_ggplot2.html#fine-control"><i class="fa fa-check"></i>Fine control</a></li>
<li class="chapter" data-level="" data-path="10_ggplot2.html"><a href="10_ggplot2.html#themes"><i class="fa fa-check"></i>Themes</a></li>
<li class="chapter" data-level="" data-path="10_ggplot2.html"><a href="10_ggplot2.html#extensions"><i class="fa fa-check"></i>Extensions</a></li>
<li class="chapter" data-level="" data-path="10_ggplot2.html"><a href="10_ggplot2.html#summary-ggplot2"><i class="fa fa-check"></i>Summary ggplot2</a></li>
<li><a href="10_ggplot2.html#ggplot2-exercises"><strong>ggplot2 Exercises</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="11_interactive.html"><a href="11_interactive.html"><i class="fa fa-check"></i>Interactive Visualization</a><ul>
<li class="chapter" data-level="" data-path="11_interactive.html"><a href="11_interactive.html#packages"><i class="fa fa-check"></i>Packages</a></li>
<li class="chapter" data-level="" data-path="11_interactive.html"><a href="11_interactive.html#piping-for-visualization"><i class="fa fa-check"></i>Piping for Visualization</a></li>
<li class="chapter" data-level="" data-path="11_interactive.html"><a href="11_interactive.html#htmlwidgets"><i class="fa fa-check"></i>htmlwidgets</a></li>
<li class="chapter" data-level="" data-path="11_interactive.html"><a href="11_interactive.html#plotly"><i class="fa fa-check"></i>Plotly</a></li>
<li class="chapter" data-level="" data-path="11_interactive.html"><a href="11_interactive.html#highcharter"><i class="fa fa-check"></i>Highcharter</a></li>
<li class="chapter" data-level="" data-path="11_interactive.html"><a href="11_interactive.html#visnetwork"><i class="fa fa-check"></i>visNetwork</a></li>
<li class="chapter" data-level="" data-path="11_interactive.html"><a href="11_interactive.html#leaflet"><i class="fa fa-check"></i>leaflet</a></li>
<li class="chapter" data-level="" data-path="11_interactive.html"><a href="11_interactive.html#dt"><i class="fa fa-check"></i>DT</a></li>
<li class="chapter" data-level="" data-path="11_interactive.html"><a href="11_interactive.html#shiny"><i class="fa fa-check"></i>Shiny</a></li>
<li class="chapter" data-level="" data-path="11_interactive.html"><a href="11_interactive.html#interactive-and-visual-data-exploration"><i class="fa fa-check"></i>Interactive and Visual Data Exploration</a></li>
<li><a href="11_interactive.html#interactive-visualization-exercises"><strong>Interactive Visualization Exercises</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="999_summary.html"><a href="999_summary.html"><i class="fa fa-check"></i>Summary</a></li>
<li class="divider"></li>
<li><a href="https://m-clark.github.io/"><img src="img/mc.png" style="width:50%; padding:0px 0; display:block; margin: 0 auto;" alt="MC logo"></a></li>
<li><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="width:50%; border-width:0; display:block; margin: 0 auto;" src="img/ccbysa_test.png" /></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><span style="font-size:125%; font-family:Roboto; font-style:normal">Data Processing &amp; Visualization</span></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ggplot2-1" class="section level2">
<h2>ggplot2</h2>
<p>The most <a href="https://www.rdocumentation.org/trends?page1=1&amp;sort1=total&amp;page2=1&amp;sort2=total&amp;page3=1&amp;page4=1">popular</a> visualization package in R is <span class="pack">ggplot2</span>. It’s so popular, it or its aesthetic is copied in other languages/programs as well. It entails a <span class="emph">grammar of graphics</span> (hence the <strong>gg</strong>), and learning that grammar is key to using it effectively. Some of the strengths of <span class="pack">ggplot2</span> include:</p>
<ul>
<li>The ease of getting a good looking plot</li>
<li>Easy customization</li>
<li>A lot of necessary data processing is done for you</li>
<li>Clear syntax</li>
<li>Easy multidimensional approach</li>
<li>Decent default color scheme as a default</li>
<li>Lots of extensions</li>
</ul>
<p>Every graph is built from the same few parts, and it’s important to be aware of a few key ideas, which we will cover in turn.</p>
<ul>
<li>Layers (and geoms)</li>
<li>Piping</li>
<li>Aesthetics</li>
<li>Facets</li>
<li>Scales</li>
<li>Themes</li>
<li>Extensions</li>
</ul>
<p>Note that while you can obviously use base R for visualization, it’s never going to be easier, nor as flexible as <span class="pack">ggplot2</span>. If you’re used to using base R visuals, you should be prepared to leave them behind.</p>
<div id="layers" class="section level3">
<h3>Layers</h3>
<p>In general, we start with a base layer and add to it. In most cases you’ll start as follows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># recall that starwars is in the dplyr package</span>
<span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>height, <span class="dt">y=</span>mass), <span class="dt">data=</span>starwars)</code></pre></div>
<p>This would just produce a plot background, but nothing else. However, with the foundation in place, we’re now ready to add something to it. Let’s add some points (the outlier is Jabba the Hut).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>height, <span class="dt">y=</span>mass), <span class="dt">data=</span>starwars) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/layer2-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>Perhaps we want to change labels or theme. These would be additional layers to the plot.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>height, <span class="dt">y=</span>mass), <span class="dt">data=</span>starwars) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&#39;Height in cm&#39;</span>, <span class="dt">y=</span><span class="st">&#39;Weight in kg&#39;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_dark</span>()</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/layer3-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>Each layer is consecutively added by means of a pipe operator, and layers may regard geoms, scales, labels, facets etc. You may have many different layers to produce one plot, and there really is no limit. However some efficiencies may be possible for a given situation. For example, it’s more straightforward to use <span class="func">geom_smooth</span> than calculate fits, standard errors etc. and then add multiple geoms to produce the same thing. This is the sort of thing you’ll get used to as you use ggplot more.</p>
</div>
<div id="piping" class="section level3">
<h3>Piping</h3>
<p>As we saw, <span class="emph">layers</span> are added via piping (<span class="emph">+</span>). The first layers added after the base are typically <span class="emph">geoms</span>, or geometric objects that represent the data, and include things like:</p>
<ul>
<li>points</li>
<li>lines</li>
<li>density</li>
<li>text</li>
</ul>
<p>In case you’re wondering why ggplot doesn’t use <code>%&gt;%</code> as in the tidyverse and other visualization packages, it’s because <span class="pack">ggplot2</span> was using pipes before it was cool, well before those came along. Otherwise, the concept is the same as we saw in the data processing section.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>myvar, <span class="dt">y=</span>myvar2), <span class="dt">data=</span>mydata) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p>Our base is provided via the <span class="func">ggplot</span> function, and specifies the data at the very least, but commonly also the x and y aesthetics.</p>
<p>The <span class="func">geom_point</span> function adds a layer of points, and now we would have a scatterplot. Alternatively, you could have specified the x and y aesthetic at the geom_point layer, but if you’re going to have the same x, y, color, etc. aesthetics regardless of layer, put it in the base. Otherwise, doing it by layer gives you more flexibility if needed. Geoms even have their own data argument, allowing you to combine information from several sources for a single visualization.</p>
</div>
<div id="aesthetics" class="section level3">
<h3>Aesthetics</h3>
<p><span class="emph">Aesthetics</span> map data to various visual aspects of the plot, including size, color etc. The function used in ggplot to do this is <span class="func">aes</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">aes</span>(<span class="dt">x=</span>myvar, <span class="dt">y=</span>myvar2, <span class="dt">color=</span>myvar3, <span class="dt">group=</span>g)</code></pre></div>
<p>The best way to understand what goes into the aes function is if the value is varying. For example, if I want the size of points to be a certain value, I would code the following.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">... <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(..., <span class="dt">size=</span><span class="dv">4</span>)</code></pre></div>
<p>However, if I want the size to be associated with the data in some way, I use it as an aesthetic.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">... <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">size=</span>myvar))</code></pre></div>
<p>The same goes for practically any aspect of a geom- size, color, fill, etc. If it is a fixed value, set it outside the aesthetic. If it varies based on the data, put it within an aesthetic.</p>
</div>
<div id="examples" class="section level3">
<h3>Examples</h3>
<p>Let’s get more of a feel for things by seeing some examples that demonstrate some geoms and aesthetics.</p>
<p>To begin, after setting the base aesthetic, we’ll set some explicit values for the geom.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
<span class="kw">data</span>(<span class="st">&quot;diamonds&quot;</span>); <span class="kw">data</span>(<span class="st">&#39;economics&#39;</span>)
<span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>carat, <span class="dt">y=</span>price), <span class="dt">data=</span>diamonds) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size=</span>.<span class="dv">5</span>, <span class="dt">color=</span><span class="st">&#39;peru&#39;</span>)</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/ggscatter-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Next we use two different geoms, one using a different data source. Note that geoms often have arguments specific to them, as <code>label</code> is for <span class="func">geom_text</span>. It would be ignored by <span class="func">geom_line</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>date, <span class="dt">y=</span>unemploy), <span class="dt">data=</span>economics) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span>unemploy), 
            <span class="dt">vjust=</span><span class="op">-</span>.<span class="dv">5</span>, 
            <span class="dt">data=</span><span class="kw">filter</span>(economics, date<span class="op">==</span><span class="st">&#39;2009-10-01&#39;</span>))</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/ggline-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>In the following, one setting, alpha (transparency), is not mapped to the data, while size and color are<a href="#fn14" class="footnoteRef" id="fnref14"><sup>14</sup></a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>carat, <span class="dt">y=</span>price), <span class="dt">data=</span>diamonds) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">size=</span>carat, <span class="dt">color=</span>clarity), <span class="dt">alpha=</span>.<span class="dv">05</span>) </code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/ggalpha-1.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="stats" class="section level3">
<h3>Stats</h3>
<p>There are many statistical functions built in, and it is a key strength of ggplot that you don’t have to do a lot of processing for very common plots.</p>
<p>Quantile regression lines:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_quantile</span>()</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/ggquant-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>Loess (or additive model) smooth. This shows how we can do some fine-tuning and use model-based approaches for visualization.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(mcycle, <span class="dt">package=</span><span class="st">&#39;MASS&#39;</span>)
<span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>times, <span class="dt">y=</span>accel), <span class="dt">data=</span>mcycle) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">formula=</span>y <span class="op">~</span><span class="st"> </span><span class="kw">s</span>(x, <span class="dt">bs=</span><span class="st">&#39;ad&#39;</span>), <span class="dt">method=</span><span class="st">&#39;gam&#39;</span>)</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/ggsmooth-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>Bootstrapped confidence intervals:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(cyl, mpg)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">stat_summary</span>(<span class="dt">fun.data =</span> <span class="st">&quot;mean_cl_boot&quot;</span>, <span class="dt">colour =</span> <span class="st">&quot;orange&quot;</span>, <span class="dt">alpha=</span>.<span class="dv">75</span>, <span class="dt">size =</span> <span class="dv">1</span>)</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/ggstatsum-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>The take-home message here is to always let ggplot do the work for you if at all possible.</p>
</div>
<div id="scales" class="section level3">
<h3>Scales</h3>
<p>Often there are many things we want to change about the plot, for example, the size and values of axis labels, the range of sizes for points to take, the specific colors we want to use, and so forth. Be aware that there are a great many options here, and you will regularly want to use them.</p>
<p>A very common thing you’ll do is change the labels for the axes. You definitely don’t have to go and change the variable name itself to do this, just use the <span class="func">labs</span> function. There are also functions for individual parts, e.g. <span class="func">xlab</span>, <span class="func">ylab</span> and <span class="func">ggtitle</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>times, <span class="dt">y=</span>accel), <span class="dt">data=</span>mcycle) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se=</span>F) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&#39;milliseconds after impact&#39;</span>, <span class="dt">y=</span><span class="st">&#39;head acceleration&#39;</span>, <span class="dt">title=</span><span class="st">&#39;Motorcycle Accident&#39;</span>)</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/scale_labs-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>A frequent operation is changing the x and y look in the form of limits and tick marks. Like <span class="func">labs</span>, there is a general <span class="func">lims</span> function and specific functions for just the specific parts. In addition, we may want to get really detailed using <span class="func">scale_x_*</span> or <span class="func">scale_y_*</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy, <span class="dt">size=</span>cyl)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ylim</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">60</span>))</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/scale_lims-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy, <span class="dt">size=</span>cyl)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">60</span>), 
                     <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">60</span>,<span class="dt">by=</span><span class="dv">12</span>), 
                     <span class="dt">minor_breaks=</span><span class="kw">seq</span>(<span class="dv">6</span>,<span class="dv">60</span>,<span class="dt">by=</span><span class="dv">6</span>))</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/scale_lims-2.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>Another common option is to change the size of points in some way. While we assign the aesthetic as before, it comes with defaults that might not work for a given situation. Play around with the range values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy, <span class="dt">size=</span>cyl)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_size</span>(<span class="dt">range=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/scale_size2-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>Now that you know more about color issues, you may want to apply something besides the default options. The following shows a built-in color scale for a color aesthetic that is treated as continuous, and one that is discrete and which we want to supply our own colors (these actually come from plotly’s default color scheme).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy, <span class="dt">color=</span>cyl)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_gradient2</span>()</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/scale_color-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy, <span class="dt">color=</span><span class="kw">factor</span>(cyl))) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="dt">values=</span><span class="kw">c</span>(<span class="st">&quot;#1f77b4&quot;</span>, <span class="st">&quot;#ff7f0e&quot;</span>, <span class="st">&quot;#2ca02c&quot;</span>, <span class="st">&quot;#d62728&quot;</span>))</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/scale_color-2.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>We can even change the scale of the data itself.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_log10</span>()</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/scale_scale-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>In short, scale alterations are really useful for getting just the plot you want, and there is a lot of flexibility for you to work with.</p>
</div>
<div id="facets" class="section level3">
<h3>Facets</h3>
<p><span class="emph">Facets</span> allow for paneled display, a very common operation. In general, we often want comparison plots. The <span class="func">facet_grid</span> function will produce a grid, and often this is all that’s needed. However, <span class="func">facet_wrap</span> is more flexible, while possibly taking a bit extra to get things just the way you want. Both use a formula approach to specify the grouping.</p>
<div id="facet_grid" class="section level5">
<h5>facet_grid</h5>
<p>Facet by cylinder.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(wt, mpg)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span><span class="st"> </span>cyl)</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/facetgrid-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>Facet by vs and cylinder.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(wt, mpg)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_grid</span>(vs <span class="op">~</span><span class="st"> </span>cyl, <span class="dt">labeller =</span> label_both)</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/facetgrid2-1.svg" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="facet_wrap" class="section level5">
<h5>facet_wrap</h5>
<p>Specify the number of columns or rows with <span class="func">facet_wrap</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(wt, mpg)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(vs <span class="op">~</span><span class="st"> </span>cyl, <span class="dt">labeller =</span> label_both, <span class="dt">ncol=</span><span class="dv">2</span>)</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/facetwrap-1.svg" width="75%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="fine-control" class="section level3">
<h3>Fine control</h3>
<p><span class="pack">ggplot2</span> makes it easy to get good looking graphs quickly. However the amount of fine control is extensive. The following plot is hideous (aside from the background, which is totally rad), but illustrates the point.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>carat, <span class="dt">y=</span>price), <span class="dt">data=</span>diamonds) <span class="op">+</span>
<span class="st">  </span><span class="kw">annotation_custom</span>(<span class="kw">rasterGrob</span>(lambosun, 
                               <span class="dt">width=</span><span class="kw">unit</span>(<span class="dv">1</span>,<span class="st">&quot;npc&quot;</span>), 
                               <span class="dt">height=</span><span class="kw">unit</span>(<span class="dv">1</span>,<span class="st">&quot;npc&quot;</span>), 
                               <span class="dt">interpolate =</span> <span class="ot">FALSE</span>), 
                    <span class="op">-</span><span class="ot">Inf</span>, <span class="ot">Inf</span>, <span class="op">-</span><span class="ot">Inf</span>, <span class="ot">Inf</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color=</span>clarity), <span class="dt">alpha=</span>.<span class="dv">5</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">scale_y_log10</span>(<span class="dt">breaks=</span><span class="kw">c</span>(<span class="dv">1000</span>,<span class="dv">5000</span>,<span class="dv">10000</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlim</span>(<span class="dv">0</span>, <span class="dv">10</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_brewer</span>(<span class="dt">type=</span><span class="st">&#39;div&#39;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>cut, <span class="dt">ncol=</span><span class="dv">3</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.ticks.x=</span><span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&#39;darkred&#39;</span>),
        <span class="dt">axis.text.x=</span><span class="kw">element_text</span>(<span class="dt">angle=</span><span class="op">-</span><span class="dv">45</span>),
        <span class="dt">axis.text.y=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">20</span>),
        <span class="dt">strip.text=</span><span class="kw">element_text</span>(<span class="dt">color=</span><span class="st">&#39;forestgreen&#39;</span>),
        <span class="dt">strip.background=</span><span class="kw">element_blank</span>(),
        <span class="dt">panel.grid.minor=</span><span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&#39;lightblue&#39;</span>),
        <span class="dt">legend.key=</span><span class="kw">element_rect</span>(<span class="dt">linetype=</span><span class="dv">4</span>),
        <span class="dt">legend.position=</span><span class="st">&#39;bottom&#39;</span>)</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/finecontrol-1.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="themes" class="section level3">
<h3>Themes</h3>
<p>In the last example you saw two uses of a <span class="emph">theme</span>- a built-in version that comes with ggplot (<span class="func">theme_minimal</span>), and specific customization (<span class="func">theme(…)</span>). The built-in themes provide ready-made approaches that might be enough for a finished product. For the theme function, each argument, and there are many, takes on a specific value or an element function:</p>
<ul>
<li><span class="func">element_rect</span></li>
<li><span class="func">element_line</span></li>
<li><span class="func">element_text</span></li>
<li><span class="func">element_blank</span></li>
</ul>
<p>Each of those element functions has arguments specific to it. For example, for <span class="func">element_text</span> you can specify the font size, while for element line you could specify the line type.</p>
<p>Note that the base theme of ggplot, and I would say every plotting package, is probably going to need manipulation before a plot is ready for presentation. For example, the ggplot theme doesn’t work well for web presentation, and is even worse for print. You will almost invariably need to tweak it. I suggest using and saving your own custom theme for easy application for any visualization package you use frequently.</p>
</div>
<div id="extensions" class="section level3">
<h3>Extensions</h3>
<p><span class="pack">ggplot2</span> now has its own extension system, and there is even a <a href="http://www.ggplot2-exts.org/">website</a> to track the extensions. Examples include:</p>
<ul>
<li>additional themes</li>
<li>maps</li>
<li>interactivity</li>
<li>animations</li>
<li>marginal plots</li>
<li>network graphs</li>
<li>time series</li>
<li>aligning multiple ggplot visualizations, possibly of different types</li>
</ul>
<p><img src="data-processing-and-visualization_files/figure-html/mullerplot-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<p>As one can see, <span class="pack">ggplot2</span> is only the beginning. You’ll have a lot of tools at your disposal. Furthermore, many modeling and other packages will produce ggplot graphics to which you can add your own layers and tweak like you would any other ggplot.</p>
</div>
<div id="summary-ggplot2" class="section level3">
<h3>Summary ggplot2</h3>
<p><span class="pack">ggplot2</span> is an easy to use, but powerful visualization tool. It allows one to think in many dimensions for any graph, and extends well beyond the basics. Use it to easily create more interesting visualizations.</p>
</div>
<div id="ggplot2-exercises" class="section level3">
<h3><strong>ggplot2 Exercises</strong></h3>
<div id="exercise-0-2" class="section level4">
<h4>Exercise 0</h4>
<p>Install and load the <span class="pack">ggplot2</span> package if you haven’t already.</p>
</div>
<div id="exercise-1-6" class="section level4">
<h4>Exercise 1</h4>
<p>Create two plots, one a scatterplot (e.g. with <span class="func">geom_point</span>) and one with lines (e.g. <span class="func">geom_line</span>) with a data set of your choosing (all of the following are base R or available after loading <span class="pack">ggplot2</span>. Some suggestions:</p>
<ul>
<li><span class="objclass">faithful</span>: Waiting time between eruptions and the duration of the eruption for the Old Faithful geyser in Yellowstone National Park, Wyoming, USA.</li>
<li><span class="objclass">msleep</span>: mammals sleep dataset with sleep times and weights etc.</li>
<li><span class="objclass">diamonds</span>: used in the slides</li>
<li><span class="objclass">economics</span>: US economic time series.</li>
<li><span class="objclass">txhousing</span>: Housing sales in TX.</li>
<li><span class="objclass">midwest</span>: Midwest demographics.</li>
<li><span class="objclass">mpg</span>: Fuel economy data from 1999 and 2008 for 38 popular models of car</li>
</ul>
<p>Recall the basic form for ggplot.</p>
<pre><code>ggplot(aes(x=*, y=*, other), data=*) +
  geom_*() +
  otherLayers, theme etc.</code></pre>
<p>Themes to play with:</p>
<ul>
<li><span class="func">theme_bw</span></li>
<li><span class="func">theme_classic</span></li>
<li><span class="func">theme_dark</span></li>
<li><span class="func">theme_gray</span></li>
<li><span class="func">theme_light</span></li>
<li><span class="func">theme_linedraw</span></li>
<li><span class="func">theme_minimal</span></li>
<li><span class="func">theme_trueMinimal</span> (requires the lazerhawk package and an appreciation of the Lamborghini background from the previous visualization)</li>
</ul>
<p><img src="data-processing-and-visualization_files/figure-html/ggplot_ex1-1.svg" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="exercise-2-6" class="section level4">
<h4>Exercise 2</h4>
<p>Play around and change the arguments to the following. You’ll need to install the <span class="pack">maps</span> package.</p>
<ul>
<li>For example, do points for all county midpoints. For that you’d need to change the x and y for the point geom to an aesthetic based on the longitude and latitude, as well as add its data argument to use the <span class="objclass">seats</span> data frame.</li>
<li>Make the color of the points or text based on <code>subregion</code>. This will require adding the fill argument to the polygon geom and removing the NA setting. In addition, add the argument show.legend=F (outside the aesthetic), or you’ll have a problematic legend (recall what we said before about too many colors!). Try making color based on subregion too.</li>
<li>See if you can use <span class="func">element_blank</span> on a theme argument to remove the axis information. See ?theme for ideas.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(maps)
mi =<span class="st"> </span><span class="kw">map_data</span>(<span class="st">&quot;county&quot;</span>, <span class="st">&quot;michigan&quot;</span>)
seats =<span class="st"> </span>mi <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(subregion) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise_at</span>(<span class="kw">vars</span>(lat, long), <span class="cf">function</span>(x) <span class="kw">median</span>(<span class="kw">range</span>(x)))

<span class="co"># inspect the data</span>
<span class="co"># head(mi)</span>
<span class="co"># head(seats)</span>

<span class="kw">ggplot</span>(mi, <span class="kw">aes</span>(long, lat)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_polygon</span>(<span class="kw">aes</span>(<span class="dt">group =</span> subregion), <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">colour =</span> <span class="st">&quot;grey60&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> subregion), <span class="dt">data =</span> seats, <span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">angle =</span> <span class="dv">45</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">x=</span><span class="op">-</span><span class="fl">83.748333</span>, <span class="dt">y=</span><span class="fl">42.281389</span>, <span class="dt">color=</span><span class="st">&#39;#1e90ff&#39;</span>, <span class="dt">size=</span><span class="dv">3</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.grid=</span><span class="kw">element_blank</span>())</code></pre></div>
<p><img src="data-processing-and-visualization_files/figure-html/ggplot_ex2-1.svg" width="75%" style="display: block; margin: auto;" /></p>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="14">
<li id="fn14"><p>The reason the legend is hard to make out is because the transparency is mapped to the colors and size. While I personally have never come across this being a desirable situation, nor can fathom why it would be the default, it can be fixed via <code>+ guides(colour = guide_legend(override.aes = list(alpha = 1)), size = guide_legend(override.aes = list(alpha = 1)))</code>. Apparently because that’s fun to have to do every time and easy to remember.<a href="10_ggplot2.html#fnref14">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="09_thinkingvis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="11_interactive.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["twitter", "facebook", "google", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "section",
"depth": 3,
"scroll_highlight": true
},
"highlight": "pygments",
"search": true
});
});
</script>

</body>

</html>
