<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Writing Functions | Data Processing &amp; Visualization</title>
  <meta name="description" content="The focus of this document is on common data processing and exploration techniques in R, especially as a prelude to visualization. The first part of the document will cover data structures, the dplyr and tidyverse packages, which enhance and facilitate the sorts of operations that typically arise when dealing with data, including faster I/O and grouped operations. For visualization, the focus will be on using ggplot2 and other packages that allow for interactivity. In addition, basic programming concepts and techniques are introduced. Exercises may be found in the document as well. In addition, the demonstrations of most content in Python is available via Jupyter notebooks." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Writing Functions | Data Processing &amp; Visualization" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://m-clark.github.io/data-processing-and-visualization/" />
  <meta property="og:image" content="https://m-clark.github.io/data-processing-and-visualization/img/nineteeneightyR.png" />
  <meta property="og:description" content="The focus of this document is on common data processing and exploration techniques in R, especially as a prelude to visualization. The first part of the document will cover data structures, the dplyr and tidyverse packages, which enhance and facilitate the sorts of operations that typically arise when dealing with data, including faster I/O and grouped operations. For visualization, the focus will be on using ggplot2 and other packages that allow for interactivity. In addition, basic programming concepts and techniques are introduced. Exercises may be found in the document as well. In addition, the demonstrations of most content in Python is available via Jupyter notebooks." />
  <meta name="github-repo" content="m-clark/data-processing-and-visualization/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Writing Functions | Data Processing &amp; Visualization" />
  
  <meta name="twitter:description" content="The focus of this document is on common data processing and exploration techniques in R, especially as a prelude to visualization. The first part of the document will cover data structures, the dplyr and tidyverse packages, which enhance and facilitate the sorts of operations that typically arise when dealing with data, including faster I/O and grouped operations. For visualization, the focus will be on using ggplot2 and other packages that allow for interactivity. In addition, basic programming concepts and techniques are introduced. Exercises may be found in the document as well. In addition, the demonstrations of most content in Python is available via Jupyter notebooks." />
  <meta name="twitter:image" content="https://m-clark.github.io/data-processing-and-visualization/img/nineteeneightyR.png" />



<meta name="date" content="2020-02-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="img/R.ico" type="image/x-icon" />
<link rel="prev" href="iterative.html"/>
<link rel="next" href="more.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/font-awesome-5.3.1/css/fontawesome-all.min.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.5/grViz.js"></script>
<link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.1/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script>
<script src="libs/plotly-binding-4.9.2/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
<script src="libs/proj4js-2.3.15/proj4.js"></script>
<link href="libs/highcharts-7.0.1/css/motion.css" rel="stylesheet" />
<link href="libs/highcharts-7.0.1/css/htmlwdgtgrid.css" rel="stylesheet" />
<script src="libs/highcharts-7.0.1/highcharts.js"></script>
<script src="libs/highcharts-7.0.1/highcharts-3d.js"></script>
<script src="libs/highcharts-7.0.1/highcharts-more.js"></script>
<script src="libs/highcharts-7.0.1/modules/stock.js"></script>
<script src="libs/highcharts-7.0.1/modules/map.js"></script>
<script src="libs/highcharts-7.0.1/modules/annotations.js"></script>
<script src="libs/highcharts-7.0.1/modules/boost.js"></script>
<script src="libs/highcharts-7.0.1/modules/data.js"></script>
<script src="libs/highcharts-7.0.1/modules/drag-panes.js"></script>
<script src="libs/highcharts-7.0.1/modules/drilldown.js"></script>
<script src="libs/highcharts-7.0.1/modules/item-series.js"></script>
<script src="libs/highcharts-7.0.1/modules/offline-exporting.js"></script>
<script src="libs/highcharts-7.0.1/modules/overlapping-datalabels.js"></script>
<script src="libs/highcharts-7.0.1/modules/exporting.js"></script>
<script src="libs/highcharts-7.0.1/modules/export-data.js"></script>
<script src="libs/highcharts-7.0.1/modules/funnel.js"></script>
<script src="libs/highcharts-7.0.1/modules/heatmap.js"></script>
<script src="libs/highcharts-7.0.1/modules/treemap.js"></script>
<script src="libs/highcharts-7.0.1/modules/sankey.js"></script>
<script src="libs/highcharts-7.0.1/modules/solid-gauge.js"></script>
<script src="libs/highcharts-7.0.1/modules/streamgraph.js"></script>
<script src="libs/highcharts-7.0.1/modules/sunburst.js"></script>
<script src="libs/highcharts-7.0.1/modules/vector.js"></script>
<script src="libs/highcharts-7.0.1/modules/wordcloud.js"></script>
<script src="libs/highcharts-7.0.1/modules/xrange.js"></script>
<script src="libs/highcharts-7.0.1/modules/tilemap.js"></script>
<script src="libs/highcharts-7.0.1/modules/venn.js"></script>
<script src="libs/highcharts-7.0.1/modules/gantt.js"></script>
<script src="libs/highcharts-7.0.1/modules/timeline.js"></script>
<script src="libs/highcharts-7.0.1/modules/parallel-coordinates.js"></script>
<script src="libs/highcharts-7.0.1/plugins/grouped-categories.js"></script>
<script src="libs/highcharts-7.0.1/plugins/motion.js"></script>
<script src="libs/highcharts-7.0.1/plugins/multicolor_series.js"></script>
<script src="libs/highcharts-7.0.1/custom/reset.js"></script>
<script src="libs/highcharts-7.0.1/custom/symbols-extra.js"></script>
<script src="libs/highcharts-7.0.1/custom/text-symbols.js"></script>
<script src="libs/highchart-binding-0.7.0/highchart.js"></script>
<script src="libs/sigma-1.2.1/sigma.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.layout.forceAtlas2.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.layout.noverlap.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.renderers.parallelEdges.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.plugins.animate.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.renderers.customShapes.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.plugins.dragNodes.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.renderers.customEdgeShapes.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.plugins.relativeSize.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.renderers.edgeLabels.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.parsers.gexf.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.exporters.svg.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.plugins.neighborhoods.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.plugins.filter.min.js"></script>
<script src="libs/sigma-1.2.1/plugins/sigma.renderers.snapshot.min.js"></script>
<script src="libs/sigmajs-binding-0.1.3/sigmajs.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.12/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/book.css" type="text/css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class='before'><a href="./">Data Processing & Visualization</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i>Intro</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#outline"><i class="fa fa-check"></i>Outline</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#part-1-data-processing"><i class="fa fa-check"></i>Part 1: Data Processing</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#part-2-programming-basics"><i class="fa fa-check"></i>Part 2: Programming Basics</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#part-3-modeling"><i class="fa fa-check"></i>Part 3: Modeling</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#part-4-visualization"><i class="fa fa-check"></i>Part 4: Visualization</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#part-5-presentation"><i class="fa fa-check"></i>Part 5: Presentation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#preparation"><i class="fa fa-check"></i>Preparation</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#other"><i class="fa fa-check"></i>Other</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#python"><i class="fa fa-check"></i>Python</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i>R</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Part I: Information Processing</b></span></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html"><i class="fa fa-check"></i>Data Structures</a><ul>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#vectors"><i class="fa fa-check"></i>Vectors</a><ul>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#character-strings"><i class="fa fa-check"></i>Character strings</a></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#factors"><i class="fa fa-check"></i>Factors</a></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#logicals"><i class="fa fa-check"></i>Logicals</a></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#numeric-and-integer"><i class="fa fa-check"></i>Numeric and integer</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#matrices"><i class="fa fa-check"></i>Matrices</a><ul>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#creating-a-matrix"><i class="fa fa-check"></i>Creating a matrix</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#lists"><i class="fa fa-check"></i>Lists</a></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#data-frames"><i class="fa fa-check"></i>Data Frames</a><ul>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#creating-a-data-frame"><i class="fa fa-check"></i>Creating a data frame</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#data-structure-exercises"><i class="fa fa-check"></i>Data Structure Exercises</a><ul>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#excercise-1"><i class="fa fa-check"></i>Excercise #1</a></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#exercise-2"><i class="fa fa-check"></i>Exercise #2</a></li>
<li class="chapter" data-level="" data-path="data_structures.html"><a href="data_structures.html#thinking-exercises"><i class="fa fa-check"></i>Thinking Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html"><i class="fa fa-check"></i>Input/Output</a><ul>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#other-approaches"><i class="fa fa-check"></i>Other approaches</a></li>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#faster-approaches"><i class="fa fa-check"></i>Faster approaches</a></li>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#other-data"><i class="fa fa-check"></i>Other Data</a></li>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#on-the-horizon"><i class="fa fa-check"></i>On the horizon</a></li>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#big-data"><i class="fa fa-check"></i>Big Data</a></li>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#io-exercises"><i class="fa fa-check"></i>I/O Exercises</a><ul>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#exercise-1"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="io.html"><a href="io.html#thinking-exercises-1"><i class="fa fa-check"></i>Thinking Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="indexing.html"><a href="indexing.html"><i class="fa fa-check"></i>Indexing</a><ul>
<li class="chapter" data-level="" data-path="indexing.html"><a href="indexing.html#base-r-indexing-refresher"><i class="fa fa-check"></i>Base R Indexing Refresher</a></li>
<li class="chapter" data-level="" data-path="indexing.html"><a href="indexing.html#listdata.frame-extraction"><i class="fa fa-check"></i>List/Data.frame extraction</a></li>
<li class="chapter" data-level="" data-path="indexing.html"><a href="indexing.html#indexing-exercises"><i class="fa fa-check"></i>Indexing Exercises</a><ul>
<li class="chapter" data-level="" data-path="indexing.html"><a href="indexing.html#exercise-1-1"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="indexing.html"><a href="indexing.html#exercise-2-1"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="indexing.html"><a href="indexing.html#exercise-3"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="pipes.html"><a href="pipes.html"><i class="fa fa-check"></i>Pipes</a><ul>
<li class="chapter" data-level="" data-path="pipes.html"><a href="pipes.html#using-variables-as-they-are-created"><i class="fa fa-check"></i>Using variables as they are created</a></li>
<li class="chapter" data-level="" data-path="pipes.html"><a href="pipes.html#pipes-for-visualization-more-later"><i class="fa fa-check"></i>Pipes for Visualization (more later)</a></li>
<li class="chapter" data-level="" data-path="pipes.html"><a href="pipes.html#the-dot"><i class="fa fa-check"></i>The dot</a></li>
<li class="chapter" data-level="" data-path="pipes.html"><a href="pipes.html#flexibility"><i class="fa fa-check"></i>Flexibility</a></li>
<li class="chapter" data-level="" data-path="pipes.html"><a href="pipes.html#summary"><i class="fa fa-check"></i>Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i>Tidyverse</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#what-is-the-tidyverse"><i class="fa fa-check"></i>What is the tidyverse?</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#what-is-tidy"><i class="fa fa-check"></i>What is tidy?</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#dplyr"><i class="fa fa-check"></i>dplyr</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#an-example"><i class="fa fa-check"></i>An example</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#running-example"><i class="fa fa-check"></i>Running example</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#selecting-columns"><i class="fa fa-check"></i>Selecting Columns</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#helper-functions"><i class="fa fa-check"></i>Helper functions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#filtering-rows"><i class="fa fa-check"></i>Filtering Rows</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#generating-new-data"><i class="fa fa-check"></i>Generating New Data</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#grouping-and-summarizing-data"><i class="fa fa-check"></i>Grouping and Summarizing Data</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#renaming-columns"><i class="fa fa-check"></i>Renaming columns</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#merging-data"><i class="fa fa-check"></i>Merging Data</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#tidyr"><i class="fa fa-check"></i>tidyr</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#more-tidyverse"><i class="fa fa-check"></i>More Tidyverse</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#personal-opinion"><i class="fa fa-check"></i>Personal Opinion</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse-exercises"><i class="fa fa-check"></i>tidyverse Exercises</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#exercise-0"><i class="fa fa-check"></i>Exercise 0</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#exercise-1-2"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#exercise-2-2"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#exercise-3-1"><i class="fa fa-check"></i>Exercise 3</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#exercise-4"><i class="fa fa-check"></i>Exercise 4</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html"><i class="fa fa-check"></i>data.table</a><ul>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#basics"><i class="fa fa-check"></i>Basics</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#grouped-operations"><i class="fa fa-check"></i>Grouped operations</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#faster"><i class="fa fa-check"></i>Faster!</a><ul>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#joins"><i class="fa fa-check"></i>Joins</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#group-by"><i class="fa fa-check"></i>Group by</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#string-matching"><i class="fa fa-check"></i>String matching</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#reading-files"><i class="fa fa-check"></i>Reading files</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#more-speed"><i class="fa fa-check"></i>More speed</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#pipe-with-data.table"><i class="fa fa-check"></i>Pipe with data.table</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#summary-1"><i class="fa fa-check"></i>Summary</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#faster-dplyr-alternatives"><i class="fa fa-check"></i>Faster dplyr alternatives</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#data.table-exercises"><i class="fa fa-check"></i>data.table Exercises</a><ul>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#exercise-0-1"><i class="fa fa-check"></i>Exercise 0</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#exercise-1-3"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="data_table.html"><a href="data_table.html#exercise-2-3"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Part II: Programming</b></span></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i>Basics</a><ul>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#r-objects"><i class="fa fa-check"></i>R Objects</a><ul>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#object-inspection-exploration"><i class="fa fa-check"></i>Object Inspection &amp; Exploration</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#methods"><i class="fa fa-check"></i>Methods</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#s4-classes"><i class="fa fa-check"></i>S4 classes</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#others"><i class="fa fa-check"></i>Others</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#inspecting-functions"><i class="fa fa-check"></i>Inspecting Functions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#help-files"><i class="fa fa-check"></i>Help Files</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#objects-exercises"><i class="fa fa-check"></i>Objects Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html"><i class="fa fa-check"></i>Iterative Programming</a><ul>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#for-loops"><i class="fa fa-check"></i>For loops</a><ul>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#a-slight-speed-gain"><i class="fa fa-check"></i>A slight speed gain</a></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#while-alternative"><i class="fa fa-check"></i>While alternative</a></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#loops-summary"><i class="fa fa-check"></i>Loops summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#implicit-loops"><i class="fa fa-check"></i>Implicit Loops</a><ul>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#apply-family"><i class="fa fa-check"></i>apply family</a></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#apply-functions"><i class="fa fa-check"></i>Apply functions</a></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#purrr"><i class="fa fa-check"></i>purrr</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#looping-with-lists"><i class="fa fa-check"></i>Looping with lists</a></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#iterative-programming-exercises"><i class="fa fa-check"></i>Iterative Programming Exercises</a><ul>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#exercise-1-4"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#exercise-2-4"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="iterative.html"><a href="iterative.html#exercise-3-2"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i>Writing Functions</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#a-starting-point"><i class="fa fa-check"></i>A starting point</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#dry"><i class="fa fa-check"></i>DRY</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#conditionals"><i class="fa fa-check"></i>Conditionals</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#anonymous-functions"><i class="fa fa-check"></i>Anonymous functions</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#writing-functions-exercises"><i class="fa fa-check"></i>Writing Functions Exercises</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#excercise-1-1"><i class="fa fa-check"></i>Excercise 1</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#excercise-1b"><i class="fa fa-check"></i>Excercise 1b</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-2-5"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html"><i class="fa fa-check"></i>More</a><ul>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#code-style"><i class="fa fa-check"></i>Code Style</a><ul>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#why-does-your-code-exist"><i class="fa fa-check"></i>Why does your code exist?</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#assignment"><i class="fa fa-check"></i>Assignment</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#code-length"><i class="fa fa-check"></i>Code length</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#spacing"><i class="fa fa-check"></i>Spacing</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#naming-things"><i class="fa fa-check"></i>Naming things</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#other-1"><i class="fa fa-check"></i>Other</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#vectorization"><i class="fa fa-check"></i>Vectorization</a><ul>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#boolean-indexing"><i class="fa fa-check"></i>Boolean Indexing</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#vectorized-operations"><i class="fa fa-check"></i>Vectorized operations</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#regular-expressions"><i class="fa fa-check"></i>Regular Expressions</a><ul>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#typical-uses"><i class="fa fa-check"></i>Typical Uses</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#code-style-exercises"><i class="fa fa-check"></i>Code Style Exercises</a><ul>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#exercise-1-5"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#exercise-2-6"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#vectorization-exercises"><i class="fa fa-check"></i>Vectorization Exercises</a><ul>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#exercise-1-6"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#exercise-2-7"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#regex-exercises"><i class="fa fa-check"></i>Regex Exercises</a><ul>
<li class="chapter" data-level="" data-path="more.html"><a href="more.html#exercise-1-7"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Part III: Modeling</b></span></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html"><i class="fa fa-check"></i>Model Exploration</a><ul>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#model-taxonomy"><i class="fa fa-check"></i>Model Taxonomy</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#linear-models"><i class="fa fa-check"></i>Linear models</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#estimation"><i class="fa fa-check"></i>Estimation</a><ul>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#loss"><i class="fa fa-check"></i>Loss</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#optimization"><i class="fa fa-check"></i>Optimization</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#fitting-models"><i class="fa fa-check"></i>Fitting Models</a><ul>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#using-matrices"><i class="fa fa-check"></i>Using matrices</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#summarizing-models"><i class="fa fa-check"></i>Summarizing Models</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#variable-transformations"><i class="fa fa-check"></i>Variable Transformations</a><ul>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#numeric-variables"><i class="fa fa-check"></i>Numeric variables</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#categorical-variables"><i class="fa fa-check"></i>Categorical variables</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#scales-indices-and-dimension-reduction"><i class="fa fa-check"></i>Scales, indices, and dimension reduction</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#dont-discretize"><i class="fa fa-check"></i>Don’t discretize</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#variable-importance"><i class="fa fa-check"></i>Variable Importance</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#extracting-output"><i class="fa fa-check"></i>Extracting Output</a><ul>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#package-support"><i class="fa fa-check"></i>Package support</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#visualization"><i class="fa fa-check"></i>Visualization</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#extensions-to-the-standard-linear-model"><i class="fa fa-check"></i>Extensions to the Standard Linear Model</a><ul>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#different-types-of-targets"><i class="fa fa-check"></i>Different types of targets</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#correlated-data"><i class="fa fa-check"></i>Correlated data</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#other-extensions"><i class="fa fa-check"></i>Other extensions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#model-exploration-summary"><i class="fa fa-check"></i>Model Exploration Summary</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#model-exploration-exercises"><i class="fa fa-check"></i>Model Exploration Exercises</a><ul>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#exercise-1-8"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#exercise-2-8"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="models.html"><a href="models.html#exercise-3-3"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html"><i class="fa fa-check"></i>Model Criticism</a><ul>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#model-fit"><i class="fa fa-check"></i>Model Fit</a><ul>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#standard-linear-model"><i class="fa fa-check"></i>Standard linear model</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#beyond-ols"><i class="fa fa-check"></i>Beyond OLS</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#classification"><i class="fa fa-check"></i>Classification</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#model-assumptions"><i class="fa fa-check"></i>Model Assumptions</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#predictive-performance"><i class="fa fa-check"></i>Predictive Performance</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#model-comparison"><i class="fa fa-check"></i>Model Comparison</a><ul>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#example-additional-covariates"><i class="fa fa-check"></i>Example: Additional covariates</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#example-interactions"><i class="fa fa-check"></i>Example: Interactions</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#example-additive-models"><i class="fa fa-check"></i>Example: Additive Models</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#model-averaging"><i class="fa fa-check"></i>Model Averaging</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#model-criticism-summary"><i class="fa fa-check"></i>Model Criticism Summary</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#model-criticism-exercises"><i class="fa fa-check"></i>Model Criticism Exercises</a><ul>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#exercise-0-2"><i class="fa fa-check"></i>Exercise 0</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#exercise-1-9"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="model_criticism.html"><a href="model_criticism.html#exercise-2-9"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html"><i class="fa fa-check"></i>Machine Learning</a><ul>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#concepts"><i class="fa fa-check"></i>Concepts</a><ul>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#loss-1"><i class="fa fa-check"></i>Loss</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#bias-variance-tradeoff"><i class="fa fa-check"></i>Bias-variance Tradeoff</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#regularization"><i class="fa fa-check"></i>Regularization</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#cross-validation"><i class="fa fa-check"></i>Cross-validation</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#optimization-1"><i class="fa fa-check"></i>Optimization</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#tuning-parameters"><i class="fa fa-check"></i>Tuning parameters</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#techniques"><i class="fa fa-check"></i>Techniques</a><ul>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#regularized-regression"><i class="fa fa-check"></i>Regularized regression</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#random-forests"><i class="fa fa-check"></i>Random Forests</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#neural-networks"><i class="fa fa-check"></i>Neural Networks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#interpreting-the-black-box"><i class="fa fa-check"></i>Interpreting the black box</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#machine-learning-summary"><i class="fa fa-check"></i>Machine Learning Summary</a></li>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#machine-learning-exercises"><i class="fa fa-check"></i>Machine Learning Exercises</a><ul>
<li class="chapter" data-level="" data-path="ml.html"><a href="ml.html#exercise-1-10"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Part IV: Visualization</b></span></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i>ggplot2</a><ul>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#layers"><i class="fa fa-check"></i>Layers</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#piping"><i class="fa fa-check"></i>Piping</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#aesthetics"><i class="fa fa-check"></i>Aesthetics</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#geoms"><i class="fa fa-check"></i>Geoms</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#examples"><i class="fa fa-check"></i>Examples</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#stats"><i class="fa fa-check"></i>Stats</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#scales"><i class="fa fa-check"></i>Scales</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#facets"><i class="fa fa-check"></i>Facets</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#multiple-plots"><i class="fa fa-check"></i>Multiple plots</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#fine-control"><i class="fa fa-check"></i>Fine control</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#themes"><i class="fa fa-check"></i>Themes</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#extensions"><i class="fa fa-check"></i>Extensions</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#python-1"><i class="fa fa-check"></i>Python</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#summary-ggplot2"><i class="fa fa-check"></i>Summary ggplot2</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-exercises"><i class="fa fa-check"></i>ggplot2 Exercises</a><ul>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#exercise-0-3"><i class="fa fa-check"></i>Exercise 0</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#exercise-1-11"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#exercise-2-10"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html"><i class="fa fa-check"></i>Interactive Visualization</a><ul>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#packages"><i class="fa fa-check"></i>Packages</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#piping-for-visualization"><i class="fa fa-check"></i>Piping for Visualization</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#htmlwidgets"><i class="fa fa-check"></i>htmlwidgets</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#plotly"><i class="fa fa-check"></i>Plotly</a><ul>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#modes"><i class="fa fa-check"></i>Modes</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#ggplotly"><i class="fa fa-check"></i>ggplotly</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#highcharter"><i class="fa fa-check"></i>Highcharter</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#graph-networks"><i class="fa fa-check"></i>Graph networks</a><ul>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#visnetwork"><i class="fa fa-check"></i>visNetwork</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#sigmajs"><i class="fa fa-check"></i>sigmajs</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#plotly-1"><i class="fa fa-check"></i>Plotly</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#leaflet"><i class="fa fa-check"></i>leaflet</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#dt"><i class="fa fa-check"></i>DT</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#shiny"><i class="fa fa-check"></i>Shiny</a><ul>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#dash"><i class="fa fa-check"></i>Dash</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#interactive-and-visual-data-exploration"><i class="fa fa-check"></i>Interactive and Visual Data Exploration</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#interactive-visualization-exercises"><i class="fa fa-check"></i>Interactive Visualization Exercises</a><ul>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#exercise-0-4"><i class="fa fa-check"></i>Exercise 0</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#exercise-1-12"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#exercise-2-11"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="interactive.html"><a href="interactive.html#exercise-3-4"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html"><i class="fa fa-check"></i>Thinking Visually</a><ul>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#information"><i class="fa fa-check"></i>Information</a><ul>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#your-audience-isnt-dumb"><i class="fa fa-check"></i>Your audience isn’t dumb</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#clarity-is-key"><i class="fa fa-check"></i>Clarity is key</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#avoid-clutter"><i class="fa fa-check"></i>Avoid clutter</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#color-isnt-optional"><i class="fa fa-check"></i>Color isn’t optional</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#think-interactively"><i class="fa fa-check"></i>Think interactively</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#color"><i class="fa fa-check"></i>Color</a><ul>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#viridis"><i class="fa fa-check"></i>Viridis</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#scientific-colors"><i class="fa fa-check"></i>Scientific colors</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#rcolorbrewer"><i class="fa fa-check"></i>RColorBrewer</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#contrast"><i class="fa fa-check"></i>Contrast</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#scaling-size"><i class="fa fa-check"></i>Scaling Size</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#transparency"><i class="fa fa-check"></i>Transparency</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#accessibility"><i class="fa fa-check"></i>Accessibility</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#file-types"><i class="fa fa-check"></i>File Types</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#summary-2"><i class="fa fa-check"></i>Summary</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#a-casual-list-of-things-to-avoid"><i class="fa fa-check"></i>A casual list of things to avoid</a><ul>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#pie"><i class="fa fa-check"></i>Pie</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#histograms"><i class="fa fa-check"></i>Histograms</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#using-3d-without-adding-any-communicative-value"><i class="fa fa-check"></i>Using 3D without adding any communicative value</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#using-too-many-colors"><i class="fa fa-check"></i>Using too many colors</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#using-valenced-colors-when-data-isnt-applicable"><i class="fa fa-check"></i>Using valenced colors when data isn’t applicable</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#showing-maps-that-just-display-population"><i class="fa fa-check"></i>Showing maps that just display population</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#biplots"><i class="fa fa-check"></i>Biplots</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#thinking-visually-exercises"><i class="fa fa-check"></i>Thinking Visually Exercises</a><ul>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#exercise-1-13"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#exercise-2-12"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="thinking_vis.html"><a href="thinking_vis.html#thinking-exercises-2"><i class="fa fa-check"></i>Thinking exercises</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Wrap-up</b></span></li>
<li class="chapter" data-level="" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i>Summary</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li class='after'">
   <a href="https://m-clark.github.io/" aria-label='Author Website Link'>
      <img src="img/mc_logo.png" style="width:25%; padding:0px 0; display:block; margin: 0 auto;" alt="MC logo">
   </a>
</li>
<li class='after'">
   <div style='text-align:center'>
      <a href="https://github.com/m-clark/" aria-label='GitHub Link'>
         <i class="fab fa-github fa-2x" aria-hidden="true"></i>
      </a>
   </div>
</li>
<li class='after'">
   <div style='text-align:center'>
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" aria-label="Creative commons CCBYSA link">
         <i class="fab fa-creative-commons fa-lg"></i> 
         <i class="fab fa-creative-commons-by fa-lg"></i> 
         <i class="fab fa-creative-commons-sa fa-lg"></i>
      </a>
   </div>
</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Processing &amp; Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="writing-functions" class="section level1">
<h1>Writing Functions</h1>
<div style="text-align: center;">
<p><i class="fas fa-code fa-5x" ></i></p>
</div>
<p>You can’t do anything in R without using functions, but have you ever written your own? Why would you?</p>
<ul>
<li>Efficiency</li>
<li>Customized functionality</li>
<li>Reproducibility</li>
<li>Extend the work that’s already been done</li>
</ul>
<p>There are many benefits to writing your own functions, and it’s actually easy to do. Once you get the basic concept down, you’ll likely find yourself using your own functions more and more.</p>
<div id="a-starting-point" class="section level2">
<h2>A starting point</h2>
<p>Let’s assume you want to calculate the mean, standard deviation, and number of missing values for a variable, called <code>myvar</code>. We could do something like the following</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="functions.html#cb251-1"></a><span class="kw">mean</span>(myvar)</span>
<span id="cb251-2"><a href="functions.html#cb251-2"></a><span class="kw">sd</span>(myvar)</span>
<span id="cb251-3"><a href="functions.html#cb251-3"></a><span class="kw">sum</span>(<span class="kw">is.na</span>(myvar))</span></code></pre></div>
<p>Now let’s say you need to do it for several variables. Here’s what your custom function could look like. It takes a single input, the variable you want information about, and returns a data frame with that info.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="functions.html#cb252-1"></a>my_summary &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb252-2"><a href="functions.html#cb252-2"></a>  <span class="kw">data.frame</span>(</span>
<span id="cb252-3"><a href="functions.html#cb252-3"></a>    <span class="dt">mean =</span> <span class="kw">mean</span>(x),</span>
<span id="cb252-4"><a href="functions.html#cb252-4"></a>    <span class="dt">sd =</span> <span class="kw">sd</span>(x),</span>
<span id="cb252-5"><a href="functions.html#cb252-5"></a>    <span class="dt">N_missing =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(x))</span>
<span id="cb252-6"><a href="functions.html#cb252-6"></a>  )</span>
<span id="cb252-7"><a href="functions.html#cb252-7"></a>}</span></code></pre></div>
<p>In the above, <code>x</code> is an arbitrary name for an input. You can name it whatever you want, but the more meaningful the better. In R (and other languages) these are called <em>arguments</em>, but these inputs will determine in part what is eventually produced as output by the function.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="functions.html#cb253-1"></a><span class="kw">my_summary</span>(mtcars<span class="op">$</span>mpg)</span></code></pre></div>
<pre><code>      mean       sd N_missing
1 20.09062 6.026948         0</code></pre>
<p>Works fine. However, data typically isn’t that pretty. It often has missing values.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="functions.html#cb255-1"></a><span class="kw">load</span>(<span class="st">&#39;data/gapminder.RData&#39;</span>)</span>
<span id="cb255-2"><a href="functions.html#cb255-2"></a><span class="kw">my_summary</span>(gapminder_<span class="dv">2019</span><span class="op">$</span>lifeExp)</span></code></pre></div>
<pre><code>  mean sd N_missing
1   NA NA       516</code></pre>
<p>If there are actually missing values, we need to set <code>na.rm = TRUE</code> or the <span class="func">mean</span> and <span class="func">sd</span> will return <code>NA</code>. Let’s try it. We can either hard bake it in, as in the initial example, or add an argument to let us control how to handle NAs with our custom function.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="functions.html#cb257-1"></a>my_summary &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb257-2"><a href="functions.html#cb257-2"></a>  <span class="kw">data.frame</span>(</span>
<span id="cb257-3"><a href="functions.html#cb257-3"></a>    <span class="dt">mean =</span> <span class="kw">mean</span>(x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb257-4"><a href="functions.html#cb257-4"></a>    <span class="dt">sd =</span> <span class="kw">sd</span>(x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb257-5"><a href="functions.html#cb257-5"></a>    <span class="dt">N_missing =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(x))</span>
<span id="cb257-6"><a href="functions.html#cb257-6"></a>  )</span>
<span id="cb257-7"><a href="functions.html#cb257-7"></a>}</span>
<span id="cb257-8"><a href="functions.html#cb257-8"></a></span>
<span id="cb257-9"><a href="functions.html#cb257-9"></a></span>
<span id="cb257-10"><a href="functions.html#cb257-10"></a>my_summary_na &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">remove_na =</span> <span class="ot">TRUE</span>) {</span>
<span id="cb257-11"><a href="functions.html#cb257-11"></a>  <span class="kw">data.frame</span>(</span>
<span id="cb257-12"><a href="functions.html#cb257-12"></a>    <span class="dt">mean =</span> <span class="kw">mean</span>(x, <span class="dt">na.rm =</span> remove_na),</span>
<span id="cb257-13"><a href="functions.html#cb257-13"></a>    <span class="dt">sd =</span> <span class="kw">sd</span>(x, <span class="dt">na.rm =</span> remove_na),</span>
<span id="cb257-14"><a href="functions.html#cb257-14"></a>    <span class="dt">N_missing =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(x))</span>
<span id="cb257-15"><a href="functions.html#cb257-15"></a>  )</span>
<span id="cb257-16"><a href="functions.html#cb257-16"></a>}</span>
<span id="cb257-17"><a href="functions.html#cb257-17"></a></span>
<span id="cb257-18"><a href="functions.html#cb257-18"></a></span>
<span id="cb257-19"><a href="functions.html#cb257-19"></a><span class="kw">my_summary</span>(gapminder_<span class="dv">2019</span><span class="op">$</span>lifeExp)</span></code></pre></div>
<pre><code>      mean       sd N_missing
1 43.13218 16.31355       516</code></pre>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="functions.html#cb259-1"></a><span class="kw">my_summary_na</span>(gapminder_<span class="dv">2019</span><span class="op">$</span>lifeExp, <span class="dt">remove_na =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>  mean sd N_missing
1   NA NA       516</code></pre>
<p>Seems to work fine. Let’s add how many total observations there are.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="functions.html#cb261-1"></a>my_summary &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb261-2"><a href="functions.html#cb261-2"></a>  <span class="co"># create an arbitrarily named object with the summary information</span></span>
<span id="cb261-3"><a href="functions.html#cb261-3"></a>  summary_data =<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb261-4"><a href="functions.html#cb261-4"></a>    <span class="dt">mean =</span> <span class="kw">mean</span>(x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb261-5"><a href="functions.html#cb261-5"></a>    <span class="dt">sd =</span> <span class="kw">sd</span>(x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb261-6"><a href="functions.html#cb261-6"></a>    <span class="dt">N_total =</span> <span class="kw">length</span>(x),</span>
<span id="cb261-7"><a href="functions.html#cb261-7"></a>    <span class="dt">N_missing =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(x))</span>
<span id="cb261-8"><a href="functions.html#cb261-8"></a>  )</span>
<span id="cb261-9"><a href="functions.html#cb261-9"></a>  </span>
<span id="cb261-10"><a href="functions.html#cb261-10"></a>  <span class="co"># return the result!</span></span>
<span id="cb261-11"><a href="functions.html#cb261-11"></a>  summary_data       </span>
<span id="cb261-12"><a href="functions.html#cb261-12"></a>}</span></code></pre></div>
<p>That was easy! Let’s try it.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="functions.html#cb262-1"></a><span class="kw">my_summary</span>(gapminder_<span class="dv">2019</span><span class="op">$</span>lifeExp)</span></code></pre></div>
<pre><code>      mean       sd N_total N_missing
1 43.13218 16.31355   40953       516</code></pre>
<p>Now let’s do it for every column! We’ve used the <span class="func">map</span> function before, now let’s use a variant that will return a data frame.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="functions.html#cb264-1"></a>gapminder_<span class="dv">2019</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb264-2"><a href="functions.html#cb264-2"></a><span class="st">  </span><span class="kw">select_if</span>(is.numeric) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb264-3"><a href="functions.html#cb264-3"></a><span class="st">  </span><span class="kw">map_dfr</span>(my_summary, <span class="dt">.id =</span> <span class="st">&#39;variable&#39;</span>)</span></code></pre></div>
<pre><code>    variable         mean           sd N_total N_missing
1       year 1.909000e+03 6.321997e+01   40953         0
2    lifeExp 4.313218e+01 1.631355e+01   40953       516
3        pop 1.353928e+07 6.565653e+07   40953         0
4  gdpPercap 4.591026e+03 1.016210e+04   40953         0
5 giniPercap 4.005331e+01 9.102757e+00   40953         0</code></pre>
<p>The <span class="func">map_dfr</span> function is just like our previous usage in the <a href="iterative.html#iterative-programming">iterative programming</a> section, just that it will create mini-data.frames then row-bind them together.</p>
<p>This shows that writing the first part of any function can be straightforward. Then, once in place, you can usually add functionality without too much trouble. Eventually you could have something very complicated, but which will make sense to you because you built it from the ground up.</p>
<p>Keep in mind as you start out that your initial decisions to make are:</p>
<ul>
<li>What are the inputs (<span class="emph">arguments</span>) to the function?</li>
<li>What is the <span class="emph">value</span> to be returned?</li>
</ul>
<p>When you think about writing a function, just write the code that can do it first. The goal is then to generalize beyond that single use case. RStudio even has a shortcut to help you get started. Consider our starting point. Highlight the code, hit Ctrl/Cmd + Shft + X, then give it a name.</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="functions.html#cb266-1"></a><span class="kw">mean</span>(myvar)</span>
<span id="cb266-2"><a href="functions.html#cb266-2"></a><span class="kw">sd</span>(myvar)</span>
<span id="cb266-3"><a href="functions.html#cb266-3"></a><span class="kw">sum</span>(<span class="kw">is.na</span>(myvar))</span></code></pre></div>
<p>It should look something like this.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="functions.html#cb267-1"></a>test_fun &lt;-<span class="st"> </span><span class="cf">function</span>(myvar) {</span>
<span id="cb267-2"><a href="functions.html#cb267-2"></a>  <span class="kw">mean</span>(myvar)</span>
<span id="cb267-3"><a href="functions.html#cb267-3"></a>  <span class="kw">sd</span>(myvar)</span>
<span id="cb267-4"><a href="functions.html#cb267-4"></a>  <span class="kw">sum</span>(<span class="kw">is.na</span>(myvar))</span>
<span id="cb267-5"><a href="functions.html#cb267-5"></a>}</span></code></pre></div>
<p>RStudio could tell that you would need at least one input <code>myvar</code>, but beyond that, you’re now on your way to tweaking the function as you see fit.</p>
<p>Note that what goes in and what comes out could be anything, even nothing!</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="functions.html#cb268-1"></a>two &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb268-2"><a href="functions.html#cb268-2"></a>  <span class="dv">2</span></span>
<span id="cb268-3"><a href="functions.html#cb268-3"></a>}</span>
<span id="cb268-4"><a href="functions.html#cb268-4"></a></span>
<span id="cb268-5"><a href="functions.html#cb268-5"></a><span class="kw">two</span>()</span></code></pre></div>
<pre><code>[1] 2</code></pre>
<p>Or even another function!</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="functions.html#cb270-1"></a>center &lt;-<span class="st"> </span><span class="cf">function</span>(type) {</span>
<span id="cb270-2"><a href="functions.html#cb270-2"></a>  <span class="cf">if</span> (type <span class="op">==</span><span class="st"> &#39;mean&#39;</span>) {</span>
<span id="cb270-3"><a href="functions.html#cb270-3"></a>    mean</span>
<span id="cb270-4"><a href="functions.html#cb270-4"></a>  } </span>
<span id="cb270-5"><a href="functions.html#cb270-5"></a>  <span class="cf">else</span> {</span>
<span id="cb270-6"><a href="functions.html#cb270-6"></a>    median</span>
<span id="cb270-7"><a href="functions.html#cb270-7"></a>  }</span>
<span id="cb270-8"><a href="functions.html#cb270-8"></a>}</span>
<span id="cb270-9"><a href="functions.html#cb270-9"></a></span>
<span id="cb270-10"><a href="functions.html#cb270-10"></a><span class="kw">center</span>(<span class="dt">type =</span> <span class="st">&#39;mean&#39;</span>)</span></code></pre></div>
<pre><code>function (x, ...) 
UseMethod(&quot;mean&quot;)
&lt;bytecode: 0x7f8b6eb11218&gt;
&lt;environment: namespace:base&gt;</code></pre>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="functions.html#cb272-1"></a>myfun =<span class="st"> </span><span class="kw">center</span>(<span class="dt">type =</span> <span class="st">&#39;mean&#39;</span>)</span>
<span id="cb272-2"><a href="functions.html#cb272-2"></a></span>
<span id="cb272-3"><a href="functions.html#cb272-3"></a><span class="kw">myfun</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="functions.html#cb274-1"></a>myfun =<span class="st"> </span><span class="kw">center</span>(<span class="dt">type =</span> <span class="st">&#39;median&#39;</span>)</span>
<span id="cb274-2"><a href="functions.html#cb274-2"></a></span>
<span id="cb274-3"><a href="functions.html#cb274-3"></a><span class="kw">myfun</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)</span></code></pre></div>
<pre><code>[1] 2.5</code></pre>
<p>We can also set default values for the inputs.</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="functions.html#cb276-1"></a>hi &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">name =</span> <span class="st">&#39;Beyoncé&#39;</span>) {</span>
<span id="cb276-2"><a href="functions.html#cb276-2"></a>  <span class="kw">paste0</span>(<span class="st">&#39;Hi &#39;</span>, name, <span class="st">&#39;!&#39;</span>)</span>
<span id="cb276-3"><a href="functions.html#cb276-3"></a>}</span>
<span id="cb276-4"><a href="functions.html#cb276-4"></a></span>
<span id="cb276-5"><a href="functions.html#cb276-5"></a><span class="kw">hi</span>()</span></code></pre></div>
<pre><code>[1] &quot;Hi Beyoncé!&quot;</code></pre>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="functions.html#cb278-1"></a><span class="kw">hi</span>(<span class="dt">name =</span> <span class="st">&#39;Jay-Z&#39;</span>)</span></code></pre></div>
<pre><code>[1] &quot;Hi Jay-Z!&quot;</code></pre>
<p>If you are working within an RStudio project, it would be a good idea to create a folder for your functions and save each as their own script. When you need the function just use the following:</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="functions.html#cb280-1"></a><span class="kw">source</span>(<span class="st">&#39;my_functions/awesome_func.R&#39;</span>)</span></code></pre></div>
<p>This would make it easy to even create your own personal package with the functions you create.</p>
<p>However you go about creating a function and for whatever purpose, try to make a clear decision at the beginning</p>
<ul>
<li>What is the (specific) goal of your function?<br />
</li>
<li>What is the minimum needed to obtain that goal?</li>
</ul>
<br>
<div class="note">
<p>There is even a keyboard shortcut to create R style documentation automatically!</p>
<div style="text-align:center; font-family:&quot;Roboto Mono&quot;">
Cmd/Ctrl + Option/Alt + Shift + R
</div>
<p><br></p>
<p><img class='img-note' src="img/R.ico" style="display:block; margin: 0 auto;"></p>
</div>
</div>
<div id="dry" class="section level2">
<h2>DRY</h2>
<p>An oft-quoted mantra in programming is <em><strong>D</strong>on’t <strong>R</strong>epeat <strong>Y</strong>ourself</em>. One context regards iterative programming, where we would rather write one line of code than one-hundred. More generally though, we would like to gain efficiency where possible. A good rule of thumb is, if you are writing the same set of code more than twice, you should write a function to do it instead.</p>
<p>Consider the following example, where we want to subset the data given a set of conditions. Given the cylinder, engine displacement, and mileage, we’ll get different parts of the data.</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="functions.html#cb281-1"></a>good_mileage_displ_low_cyl_<span class="dv">4</span>  =<span class="st"> </span><span class="kw">if_else</span>(cyl <span class="op">==</span><span class="st"> </span><span class="dv">4</span> <span class="op">&amp;</span><span class="st"> </span>displ <span class="op">&lt;</span><span class="st"> </span><span class="kw">mean</span>(displ) <span class="op">&amp;</span><span class="st"> </span>hwy <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span>, <span class="st">&#39;yes&#39;</span>, <span class="st">&#39;no&#39;</span>)</span>
<span id="cb281-2"><a href="functions.html#cb281-2"></a>good_mileage_displ_low_cyl_<span class="dv">6</span>  =<span class="st"> </span><span class="kw">if_else</span>(cyl <span class="op">==</span><span class="st"> </span><span class="dv">6</span> <span class="op">&amp;</span><span class="st"> </span>displ <span class="op">&lt;</span><span class="st"> </span><span class="kw">mean</span>(displ) <span class="op">&amp;</span><span class="st"> </span>hwy <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span>, <span class="st">&#39;yes&#39;</span>, <span class="st">&#39;no&#39;</span>)</span>
<span id="cb281-3"><a href="functions.html#cb281-3"></a>good_mileage_displ_low_cyl_<span class="dv">8</span>  =<span class="st"> </span><span class="kw">if_else</span>(cyl <span class="op">==</span><span class="st"> </span><span class="dv">8</span> <span class="op">&amp;</span><span class="st"> </span>displ <span class="op">&lt;</span><span class="st"> </span><span class="kw">mean</span>(displ) <span class="op">&amp;</span><span class="st"> </span>hwy <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span>, <span class="st">&#39;yes&#39;</span>, <span class="st">&#39;no&#39;</span>)</span>
<span id="cb281-4"><a href="functions.html#cb281-4"></a>good_mileage_displ_high_cyl_<span class="dv">4</span> =<span class="st"> </span><span class="kw">if_else</span>(cyl <span class="op">==</span><span class="st"> </span><span class="dv">4</span> <span class="op">&amp;</span><span class="st"> </span>displ <span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(displ) <span class="op">&amp;</span><span class="st"> </span>hwy <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span>, <span class="st">&#39;yes&#39;</span>, <span class="st">&#39;no&#39;</span>)</span>
<span id="cb281-5"><a href="functions.html#cb281-5"></a>good_mileage_displ_high_cyl_<span class="dv">6</span> =<span class="st"> </span><span class="kw">if_else</span>(cyl <span class="op">==</span><span class="st"> </span><span class="dv">6</span> <span class="op">&amp;</span><span class="st"> </span>displ <span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(displ) <span class="op">&amp;</span><span class="st"> </span>hwy <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span>, <span class="st">&#39;yes&#39;</span>, <span class="st">&#39;no&#39;</span>)</span>
<span id="cb281-6"><a href="functions.html#cb281-6"></a>good_mileage_displ_high_cyl_<span class="dv">8</span> =<span class="st"> </span><span class="kw">if_else</span>(cyl <span class="op">==</span><span class="st"> </span><span class="dv">8</span> <span class="op">&amp;</span><span class="st"> </span>displ <span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(displ) <span class="op">&amp;</span><span class="st"> </span>hwy <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span>, <span class="st">&#39;yes&#39;</span>, <span class="st">&#39;no&#39;</span>)</span></code></pre></div>
<p>It was tedious, but that’s not much code. But now consider- what if you want to change the mpg cutoff? The mean to median? Something else? You have to change all of it. Screw that- let’s write a function instead! What kinds of inputs will we need?</p>
<ul>
<li>cyl: Which cylinder type we want</li>
<li>mpg_cutoff: The cutoff for ‘good’ mileage</li>
<li>displ_fun: Whether the displacement to be based on the mean or something else</li>
<li>displ_low: Whether we are interested in low or high displacement vehicles</li>
<li>cls: the class of the vehicle (e.g. compact or suv)</li>
</ul>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="functions.html#cb282-1"></a>good_mileage &lt;-<span class="st"> </span><span class="cf">function</span>(</span>
<span id="cb282-2"><a href="functions.html#cb282-2"></a>  <span class="dt">cylinder =</span> <span class="dv">4</span>,</span>
<span id="cb282-3"><a href="functions.html#cb282-3"></a>  <span class="dt">mpg_cutoff =</span> <span class="dv">30</span>,</span>
<span id="cb282-4"><a href="functions.html#cb282-4"></a>  <span class="dt">displ_fun =</span> mean,</span>
<span id="cb282-5"><a href="functions.html#cb282-5"></a>  <span class="dt">displ_low =</span> <span class="ot">TRUE</span>,</span>
<span id="cb282-6"><a href="functions.html#cb282-6"></a>  <span class="dt">cls =</span> <span class="st">&#39;compact&#39;</span></span>
<span id="cb282-7"><a href="functions.html#cb282-7"></a>) {</span>
<span id="cb282-8"><a href="functions.html#cb282-8"></a>  </span>
<span id="cb282-9"><a href="functions.html#cb282-9"></a>  <span class="cf">if</span> (displ_low <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) {              <span class="co"># condition to check, if it holds,</span></span>
<span id="cb282-10"><a href="functions.html#cb282-10"></a>    result &lt;-<span class="st"> </span>mpg <span class="op">%&gt;%</span><span class="st">                   </span><span class="co"># filter data given the arguments</span></span>
<span id="cb282-11"><a href="functions.html#cb282-11"></a><span class="st">      </span><span class="kw">filter</span>(cyl <span class="op">==</span><span class="st"> </span>cylinder,</span>
<span id="cb282-12"><a href="functions.html#cb282-12"></a>             displ <span class="op">&lt;=</span><span class="st"> </span><span class="kw">displ_fun</span>(displ),</span>
<span id="cb282-13"><a href="functions.html#cb282-13"></a>             hwy <span class="op">&gt;=</span><span class="st"> </span>mpg_cutoff,</span>
<span id="cb282-14"><a href="functions.html#cb282-14"></a>             class <span class="op">==</span><span class="st"> </span>cls)</span>
<span id="cb282-15"><a href="functions.html#cb282-15"></a>  } </span>
<span id="cb282-16"><a href="functions.html#cb282-16"></a>  <span class="cf">else</span> {                                <span class="co"># if the condition doesn&#39;t hold, filter </span></span>
<span id="cb282-17"><a href="functions.html#cb282-17"></a>    result &lt;-<span class="st"> </span>mpg <span class="op">%&gt;%</span><span class="st">                   </span><span class="co"># the data this way instead</span></span>
<span id="cb282-18"><a href="functions.html#cb282-18"></a><span class="st">      </span><span class="kw">filter</span>(</span>
<span id="cb282-19"><a href="functions.html#cb282-19"></a>        cyl <span class="op">==</span><span class="st"> </span>cylinder,</span>
<span id="cb282-20"><a href="functions.html#cb282-20"></a>        displ <span class="op">&gt;=</span><span class="st"> </span><span class="kw">displ_fun</span>(displ),      <span class="co"># the only change is here</span></span>
<span id="cb282-21"><a href="functions.html#cb282-21"></a>        hwy <span class="op">&gt;=</span><span class="st"> </span>mpg_cutoff,</span>
<span id="cb282-22"><a href="functions.html#cb282-22"></a>        class <span class="op">==</span><span class="st"> </span>cls</span>
<span id="cb282-23"><a href="functions.html#cb282-23"></a>      )</span>
<span id="cb282-24"><a href="functions.html#cb282-24"></a>  }</span>
<span id="cb282-25"><a href="functions.html#cb282-25"></a>  </span>
<span id="cb282-26"><a href="functions.html#cb282-26"></a>  result                                <span class="co"># return the object</span></span>
<span id="cb282-27"><a href="functions.html#cb282-27"></a>}</span></code></pre></div>
<p>So what’s going on here? Not a whole lot really. The function just filters the data to observations that match the input criteria, and returns that result at the end. We also put <em>default values</em> to the arguments, which can be done to your discretion.</p>
</div>
<div id="conditionals" class="section level2">
<h2>Conditionals</h2>
<p>The core of the above function uses a <em>conditional statement</em> using standard <span class="func">if</span>…<span class="func">else</span> structure. The <span class="func">if</span> part determines whether some condition holds. If it does, then proceed to the next step in the brackets. If not, skip to the <span class="func">else</span> part. You may have used the <span class="func">ifelse</span> function in base R, or <span class="pack">dplyr</span>’s <span class="func">if_else</span> as above, which are a short cuts for this approach. We can also add conditional else statements (<span class="func">else if</span>), drop the <span class="func">else</span> part entirely, nest conditionals within other conditionals, etc. Like loops, conditional statements look very similar across all programming languages.</p>
<p>JavaScript:</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb283-1"><a href="functions.html#cb283-1"></a><span class="cf">if</span> (<span class="va">Math</span>.<span class="at">random</span>() <span class="op">&lt;</span> <span class="fl">0.5</span>) <span class="op">{</span></span>
<span id="cb283-2"><a href="functions.html#cb283-2"></a>  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;You got Heads!&quot;</span>)</span>
<span id="cb283-3"><a href="functions.html#cb283-3"></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb283-4"><a href="functions.html#cb283-4"></a>  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;You got Tails!&quot;</span>)</span>
<span id="cb283-5"><a href="functions.html#cb283-5"></a><span class="op">}</span></span></code></pre></div>
<p>Python:</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb284-1"><a href="functions.html#cb284-1"></a><span class="cf">if</span> x <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb284-2"><a href="functions.html#cb284-2"></a>  <span class="bu">print</span>(x)</span>
<span id="cb284-3"><a href="functions.html#cb284-3"></a><span class="cf">else</span>:</span>
<span id="cb284-4"><a href="functions.html#cb284-4"></a>  <span class="bu">print</span>(x<span class="op">*</span>x)</span></code></pre></div>
<p>In any case, with our function at the ready, we can now do the things we want to as needed:</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="functions.html#cb285-1"></a><span class="kw">good_mileage</span>(<span class="dt">mpg_cutoff =</span> <span class="dv">40</span>)</span></code></pre></div>
<pre><code># A tibble: 1 x 11
  manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class  
  &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
1 volkswagen   jetta   1.9  1999     4 manual(m5) f        33    44 d     compact</code></pre>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="functions.html#cb287-1"></a><span class="kw">good_mileage</span>(</span>
<span id="cb287-2"><a href="functions.html#cb287-2"></a>  <span class="dt">cylinder =</span> <span class="dv">8</span>,</span>
<span id="cb287-3"><a href="functions.html#cb287-3"></a>  <span class="dt">mpg_cutoff =</span> <span class="dv">15</span>,</span>
<span id="cb287-4"><a href="functions.html#cb287-4"></a>  <span class="dt">displ_low =</span> <span class="ot">FALSE</span>,</span>
<span id="cb287-5"><a href="functions.html#cb287-5"></a>  <span class="dt">cls =</span> <span class="st">&#39;suv&#39;</span></span>
<span id="cb287-6"><a href="functions.html#cb287-6"></a>)</span></code></pre></div>
<pre><code># A tibble: 34 x 11
   manufacturer model              displ  year   cyl trans    drv     cty   hwy fl    class
   &lt;chr&gt;        &lt;chr&gt;              &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
 1 chevrolet    c1500 suburban 2wd   5.3  2008     8 auto(l4) r        14    20 r     suv  
 2 chevrolet    c1500 suburban 2wd   5.3  2008     8 auto(l4) r        11    15 e     suv  
 3 chevrolet    c1500 suburban 2wd   5.3  2008     8 auto(l4) r        14    20 r     suv  
 4 chevrolet    c1500 suburban 2wd   5.7  1999     8 auto(l4) r        13    17 r     suv  
 5 chevrolet    c1500 suburban 2wd   6    2008     8 auto(l4) r        12    17 r     suv  
 6 chevrolet    k1500 tahoe 4wd      5.3  2008     8 auto(l4) 4        14    19 r     suv  
 7 chevrolet    k1500 tahoe 4wd      5.7  1999     8 auto(l4) 4        11    15 r     suv  
 8 chevrolet    k1500 tahoe 4wd      6.5  1999     8 auto(l4) 4        14    17 d     suv  
 9 dodge        durango 4wd          4.7  2008     8 auto(l5) 4        13    17 r     suv  
10 dodge        durango 4wd          4.7  2008     8 auto(l5) 4        13    17 r     suv  
# … with 24 more rows</code></pre>
<p>Let’s extend the functionality by adding a year argument (the only values available are 2008 and 1999).</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="functions.html#cb289-1"></a>good_mileage &lt;-<span class="st"> </span><span class="cf">function</span>(</span>
<span id="cb289-2"><a href="functions.html#cb289-2"></a>  <span class="dt">cylinder =</span> <span class="dv">4</span>,</span>
<span id="cb289-3"><a href="functions.html#cb289-3"></a>  <span class="dt">mpg_cutoff =</span> <span class="dv">30</span>,</span>
<span id="cb289-4"><a href="functions.html#cb289-4"></a>  <span class="dt">displ_fun =</span> mean,</span>
<span id="cb289-5"><a href="functions.html#cb289-5"></a>  <span class="dt">displ_low =</span> <span class="ot">TRUE</span>,</span>
<span id="cb289-6"><a href="functions.html#cb289-6"></a>  <span class="dt">cls =</span> <span class="st">&#39;compact&#39;</span>,</span>
<span id="cb289-7"><a href="functions.html#cb289-7"></a>  <span class="dt">yr =</span> <span class="dv">2008</span></span>
<span id="cb289-8"><a href="functions.html#cb289-8"></a>) {</span>
<span id="cb289-9"><a href="functions.html#cb289-9"></a>  </span>
<span id="cb289-10"><a href="functions.html#cb289-10"></a>  <span class="cf">if</span> (displ_low) {</span>
<span id="cb289-11"><a href="functions.html#cb289-11"></a>    result =<span class="st"> </span>mpg <span class="op">%&gt;%</span></span>
<span id="cb289-12"><a href="functions.html#cb289-12"></a><span class="st">    </span><span class="kw">filter</span>(cyl <span class="op">==</span><span class="st"> </span>cylinder,</span>
<span id="cb289-13"><a href="functions.html#cb289-13"></a>           displ <span class="op">&lt;=</span><span class="st"> </span><span class="kw">displ_fun</span>(displ),</span>
<span id="cb289-14"><a href="functions.html#cb289-14"></a>           hwy <span class="op">&gt;=</span><span class="st"> </span>mpg_cutoff,</span>
<span id="cb289-15"><a href="functions.html#cb289-15"></a>           class <span class="op">==</span><span class="st"> </span>cls,</span>
<span id="cb289-16"><a href="functions.html#cb289-16"></a>           year <span class="op">==</span><span class="st"> </span>yr)</span>
<span id="cb289-17"><a href="functions.html#cb289-17"></a>  } </span>
<span id="cb289-18"><a href="functions.html#cb289-18"></a>  <span class="cf">else</span> {</span>
<span id="cb289-19"><a href="functions.html#cb289-19"></a>    result =<span class="st"> </span>mpg <span class="op">%&gt;%</span></span>
<span id="cb289-20"><a href="functions.html#cb289-20"></a><span class="st">    </span><span class="kw">filter</span>(cyl <span class="op">==</span><span class="st"> </span>cylinder,</span>
<span id="cb289-21"><a href="functions.html#cb289-21"></a>           displ <span class="op">&gt;=</span><span class="st"> </span><span class="kw">displ_fun</span>(displ),</span>
<span id="cb289-22"><a href="functions.html#cb289-22"></a>           hwy <span class="op">&gt;=</span><span class="st"> </span>mpg_cutoff,</span>
<span id="cb289-23"><a href="functions.html#cb289-23"></a>           class <span class="op">==</span><span class="st"> </span>cls,</span>
<span id="cb289-24"><a href="functions.html#cb289-24"></a>           year <span class="op">==</span><span class="st"> </span>yr)</span>
<span id="cb289-25"><a href="functions.html#cb289-25"></a>  }</span>
<span id="cb289-26"><a href="functions.html#cb289-26"></a>  </span>
<span id="cb289-27"><a href="functions.html#cb289-27"></a>  result</span>
<span id="cb289-28"><a href="functions.html#cb289-28"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="functions.html#cb290-1"></a><span class="kw">good_mileage</span>(</span>
<span id="cb290-2"><a href="functions.html#cb290-2"></a>  <span class="dt">cylinder =</span> <span class="dv">8</span>,</span>
<span id="cb290-3"><a href="functions.html#cb290-3"></a>  <span class="dt">mpg_cutoff =</span> <span class="dv">19</span>,</span>
<span id="cb290-4"><a href="functions.html#cb290-4"></a>  <span class="dt">displ_low =</span> <span class="ot">FALSE</span>,</span>
<span id="cb290-5"><a href="functions.html#cb290-5"></a>  <span class="dt">cls =</span> <span class="st">&#39;suv&#39;</span>,</span>
<span id="cb290-6"><a href="functions.html#cb290-6"></a>  <span class="dt">yr =</span> <span class="dv">2008</span></span>
<span id="cb290-7"><a href="functions.html#cb290-7"></a>)</span></code></pre></div>
<pre><code># A tibble: 6 x 11
  manufacturer model              displ  year   cyl trans    drv     cty   hwy fl    class
  &lt;chr&gt;        &lt;chr&gt;              &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
1 chevrolet    c1500 suburban 2wd   5.3  2008     8 auto(l4) r        14    20 r     suv  
2 chevrolet    c1500 suburban 2wd   5.3  2008     8 auto(l4) r        14    20 r     suv  
3 chevrolet    k1500 tahoe 4wd      5.3  2008     8 auto(l4) 4        14    19 r     suv  
4 ford         explorer 4wd         4.6  2008     8 auto(l6) 4        13    19 r     suv  
5 jeep         grand cherokee 4wd   4.7  2008     8 auto(l5) 4        14    19 r     suv  
6 mercury      mountaineer 4wd      4.6  2008     8 auto(l6) 4        13    19 r     suv  </code></pre>
<p>So we now have something that is <em>flexible</em>, <em>reusable</em>, and <em>extensible</em>, and it took less code than writing out the individual lines of code.</p>
</div>
<div id="anonymous-functions" class="section level2">
<h2>Anonymous functions</h2>
<p>Oftentimes we just need a quick and easy function for a one-off application, especially when using apply/map functions. Consider the following two lines of code.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="functions.html#cb292-1"></a><span class="kw">apply</span>(mtcars, <span class="dv">2</span>, sd)</span>
<span id="cb292-2"><a href="functions.html#cb292-2"></a><span class="kw">apply</span>(mtcars, <span class="dv">2</span>, <span class="cf">function</span>(x) x <span class="op">/</span><span class="st"> </span><span class="dv">2</span> )</span></code></pre></div>
<p>The difference between the two is that for the latter, our function didn’t have to be a named object already available. We created a function on the fly just to serve a specific purpose. A function doesn’t exist in base R that just does nothing but divide by two, but since it is simple, we just created it as needed.</p>
<p>To further illustrate this, we’ll create a robust standardization function that uses the median and median absolute deviation rather than the mean and standard deviation.</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="functions.html#cb293-1"></a><span class="co"># some variables have a mad = 0, and so return Inf (x/0) or NaN (0/0)</span></span>
<span id="cb293-2"><a href="functions.html#cb293-2"></a><span class="co"># apply(mtcars, 2, function(x) (x - median(x))/mad(x)) %&gt;% </span></span>
<span id="cb293-3"><a href="functions.html#cb293-3"></a><span class="co">#   head()</span></span>
<span id="cb293-4"><a href="functions.html#cb293-4"></a></span>
<span id="cb293-5"><a href="functions.html#cb293-5"></a>mtcars <span class="op">%&gt;%</span></span>
<span id="cb293-6"><a href="functions.html#cb293-6"></a><span class="st">  </span><span class="kw">map_df</span>(<span class="cf">function</span>(x) (x <span class="op">-</span><span class="st"> </span><span class="kw">median</span>(x))<span class="op">/</span><span class="kw">mad</span>(x))</span></code></pre></div>
<pre><code># A tibble: 32 x 11
       mpg    cyl   disp     hp     drat     wt   qsec    vs    am   gear   carb
     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1  0.333   0     -0.258 -0.169  0.291   -0.919 -0.883   NaN   Inf  0      1.35 
 2  0.333   0     -0.258 -0.169  0.291   -0.587 -0.487   NaN   Inf  0      1.35 
 3  0.665  -0.674 -0.629 -0.389  0.220   -1.31   0.636   Inf   Inf  0     -0.674
 4  0.407   0      0.439 -0.169 -0.873   -0.143  1.22    Inf   NaN -0.674 -0.674
 5 -0.0924  0.674  1.17   0.674 -0.774    0.150 -0.487   NaN   NaN -0.674  0    
 6 -0.203   0      0.204 -0.233 -1.33     0.176  1.77    Inf   NaN -0.674 -0.674
 7 -0.905   0.674  1.17   1.58  -0.689    0.319 -1.32    NaN   NaN -0.674  1.35 
 8  0.961  -0.674 -0.353 -0.791 -0.00710 -0.176  1.62    Inf   NaN  0      0    
 9  0.665  -0.674 -0.395 -0.363  0.319   -0.228  3.67    Inf   NaN  0      0    
10  0       0     -0.204  0      0.319    0.150  0.417   Inf   NaN  0      1.35 
# … with 22 more rows</code></pre>
<p>Even if you don’t use <a href="https://en.wikipedia.org/wiki/Anonymous_function">anonymous functions</a> (sometimes called <em>lambda</em> functions), it’s important to understand them, because you’ll often see other people’s code using them.</p>
<br>
<div class="note">
<p>While it goes beyond the scope of this document at present, I should note that RStudio has a very nice and easy to use debugger. Once you get comfortable writing functions, you can use the debugger to troubleshoot problems that arise, and test new functionality (see the ‘Debug’ menu). In addition, one can profile functions to see what parts are, for example, more memory intensive, or otherwise serve as a bottleneck (see the ‘Profile’ menu). You can use the profiler on any code, not just functions.
<br></p>
<p><img class='img-note' src="img/R.ico" style="display:block; margin: 0 auto;"></p>
</div>
</div>
<div id="writing-functions-exercises" class="section level2">
<h2>Writing Functions Exercises</h2>
<div id="excercise-1-1" class="section level3">
<h3>Excercise 1</h3>
<p>Write a function that takes the log of the sum of two values (i.e. just two single numbers) using the <span class="func">log</span> function. Just remember that within a function, you can write R code just like you normally would.</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="functions.html#cb295-1"></a>log_sum &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) {</span>
<span id="cb295-2"><a href="functions.html#cb295-2"></a>  ?</span>
<span id="cb295-3"><a href="functions.html#cb295-3"></a>}</span></code></pre></div>
</div>
<div id="excercise-1b" class="section level3">
<h3>Excercise 1b</h3>
<p>What happens if the sum of the two numbers is negative? You can’t take a log of a negative value, so it’s an error. How might we deal with this? Try using a conditional to provide an error message using the <span class="func">stop</span> function. The first part is basically identical to the function you just did. But given that result, you will need to check for whether it is negative or not. The message can be whatever you want.</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="functions.html#cb296-1"></a>log_sum &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) {</span>
<span id="cb296-2"><a href="functions.html#cb296-2"></a>  </span>
<span id="cb296-3"><a href="functions.html#cb296-3"></a>  ?</span>
<span id="cb296-4"><a href="functions.html#cb296-4"></a>  </span>
<span id="cb296-5"><a href="functions.html#cb296-5"></a>  <span class="cf">if</span> (? <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb296-6"><a href="functions.html#cb296-6"></a>    <span class="kw">stop</span>(<span class="st">&#39;Your message here.&#39;</span>)</span>
<span id="cb296-7"><a href="functions.html#cb296-7"></a>  } <span class="cf">else</span> {</span>
<span id="cb296-8"><a href="functions.html#cb296-8"></a>    ?</span>
<span id="cb296-9"><a href="functions.html#cb296-9"></a>    <span class="kw">return</span>(your_log_sum_results)    <span class="co"># this is an arbitrary name, change accordingly</span></span>
<span id="cb296-10"><a href="functions.html#cb296-10"></a>  }</span>
<span id="cb296-11"><a href="functions.html#cb296-11"></a>}</span></code></pre></div>
</div>
<div id="exercise-2-5" class="section level3">
<h3>Exercise 2</h3>
<p>Let’s write a function that will take a numeric variable and convert it to a character string of ‘positive’ vs. ‘negative’. We can use <code>if {}... else {}</code> structure, <span class="func">ifelse</span>, or <span class="pack">dplyr</span>::<span class="func">if_else</span>- they all would accomplish this. In this case, the input is a single vector of numbers, and the output will recode any negative value to ‘negative’ and positive values to ‘positive’ (or whatever you want). Here is an example of how we would just do it as a one-off.</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="functions.html#cb297-1"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)  <span class="co"># so you get the exact same &#39;random&#39; result</span></span>
<span id="cb297-2"><a href="functions.html#cb297-2"></a>x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb297-3"><a href="functions.html#cb297-3"></a><span class="kw">if_else</span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>, <span class="st">&quot;negative&quot;</span>, <span class="st">&quot;positive&quot;</span>)</span></code></pre></div>
<p>Now try your hand at writing a function for that.</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="functions.html#cb298-1"></a>pos_neg &lt;-<span class="st"> </span><span class="cf">function</span>(?) {</span>
<span id="cb298-2"><a href="functions.html#cb298-2"></a>  ?</span>
<span id="cb298-3"><a href="functions.html#cb298-3"></a>}</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="iterative.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="more.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["twitter", "facebook", "weibo", "instapaper"],
"google": false,
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"depth": 2,
"scroll_highlight": true
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
