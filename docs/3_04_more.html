<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Data Processing &amp; Visualization</title>
  <meta name="description" content="The focus of this document is on common data processing and exploration techniques in R, especially as a prelude to visualization. Part of the focus will be on the dplyr and tidyverse packages, which enhance and facilitate the sorts of operations that typically arise when dealing with data, including faster I/O and grouped operations. For visualization, the focus will be on using ggplot2 and other packages that allow for interactivity. Exercises may be found in the document as well. In addition, the demonstrations of the data processing section are available in Python via Jupyter notebooks.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Data Processing &amp; Visualization" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://m-clark.github.io/data-processing-and-visualization/" />
  <meta property="og:image" content="https://m-clark.github.io/data-processing-and-visualization/img/nineteeneightyR.png" />
  <meta property="og:description" content="The focus of this document is on common data processing and exploration techniques in R, especially as a prelude to visualization. Part of the focus will be on the dplyr and tidyverse packages, which enhance and facilitate the sorts of operations that typically arise when dealing with data, including faster I/O and grouped operations. For visualization, the focus will be on using ggplot2 and other packages that allow for interactivity. Exercises may be found in the document as well. In addition, the demonstrations of the data processing section are available in Python via Jupyter notebooks." />
  <meta name="github-repo" content="m-clark/data-processing-and-visualization/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Data Processing &amp; Visualization" />
  
  <meta name="twitter:description" content="The focus of this document is on common data processing and exploration techniques in R, especially as a prelude to visualization. Part of the focus will be on the dplyr and tidyverse packages, which enhance and facilitate the sorts of operations that typically arise when dealing with data, including faster I/O and grouped operations. For visualization, the focus will be on using ggplot2 and other packages that allow for interactivity. Exercises may be found in the document as well. In addition, the demonstrations of the data processing section are available in Python via Jupyter notebooks." />
  <meta name="twitter:image" content="https://m-clark.github.io/data-processing-and-visualization/img/nineteeneightyR.png" />



<meta name="date" content="2018-07-22">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  <link rel="shortcut icon" href="img/R.ico" type="image/x-icon">
<link rel="prev" href="3_03_functions.html">
<link rel="next" href="999_summary.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.7.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotlyjs-1.29.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotlyjs-1.29.2/plotly-latest.min.js"></script>
<link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.1/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.4/visNetwork.js"></script>
<script src="libs/proj4js-2.3.15/proj4.js"></script>
<link href="libs/highcharts-5.0.6/css/motion.css" rel="stylesheet" />
<script src="libs/highcharts-5.0.6/highstock.js"></script>
<script src="libs/highcharts-5.0.6/highcharts-3d.js"></script>
<script src="libs/highcharts-5.0.6/highcharts-more.js"></script>
<script src="libs/highcharts-5.0.6/modules/annotations.js"></script>
<script src="libs/highcharts-5.0.6/modules/broken-axis.js"></script>
<script src="libs/highcharts-5.0.6/modules/data.js"></script>
<script src="libs/highcharts-5.0.6/modules/drilldown.js"></script>
<script src="libs/highcharts-5.0.6/modules/exporting.js"></script>
<script src="libs/highcharts-5.0.6/modules/funnel.js"></script>
<script src="libs/highcharts-5.0.6/modules/heatmap.js"></script>
<script src="libs/highcharts-5.0.6/modules/map.js"></script>
<script src="libs/highcharts-5.0.6/modules/no-data-to-display.js"></script>
<script src="libs/highcharts-5.0.6/modules/offline-exporting.js"></script>
<script src="libs/highcharts-5.0.6/modules/solid-gauge.js"></script>
<script src="libs/highcharts-5.0.6/modules/treemap.js"></script>
<script src="libs/highcharts-5.0.6/plugins/annotations.js"></script>
<script src="libs/highcharts-5.0.6/plugins/draggable-legend.js"></script>
<script src="libs/highcharts-5.0.6/plugins/draggable-points.js"></script>
<script src="libs/highcharts-5.0.6/plugins/export-csv.js"></script>
<script src="libs/highcharts-5.0.6/plugins/grouped-categories.js"></script>
<script src="libs/highcharts-5.0.6/plugins/motion.js"></script>
<script src="libs/highcharts-5.0.6/plugins/pattern-fill-v2.js"></script>
<script src="libs/highcharts-5.0.6/plugins/tooltip-delay.js"></script>
<script src="libs/highcharts-5.0.6/custom/reset.js"></script>
<script src="libs/highcharts-5.0.6/custom/symbols-extra.js"></script>
<script src="libs/highcharts-5.0.6/custom/text-symbols.js"></script>
<link href="libs/fontawesome-4.5.0/font-awesome.min.css" rel="stylesheet" />
<link href="libs/htmlwdgtgrid-1/htmlwdgtgrid.css" rel="stylesheet" />
<script src="libs/highchart-binding-0.5.0/highchart.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.1/leaflet.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.4/datatables.js"></script>
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/standard_html.css" type="text/css" />
<link rel="stylesheet" href="css/book.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class='before'><a href="https://m-clark.github.io/">Data Processing & Visualization</a></li>

<li class="divider"></li>
<li><a href="index.html#section"></a></li>
<li class="chapter" data-level="" data-path="1_01_intro.html"><a href="1_01_intro.html"><i class="fa fa-check"></i>Intro</a><ul>
<li class="chapter" data-level="" data-path="1_01_intro.html"><a href="1_01_intro.html#outline"><i class="fa fa-check"></i>Outline</a><ul>
<li class="chapter" data-level="" data-path="1_01_intro.html"><a href="1_01_intro.html#part-1-data-processing"><i class="fa fa-check"></i>Part 1: Data Processing</a></li>
<li class="chapter" data-level="" data-path="1_01_intro.html"><a href="1_01_intro.html#part-2-visualization"><i class="fa fa-check"></i>Part 2: Visualization</a></li>
<li class="chapter" data-level="" data-path="1_01_intro.html"><a href="1_01_intro.html#part-3-programming-basics"><i class="fa fa-check"></i>Part 3: Programming Basics</a></li>
<li class="chapter" data-level="" data-path="1_01_intro.html"><a href="1_01_intro.html#part-4-presentation"><i class="fa fa-check"></i>Part 4: Presentation</a></li>
<li class="chapter" data-level="" data-path="1_01_intro.html"><a href="1_01_intro.html#part-5-modeling"><i class="fa fa-check"></i>Part 5: Modeling</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="1_01_intro.html"><a href="1_01_intro.html#preparation"><i class="fa fa-check"></i>Preparation</a></li>
<li class="chapter" data-level="" data-path="1_01_intro.html"><a href="1_01_intro.html#other"><i class="fa fa-check"></i>Other</a></li>
<li class="chapter" data-level="" data-path="1_01_intro.html"><a href="1_01_intro.html#python"><i class="fa fa-check"></i>Python</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="1_02_dataStructures.html"><a href="1_02_dataStructures.html"><i class="fa fa-check"></i>Part I: Data Processing</a><ul>
<li class="chapter" data-level="" data-path="1_02_dataStructures.html"><a href="1_02_dataStructures.html#data-structures"><i class="fa fa-check"></i>Data Structures</a><ul>
<li class="chapter" data-level="" data-path="1_02_dataStructures.html"><a href="1_02_dataStructures.html#vectors"><i class="fa fa-check"></i>Vectors</a></li>
<li class="chapter" data-level="" data-path="1_02_dataStructures.html"><a href="1_02_dataStructures.html#matrices"><i class="fa fa-check"></i>Matrices</a></li>
<li class="chapter" data-level="" data-path="1_02_dataStructures.html"><a href="1_02_dataStructures.html#lists"><i class="fa fa-check"></i>Lists</a></li>
<li class="chapter" data-level="" data-path="1_02_dataStructures.html"><a href="1_02_dataStructures.html#data-frames"><i class="fa fa-check"></i>Data Frames</a></li>
<li><a href="1_02_dataStructures.html#data-structure-exercises"><strong>Data Structure Exercises</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="1_03_io.html"><a href="1_03_io.html"><i class="fa fa-check"></i>Input/Output</a><ul>
<li class="chapter" data-level="" data-path="1_03_io.html"><a href="1_03_io.html#other-approaches"><i class="fa fa-check"></i>Other approaches</a></li>
<li class="chapter" data-level="" data-path="1_03_io.html"><a href="1_03_io.html#faster-approaches"><i class="fa fa-check"></i>Faster approaches</a></li>
<li class="chapter" data-level="" data-path="1_03_io.html"><a href="1_03_io.html#other-data"><i class="fa fa-check"></i>Other Data</a></li>
<li class="chapter" data-level="" data-path="1_03_io.html"><a href="1_03_io.html#on-the-horizon"><i class="fa fa-check"></i>On the horizon</a></li>
<li class="chapter" data-level="" data-path="1_03_io.html"><a href="1_03_io.html#big-data"><i class="fa fa-check"></i>Big Data</a></li>
<li><a href="1_03_io.html#io-exercises"><strong>I/O Exercises</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="1_04_indexing.html"><a href="1_04_indexing.html"><i class="fa fa-check"></i>Indexing</a><ul>
<li class="chapter" data-level="" data-path="1_04_indexing.html"><a href="1_04_indexing.html#base-r-indexing-refresher"><i class="fa fa-check"></i>Base R Indexing Refresher</a></li>
<li class="chapter" data-level="" data-path="1_04_indexing.html"><a href="1_04_indexing.html#listdata.frame-extraction"><i class="fa fa-check"></i>List/Data.frame extraction</a></li>
<li><a href="1_04_indexing.html#indexing-exercises"><strong>Indexing Exercises</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="1_05_pipes.html"><a href="1_05_pipes.html"><i class="fa fa-check"></i>Pipes</a><ul>
<li class="chapter" data-level="" data-path="1_05_pipes.html"><a href="1_05_pipes.html#pipes-for-visualization-more-later"><i class="fa fa-check"></i>Pipes for Visualization (more later)</a></li>
<li class="chapter" data-level="" data-path="1_05_pipes.html"><a href="1_05_pipes.html#the-dot"><i class="fa fa-check"></i>The dot</a></li>
<li class="chapter" data-level="" data-path="1_05_pipes.html"><a href="1_05_pipes.html#flexibility"><i class="fa fa-check"></i>Flexibility</a></li>
<li class="chapter" data-level="" data-path="1_05_pipes.html"><a href="1_05_pipes.html#summary"><i class="fa fa-check"></i>Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="1_06_tidyverse.html"><a href="1_06_tidyverse.html"><i class="fa fa-check"></i>Tidyverse</a><ul>
<li class="chapter" data-level="" data-path="1_06_tidyverse.html"><a href="1_06_tidyverse.html#what-is-the-tidyverse"><i class="fa fa-check"></i>What is the tidyverse?</a></li>
<li class="chapter" data-level="" data-path="1_06_tidyverse.html"><a href="1_06_tidyverse.html#what-is-tidy"><i class="fa fa-check"></i>What is tidy?</a></li>
<li class="chapter" data-level="" data-path="1_06_tidyverse.html"><a href="1_06_tidyverse.html#dplyr"><i class="fa fa-check"></i>dplyr</a></li>
<li class="chapter" data-level="" data-path="1_06_tidyverse.html"><a href="1_06_tidyverse.html#running-example"><i class="fa fa-check"></i>Running example</a></li>
<li class="chapter" data-level="" data-path="1_06_tidyverse.html"><a href="1_06_tidyverse.html#selecting-columns"><i class="fa fa-check"></i>Selecting Columns</a></li>
<li class="chapter" data-level="" data-path="1_06_tidyverse.html"><a href="1_06_tidyverse.html#filtering-rows"><i class="fa fa-check"></i>Filtering Rows</a></li>
<li class="chapter" data-level="" data-path="1_06_tidyverse.html"><a href="1_06_tidyverse.html#generating-new-data"><i class="fa fa-check"></i>Generating New Data</a></li>
<li class="chapter" data-level="" data-path="1_06_tidyverse.html"><a href="1_06_tidyverse.html#grouping-and-summarizing-data"><i class="fa fa-check"></i>Grouping and Summarizing Data</a></li>
<li class="chapter" data-level="" data-path="1_06_tidyverse.html"><a href="1_06_tidyverse.html#renaming-columns"><i class="fa fa-check"></i>Renaming columns</a></li>
<li class="chapter" data-level="" data-path="1_06_tidyverse.html"><a href="1_06_tidyverse.html#merging-data"><i class="fa fa-check"></i>Merging Data</a></li>
<li class="chapter" data-level="" data-path="1_06_tidyverse.html"><a href="1_06_tidyverse.html#tidyr"><i class="fa fa-check"></i>tidyr</a></li>
<li class="chapter" data-level="" data-path="1_06_tidyverse.html"><a href="1_06_tidyverse.html#more-tidyverse"><i class="fa fa-check"></i>More Tidyverse</a></li>
<li class="chapter" data-level="" data-path="1_06_tidyverse.html"><a href="1_06_tidyverse.html#personal-opinion"><i class="fa fa-check"></i>Personal Opinion</a></li>
<li><a href="1_06_tidyverse.html#tidyverse-exercises"><strong>tidyverse Exercises</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="1_07_datatable.html"><a href="1_07_datatable.html"><i class="fa fa-check"></i>data.table</a><ul>
<li class="chapter" data-level="" data-path="1_07_datatable.html"><a href="1_07_datatable.html#basics"><i class="fa fa-check"></i>Basics</a></li>
<li class="chapter" data-level="" data-path="1_07_datatable.html"><a href="1_07_datatable.html#grouped-operations"><i class="fa fa-check"></i>Grouped operations</a></li>
<li class="chapter" data-level="" data-path="1_07_datatable.html"><a href="1_07_datatable.html#faster"><i class="fa fa-check"></i>Faster!</a></li>
<li class="chapter" data-level="" data-path="1_07_datatable.html"><a href="1_07_datatable.html#pipe-with-data.table"><i class="fa fa-check"></i>Pipe with data.table</a></li>
<li class="chapter" data-level="" data-path="1_07_datatable.html"><a href="1_07_datatable.html#summary-1"><i class="fa fa-check"></i>Summary</a></li>
<li class="chapter" data-level="" data-path="1_07_datatable.html"><a href="1_07_datatable.html#dtplyr"><i class="fa fa-check"></i>dtplyr</a></li>
<li><a href="1_07_datatable.html#data.table-exercises"><strong>data.table Exercises</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="2_01_thinkingvis.html"><a href="2_01_thinkingvis.html"><i class="fa fa-check"></i>Part II: Visualization</a><ul>
<li class="chapter" data-level="" data-path="2_01_thinkingvis.html"><a href="2_01_thinkingvis.html#thinking-visually-1"><i class="fa fa-check"></i>Thinking Visually</a><ul>
<li class="chapter" data-level="" data-path="2_01_thinkingvis.html"><a href="2_01_thinkingvis.html#information"><i class="fa fa-check"></i>Information</a></li>
<li class="chapter" data-level="" data-path="2_01_thinkingvis.html"><a href="2_01_thinkingvis.html#color"><i class="fa fa-check"></i>Color</a></li>
<li class="chapter" data-level="" data-path="2_01_thinkingvis.html"><a href="2_01_thinkingvis.html#contrast"><i class="fa fa-check"></i>Contrast</a></li>
<li class="chapter" data-level="" data-path="2_01_thinkingvis.html"><a href="2_01_thinkingvis.html#scaling-size"><i class="fa fa-check"></i>Scaling Size</a></li>
<li class="chapter" data-level="" data-path="2_01_thinkingvis.html"><a href="2_01_thinkingvis.html#transparency"><i class="fa fa-check"></i>Transparency</a></li>
<li class="chapter" data-level="" data-path="2_01_thinkingvis.html"><a href="2_01_thinkingvis.html#accessibility"><i class="fa fa-check"></i>Accessibility</a></li>
<li class="chapter" data-level="" data-path="2_01_thinkingvis.html"><a href="2_01_thinkingvis.html#file-types"><i class="fa fa-check"></i>File Types</a></li>
<li class="chapter" data-level="" data-path="2_01_thinkingvis.html"><a href="2_01_thinkingvis.html#summary-2"><i class="fa fa-check"></i>Summary</a></li>
<li class="chapter" data-level="" data-path="2_01_thinkingvis.html"><a href="2_01_thinkingvis.html#a-casual-list-of-things-to-avoid"><i class="fa fa-check"></i>A casual list of things to avoid</a></li>
<li class="chapter" data-level="" data-path="2_01_thinkingvis.html"><a href="2_01_thinkingvis.html#thinking-visually-exercises"><i class="fa fa-check"></i>Thinking Visually Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="2_02_ggplot2.html"><a href="2_02_ggplot2.html"><i class="fa fa-check"></i>ggplot2</a><ul>
<li class="chapter" data-level="" data-path="2_02_ggplot2.html"><a href="2_02_ggplot2.html#layers"><i class="fa fa-check"></i>Layers</a></li>
<li class="chapter" data-level="" data-path="2_02_ggplot2.html"><a href="2_02_ggplot2.html#piping"><i class="fa fa-check"></i>Piping</a></li>
<li class="chapter" data-level="" data-path="2_02_ggplot2.html"><a href="2_02_ggplot2.html#aesthetics"><i class="fa fa-check"></i>Aesthetics</a></li>
<li class="chapter" data-level="" data-path="2_02_ggplot2.html"><a href="2_02_ggplot2.html#examples"><i class="fa fa-check"></i>Examples</a></li>
<li class="chapter" data-level="" data-path="2_02_ggplot2.html"><a href="2_02_ggplot2.html#stats"><i class="fa fa-check"></i>Stats</a></li>
<li class="chapter" data-level="" data-path="2_02_ggplot2.html"><a href="2_02_ggplot2.html#scales"><i class="fa fa-check"></i>Scales</a></li>
<li class="chapter" data-level="" data-path="2_02_ggplot2.html"><a href="2_02_ggplot2.html#facets"><i class="fa fa-check"></i>Facets</a></li>
<li class="chapter" data-level="" data-path="2_02_ggplot2.html"><a href="2_02_ggplot2.html#fine-control"><i class="fa fa-check"></i>Fine control</a></li>
<li class="chapter" data-level="" data-path="2_02_ggplot2.html"><a href="2_02_ggplot2.html#themes"><i class="fa fa-check"></i>Themes</a></li>
<li class="chapter" data-level="" data-path="2_02_ggplot2.html"><a href="2_02_ggplot2.html#extensions"><i class="fa fa-check"></i>Extensions</a></li>
<li class="chapter" data-level="" data-path="2_02_ggplot2.html"><a href="2_02_ggplot2.html#summary-ggplot2"><i class="fa fa-check"></i>Summary ggplot2</a></li>
<li><a href="2_02_ggplot2.html#ggplot2-exercises"><strong>ggplot2 Exercises</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="2_03_interactive.html"><a href="2_03_interactive.html"><i class="fa fa-check"></i>Interactive Visualization</a><ul>
<li class="chapter" data-level="" data-path="2_03_interactive.html"><a href="2_03_interactive.html#packages"><i class="fa fa-check"></i>Packages</a></li>
<li class="chapter" data-level="" data-path="2_03_interactive.html"><a href="2_03_interactive.html#piping-for-visualization"><i class="fa fa-check"></i>Piping for Visualization</a></li>
<li class="chapter" data-level="" data-path="2_03_interactive.html"><a href="2_03_interactive.html#htmlwidgets"><i class="fa fa-check"></i>htmlwidgets</a></li>
<li class="chapter" data-level="" data-path="2_03_interactive.html"><a href="2_03_interactive.html#plotly"><i class="fa fa-check"></i>Plotly</a></li>
<li class="chapter" data-level="" data-path="2_03_interactive.html"><a href="2_03_interactive.html#highcharter"><i class="fa fa-check"></i>Highcharter</a></li>
<li class="chapter" data-level="" data-path="2_03_interactive.html"><a href="2_03_interactive.html#visnetwork"><i class="fa fa-check"></i>visNetwork</a></li>
<li class="chapter" data-level="" data-path="2_03_interactive.html"><a href="2_03_interactive.html#leaflet"><i class="fa fa-check"></i>leaflet</a></li>
<li class="chapter" data-level="" data-path="2_03_interactive.html"><a href="2_03_interactive.html#dt"><i class="fa fa-check"></i>DT</a></li>
<li class="chapter" data-level="" data-path="2_03_interactive.html"><a href="2_03_interactive.html#shiny"><i class="fa fa-check"></i>Shiny</a></li>
<li class="chapter" data-level="" data-path="2_03_interactive.html"><a href="2_03_interactive.html#interactive-and-visual-data-exploration"><i class="fa fa-check"></i>Interactive and Visual Data Exploration</a></li>
<li><a href="2_03_interactive.html#interactive-visualization-exercises"><strong>Interactive Visualization Exercises</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="3_01_programming.html"><a href="3_01_programming.html"><i class="fa fa-check"></i>Part III: Programming</a><ul>
<li class="chapter" data-level="" data-path="3_01_programming.html"><a href="3_01_programming.html#basics-1"><i class="fa fa-check"></i>Basics</a><ul>
<li class="chapter" data-level="" data-path="3_01_programming.html"><a href="3_01_programming.html#r-objects"><i class="fa fa-check"></i>R Objects</a></li>
<li class="chapter" data-level="" data-path="3_01_programming.html"><a href="3_01_programming.html#help-files"><i class="fa fa-check"></i>Help Files</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="3_02_iterative.html"><a href="3_02_iterative.html"><i class="fa fa-check"></i>Iterative Programming</a><ul>
<li class="chapter" data-level="" data-path="3_02_iterative.html"><a href="3_02_iterative.html#for-loops"><i class="fa fa-check"></i>For loops</a></li>
<li class="chapter" data-level="" data-path="3_02_iterative.html"><a href="3_02_iterative.html#while-alternative"><i class="fa fa-check"></i>While alternative</a></li>
<li class="chapter" data-level="" data-path="3_02_iterative.html"><a href="3_02_iterative.html#dots-and-loops"><i class="fa fa-check"></i>(Dots and) Loops</a></li>
<li class="chapter" data-level="" data-path="3_02_iterative.html"><a href="3_02_iterative.html#apply-family"><i class="fa fa-check"></i>apply family</a></li>
<li class="chapter" data-level="" data-path="3_02_iterative.html"><a href="3_02_iterative.html#purrr"><i class="fa fa-check"></i>purrr</a></li>
<li class="chapter" data-level="" data-path="3_02_iterative.html"><a href="3_02_iterative.html#working-with-lists"><i class="fa fa-check"></i>Working with lists</a></li>
<li class="chapter" data-level="" data-path="3_02_iterative.html"><a href="3_02_iterative.html#iterative-programming-exercises"><i class="fa fa-check"></i>Iterative Programming Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="3_03_functions.html"><a href="3_03_functions.html"><i class="fa fa-check"></i>Writing functions</a><ul>
<li class="chapter" data-level="" data-path="3_03_functions.html"><a href="3_03_functions.html#a-starting-point"><i class="fa fa-check"></i>A starting point</a></li>
<li class="chapter" data-level="" data-path="3_03_functions.html"><a href="3_03_functions.html#dry"><i class="fa fa-check"></i>DRY</a></li>
<li class="chapter" data-level="" data-path="3_03_functions.html"><a href="3_03_functions.html#lambda-functions"><i class="fa fa-check"></i>Lambda functions</a></li>
<li class="chapter" data-level="" data-path="3_03_functions.html"><a href="3_03_functions.html#writing-functions-exercises"><i class="fa fa-check"></i>Writing Functions Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="3_04_more.html"><a href="3_04_more.html"><i class="fa fa-check"></i>More</a><ul>
<li class="chapter" data-level="" data-path="3_04_more.html"><a href="3_04_more.html#vectorization"><i class="fa fa-check"></i>Vectorization</a></li>
<li class="chapter" data-level="" data-path="3_04_more.html"><a href="3_04_more.html#regular-expressions"><i class="fa fa-check"></i>Regular Expressions</a></li>
<li><a href="3_04_more.html#vector-exercises"><strong>Vector Exercises</strong></a></li>
<li><a href="3_04_more.html#regex-exercises"><strong>Regex Exercises</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="999_summary.html"><a href="999_summary.html"><i class="fa fa-check"></i>Summary</a></li>
<li class="divider"></li>
<li class='after'><a href="https://m-clark.github.io/"><img src="img/mc.png" style="width:50%; padding:0px 0; display:block; margin: 0 auto;" alt="MC logo"></a></li>
<li class='after'><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="width:50%; border-width:0; display:block; margin: 0 auto;" src="img/ccbysa.png" /></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Processing &amp; Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="more" class="section level2">
<h2>More</h2>
<div id="vectorization" class="section level3">
<h3>Vectorization</h3>
<div id="boolean-indexing" class="section level4">
<h4>Boolean Indexing</h4>
<p>Assume <span class="objclass">x</span> is a vector of numbers. How would we create an index representing any value greater than 2?</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb321-1" data-line-number="1">x =<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">10</span>, <span class="dv">-5</span>)</a>
<a class="sourceLine" id="cb321-2" data-line-number="2">idx =<span class="st"> </span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb321-3" data-line-number="3">idx</a></code></pre></div>
<pre><code>[1] FALSE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb323-1" data-line-number="1">x[idx]</a></code></pre></div>
<pre><code>[1] 10</code></pre>
<p>As mentioned <a href="1_02_dataStructures.html#logicals">previously</a>, <span class="objclass">logicals</span> are objects with values of <code>TRUE</code> or <code>FALSE</code>, like the <span class="objclass">idx</span> variable above. While sometimes we want to deal with the logical object as an end, it is extremely commonly used as an index in data processing. Note how we don’t have to create an explicit index object first (though often you should), as R indexing is ridiculously flexible. Here are more examples, not necessarily recommended, but just to demonstrate the flexibility of Boolean indexing.</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb325-1" data-line-number="1">x[x <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb325-2" data-line-number="2">x[x <span class="op">!=</span><span class="st"> </span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb325-3" data-line-number="3">x[<span class="kw">ifelse</span>(x <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="op">&amp;</span><span class="st"> </span>x <span class="op">!=</span><span class="dv">10</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)]</a>
<a class="sourceLine" id="cb325-4" data-line-number="4">x[{y =<span class="st"> </span>idx; y}]</a>
<a class="sourceLine" id="cb325-5" data-line-number="5">x[<span class="kw">resid</span>(<span class="kw">lm</span>(y <span class="op">~</span><span class="st"> </span>x)) <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>]</a></code></pre></div>
</div>
<div id="vectorized-operations" class="section level4">
<h4>Vectorized operations</h4>
<p>Boolean indexing allows us to take <span class="emph">vectorized</span> approaches to dealing with data. Consider the following unfortunately coded loop, where we create a variable <code>y</code>, which takes on the value of <strong>Yes</strong> if the variable <code>x</code> is greater than 2, and <strong>No</strong> if otherwise.</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb326-1" data-line-number="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(mydf)) {</a>
<a class="sourceLine" id="cb326-2" data-line-number="2">  check =<span class="st"> </span>mydf<span class="op">$</span>x[i] <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb326-3" data-line-number="3">  <span class="cf">if</span> (check<span class="op">==</span><span class="ot">TRUE</span>) {</a>
<a class="sourceLine" id="cb326-4" data-line-number="4">    mydf<span class="op">$</span>y[i] =<span class="st"> &#39;Yes&#39;</span></a>
<a class="sourceLine" id="cb326-5" data-line-number="5">  } </a>
<a class="sourceLine" id="cb326-6" data-line-number="6">  <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb326-7" data-line-number="7">    mydf<span class="op">$</span>y[i] =<span class="st"> &#39;No&#39;</span></a>
<a class="sourceLine" id="cb326-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb326-9" data-line-number="9">}</a></code></pre></div>
<p>Compare<a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a>:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb327-1" data-line-number="1">mydf<span class="op">$</span>y =<span class="st"> &#39;No&#39;</span></a>
<a class="sourceLine" id="cb327-2" data-line-number="2">mydf<span class="op">$</span>y[mydf<span class="op">$</span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>] =<span class="st"> &#39;Yes&#39;</span></a></code></pre></div>
<p>This gets us the same thing, and would be much faster than the looped approach. Boolean indexing is an example of a vectorized operation. The whole vector is considered, rather than each element individually. The result is that any preprocessing is done once rather than the <code>n</code> iterations of the loop. In R, this will always faster.</p>
<p>Example: Log all values in a matrix.</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb328-1" data-line-number="1">mymatrix_log =<span class="st"> </span><span class="kw">log</span>(mymatrix)</a></code></pre></div>
<p>This is way faster than looping over elements, rows or columns. Here we’ll let the <span class="func">apply</span> function stand in for our loop, logging the elements of each column.</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb329-1" data-line-number="1">mymatrix =<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">runif</span>(<span class="dv">100</span>), <span class="dv">10</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb329-2" data-line-number="2"><span class="kw">identical</span>(<span class="kw">apply</span>(mymatrix, <span class="dv">2</span>, log), <span class="kw">log</span>(mymatrix))</a></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb331-1" data-line-number="1"><span class="kw">library</span>(microbenchmark)</a>
<a class="sourceLine" id="cb331-2" data-line-number="2"><span class="kw">microbenchmark</span>(<span class="kw">apply</span>(mymatrix, <span class="dv">2</span>, log),</a>
<a class="sourceLine" id="cb331-3" data-line-number="3">               <span class="kw">log</span>(mymatrix))</a></code></pre></div>
<pre><code>Unit: nanoseconds
                    expr   min      lq     mean median      uq   max neval cld
 apply(mymatrix, 2, log) 20791 21229.5 23006.17  21507 21763.0 77567   100   b
           log(mymatrix)   621   652.5   778.53    715   753.5  6517   100  a </code></pre>
<p>Many vectorized functions already exist in R. They are often written in C, Fortran etc., and so even faster. Not all programming languages lean toward vectorized operations, and may not see much speed gain from it. In R however, you’ll want to prefer it. Even without, it’s cleaner/clearer code, another reason to use the approach.</p>
<div id="timings" class="section level5">
<h5>Timings</h5>
<p>The previous demonstrates how to use apply. However, there is a <span class="func">scale</span> function in base R that uses a more vectorized approach under the hood. The following demonstrates various approaches to standardizing the columns of the matrix, even using a parallelized approach. As you’ll see, the base R function requires very little code and beats the others.</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb333-1" data-line-number="1">mymat =<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">100000</span>), <span class="dt">ncol=</span><span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb333-2" data-line-number="2"></a>
<a class="sourceLine" id="cb333-3" data-line-number="3">stdize &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb333-4" data-line-number="4">  (x<span class="op">-</span><span class="kw">mean</span>(x)) <span class="op">/</span><span class="st"> </span><span class="kw">sd</span>(x)</a>
<a class="sourceLine" id="cb333-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb333-6" data-line-number="6"></a>
<a class="sourceLine" id="cb333-7" data-line-number="7">doubleloop =<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb333-8" data-line-number="8">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(mymat)) {</a>
<a class="sourceLine" id="cb333-9" data-line-number="9">    x =<span class="st"> </span>mymat[, i]</a>
<a class="sourceLine" id="cb333-10" data-line-number="10">    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(x)) {</a>
<a class="sourceLine" id="cb333-11" data-line-number="11">      x[j] =<span class="st"> </span>(x[j] <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)) <span class="op">/</span><span class="st"> </span><span class="kw">sd</span>(x)</a>
<a class="sourceLine" id="cb333-12" data-line-number="12">    }</a>
<a class="sourceLine" id="cb333-13" data-line-number="13">  }</a>
<a class="sourceLine" id="cb333-14" data-line-number="14">}</a>
<a class="sourceLine" id="cb333-15" data-line-number="15"></a>
<a class="sourceLine" id="cb333-16" data-line-number="16"></a>
<a class="sourceLine" id="cb333-17" data-line-number="17">singleloop =<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb333-18" data-line-number="18">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(mymat)) {</a>
<a class="sourceLine" id="cb333-19" data-line-number="19">    x =<span class="st"> </span>mymat[, i]</a>
<a class="sourceLine" id="cb333-20" data-line-number="20">    x =<span class="st"> </span>(x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)) <span class="op">/</span><span class="st"> </span><span class="kw">sd</span>(x)</a>
<a class="sourceLine" id="cb333-21" data-line-number="21">  }</a>
<a class="sourceLine" id="cb333-22" data-line-number="22">}</a>
<a class="sourceLine" id="cb333-23" data-line-number="23"></a>
<a class="sourceLine" id="cb333-24" data-line-number="24"></a>
<a class="sourceLine" id="cb333-25" data-line-number="25"><span class="kw">library</span>(parallel)</a>
<a class="sourceLine" id="cb333-26" data-line-number="26">cl =<span class="st"> </span><span class="kw">makeCluster</span>(<span class="dv">8</span>)</a>
<a class="sourceLine" id="cb333-27" data-line-number="27"><span class="kw">clusterExport</span>(cl, <span class="kw">c</span>(<span class="st">&#39;stdize&#39;</span>, <span class="st">&#39;mymat&#39;</span>))</a>
<a class="sourceLine" id="cb333-28" data-line-number="28">doParallel<span class="op">::</span><span class="kw">registerDoParallel</span>(cl)</a>
<a class="sourceLine" id="cb333-29" data-line-number="29"></a>
<a class="sourceLine" id="cb333-30" data-line-number="30">test =<span class="st"> </span>microbenchmark<span class="op">::</span><span class="kw">microbenchmark</span>(<span class="dt">doubleloop=</span><span class="kw">doubleloop</span>(),</a>
<a class="sourceLine" id="cb333-31" data-line-number="31">                                      <span class="dt">singleloop=</span><span class="kw">singleloop</span>(), </a>
<a class="sourceLine" id="cb333-32" data-line-number="32">                                      <span class="dt">apply=</span><span class="kw">apply</span>(mymat, <span class="dv">2</span>, stdize), </a>
<a class="sourceLine" id="cb333-33" data-line-number="33">                                      <span class="dt">parApply=</span><span class="kw">parApply</span>(cl, mymat, <span class="dv">2</span>, stdize),</a>
<a class="sourceLine" id="cb333-34" data-line-number="34">                                      <span class="dt">vectorized=</span><span class="kw">scale</span>(mymat), <span class="dt">times=</span><span class="dv">25</span>)</a>
<a class="sourceLine" id="cb333-35" data-line-number="35"><span class="kw">stopCluster</span>(cl)</a>
<a class="sourceLine" id="cb333-36" data-line-number="36">test</a></code></pre></div>
<pre><code>Unit: milliseconds
       expr         min          lq       mean     median         uq        max neval cld
 doubleloop 2882.148089 2904.739076 2938.21281 2946.57065 2952.25532 3013.29805    25   c
 singleloop   28.989806   29.512434   33.08177   31.17037   32.42606   84.79185    25  b 
      apply   32.167901   33.350945   33.96146   34.13204   34.64055   36.18983    25  b 
   parApply   17.691611   18.213638   21.91323   19.63893   21.12156   73.60683    25 ab 
 vectorized    8.085578    8.491433   10.25583   10.66990   11.02532   12.62173    25 a  </code></pre>
</div>
</div>
</div>
<div id="regular-expressions" class="section level3">
<h3>Regular Expressions</h3>
<p>A <span class="emph">regular expression</span>, regex for short, is a sequence of characters that can be used as a search pattern for a string. Common operations are to merely detect, extract, or replace the matching string. There are actually many different flavors of regex for different programming languages, which are all flavors that originate with the Perl approach, or can enable the Perl approach to be used. However, knowing one means you pretty much know the others with only minor modifications if any.</p>
<p>To be clear, not only is regex another language, it’s nigh on indecipherable. You will not learn much regex, but what you do learn will save a potentially enormous amount of time you’d otherwise spend trying to do things in a more haphazard fashion. Furthermore, practically every situation that will come up has already been asked and answered on <a href="https://stackoverflow.com/questions/tagged/regex">Stack Overflow</a>, so you’ll almost always be able to search for what you need.</p>
<p>Here is an example:</p>
<p><code>^r.*shiny[0-9]$</code></p>
<p>What is <em>that</em> you may ask? Well here is an example of strings it would and wouldn’t match.</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb335-1" data-line-number="1">string =<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;r is the shiny&#39;</span>, <span class="st">&#39;r is the shiny1&#39;</span>, <span class="st">&#39;r shines brightly&#39;</span>)</a>
<a class="sourceLine" id="cb335-2" data-line-number="2"><span class="kw">grepl</span>(string, <span class="dt">pattern=</span><span class="st">&#39;^r.*shiny[0-9]$&#39;</span>)</a></code></pre></div>
<p>What the regex is esoterically attempting to match is any string that starts with ‘r’ and ends with ‘shiny_’ where _ is some single digit. Specifically it breaks down as follows:</p>
<ul>
<li><strong>^</strong> : starts with, so ^r means starts with r</li>
<li><strong>.</strong> : any character</li>
<li><strong>*</strong> : match the preceding zero or more times</li>
<li><strong>shiny</strong> : match ‘shiny’</li>
<li><strong>[0-9]</strong> : any digit 0-9 (note that we are still talking about strings, not actual numbered values)</li>
<li><strong>$</strong> : ends with preceding</li>
</ul>
<div id="typical-uses" class="section level4">
<h4>Typical Uses</h4>
<p>None of it makes sense, so don’t attempt to do so. Just try to remember a couple key approaches, and search the web for the rest.</p>
<p>Along with ^ . * [0-9] $, a couple more common ones are:</p>
<ul>
<li><strong>[a-z]</strong> : letters a-z</li>
<li><strong>[A-Z]</strong> : capital letters</li>
<li><strong>+</strong> : match the preceding one or more times</li>
<li><strong>()</strong> : groupings</li>
<li><strong>|</strong> : logical or e.g. [a-z]|[0-9] (a lower case letter or a number)</li>
<li><strong>?</strong> : preceding item is optional, and will be matched at most once. Typically used for ‘look ahead’ and ‘look behind’</li>
<li><strong>\</strong> : escape a character, like if you actually wanted to search for a period instead of using it as a regex pattern, you’d use \., though in R you need \\, i.e. double slashes, for escape.</li>
</ul>
<p>In addition, in R there are certain predefined characters that can be called:</p>
<ul>
<li><strong>[:punct:]</strong> : punctuation</li>
<li><strong>[:blank:]</strong> : spaces and tabs</li>
<li><strong>[:alnum:]</strong> : alphanumeric characters</li>
</ul>
<p>Those are just a few. The key functions can be found by looking at the help file for the <span class="func">grep</span> function (<code>?grep</code>). However, the <span class="pack">stringr</span> package has the same functionality with perhaps a slightly faster processing (though that’s due to the underlying <span class="pack">stringi</span> package).</p>
<p>See if you can guess which of the following will turn up <code>TRUE</code>.</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb336-1" data-line-number="1"><span class="kw">grepl</span>(<span class="kw">c</span>(<span class="st">&#39;apple&#39;</span>, <span class="st">&#39;pear&#39;</span>, <span class="st">&#39;banana&#39;</span>), <span class="dt">pattern=</span><span class="st">&#39;a&#39;</span>)</a>
<a class="sourceLine" id="cb336-2" data-line-number="2"><span class="kw">grepl</span>(<span class="kw">c</span>(<span class="st">&#39;apple&#39;</span>, <span class="st">&#39;pear&#39;</span>, <span class="st">&#39;banana&#39;</span>), <span class="dt">pattern=</span><span class="st">&#39;^a&#39;</span>)</a>
<a class="sourceLine" id="cb336-3" data-line-number="3"><span class="kw">grepl</span>(<span class="kw">c</span>(<span class="st">&#39;apple&#39;</span>, <span class="st">&#39;pear&#39;</span>, <span class="st">&#39;banana&#39;</span>), <span class="dt">pattern=</span><span class="st">&#39;^a|a$&#39;</span>)</a></code></pre></div>
<p>Scraping the web, munging data, just finding things in your scripts … you can potentially use this all the time, and not only with text analysis, as we’ll now see.</p>
</div>
</div>
<div id="vector-exercises" class="section level3">
<h3><strong>Vector Exercises</strong></h3>
<div id="exercise-1-8" class="section level4">
<h4>Exercise 1</h4>
<p>Show a non-vectorized and a vectorized way to add a two to the numbers 1 through 3.</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb337-1" data-line-number="1">?</a></code></pre></div>
</div>
<div id="exercise-2-9" class="section level4">
<h4>Exercise 2</h4>
<p>Of the following <span class="objclass">matrix</span>, which do you think is faster? Test it.</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb338-1" data-line-number="1">x =<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rpois</span>(<span class="dv">100000</span>, <span class="dt">lambda =</span> <span class="dv">5</span>), <span class="dt">ncol =</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb338-2" data-line-number="2"><span class="kw">colSums</span>(x)</a>
<a class="sourceLine" id="cb338-3" data-line-number="3"><span class="kw">apply</span>(x, <span class="dv">2</span>, sum)</a>
<a class="sourceLine" id="cb338-4" data-line-number="4"></a>
<a class="sourceLine" id="cb338-5" data-line-number="5">microbenchmark<span class="op">::</span><span class="kw">microbenchmark</span>(</a>
<a class="sourceLine" id="cb338-6" data-line-number="6">  <span class="dt">cs =</span> <span class="kw">colSums</span>(x),</a>
<a class="sourceLine" id="cb338-7" data-line-number="7">  <span class="dt">app =</span> <span class="kw">apply</span>(x, <span class="dv">2</span>, sum)</a>
<a class="sourceLine" id="cb338-8" data-line-number="8">)</a></code></pre></div>
</div>
</div>
<div id="regex-exercises" class="section level3">
<h3><strong>Regex Exercises</strong></h3>
<div id="exercise-1-9" class="section level4">
<h4>Exercise 1</h4>
<p>Using stringr and str_replace, replace all the states a’s with nothing.</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb339-1" data-line-number="1"><span class="kw">library</span>(stringr)</a>
<a class="sourceLine" id="cb339-2" data-line-number="2"><span class="kw">str_replace</span>(state.name, <span class="dt">pattern =</span> ?, <span class="dt">replacement =</span> ?)</a></code></pre></div>

</div>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="25">
<li id="fn25"><p>For those familiar with <span class="func">ifelse</span>, that would be applicable, but is not the point of the example.<a href="3_04_more.html#fnref25" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="3_03_functions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="999_summary.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["twitter", "facebook", "google", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "section",
"depth": 3,
"scroll_highlight": true
},
"highlight": "pygments",
"search": true
});
});
</script>

</body>

</html>
